<!DOCTYPE html>
<html lang="pl-PL">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Analiza gier hazardowych | One Page Knowledge</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.6cd8c973.css" as="style"><link rel="preload" href="/assets/js/app.bd92e1f5.js" as="script"><link rel="preload" href="/assets/js/30.7d313f6b.js" as="script"><link rel="preload" href="/assets/js/46.59caeff0.js" as="script"><link rel="preload" href="/assets/js/45.c7013a6c.js" as="script"><link rel="preload" href="/assets/js/34.5336840b.js" as="script"><link rel="preload" href="/assets/js/35.a518df90.js" as="script"><link rel="preload" href="/assets/js/36.93c73ba4.js" as="script"><link rel="prefetch" href="/assets/js/1.59a37a60.js"><link rel="prefetch" href="/assets/js/2.2c6077e0.js"><link rel="prefetch" href="/assets/js/3.de0cb141.js"><link rel="prefetch" href="/assets/js/4.08be0b1e.js"><link rel="prefetch" href="/assets/js/5.a64c9bd8.js"><link rel="prefetch" href="/assets/js/6.51a66b30.js"><link rel="prefetch" href="/assets/js/7.8b9dabdf.js"><link rel="prefetch" href="/assets/js/8.cb48b719.js"><link rel="prefetch" href="/assets/js/9.c88d4f59.js"><link rel="prefetch" href="/assets/js/10.6d40f3fe.js"><link rel="prefetch" href="/assets/js/11.541fb842.js"><link rel="prefetch" href="/assets/js/12.2171c9af.js"><link rel="prefetch" href="/assets/js/13.0bdc693f.js"><link rel="prefetch" href="/assets/js/14.2f1335e3.js"><link rel="prefetch" href="/assets/js/15.24438cbf.js"><link rel="prefetch" href="/assets/js/16.b88a490d.js"><link rel="prefetch" href="/assets/js/17.7c72ef1d.js"><link rel="prefetch" href="/assets/js/18.be16b489.js"><link rel="prefetch" href="/assets/js/19.9f25440f.js"><link rel="prefetch" href="/assets/js/20.a0e8e369.js"><link rel="prefetch" href="/assets/js/21.d797005c.js"><link rel="prefetch" href="/assets/js/22.cfa3a842.js"><link rel="prefetch" href="/assets/js/23.8224ebc7.js"><link rel="prefetch" href="/assets/js/24.45e807b9.js"><link rel="prefetch" href="/assets/js/25.9eb62023.js"><link rel="prefetch" href="/assets/js/26.03b2a486.js"><link rel="prefetch" href="/assets/js/27.30eb1809.js"><link rel="prefetch" href="/assets/js/28.96000227.js"><link rel="prefetch" href="/assets/js/29.5d84c0a2.js"><link rel="prefetch" href="/assets/js/31.0d62c044.js"><link rel="prefetch" href="/assets/js/32.4ced69d1.js"><link rel="prefetch" href="/assets/js/33.bf7d8176.js"><link rel="prefetch" href="/assets/js/37.23cd8948.js"><link rel="prefetch" href="/assets/js/38.9a5b32e6.js"><link rel="prefetch" href="/assets/js/39.d866636e.js"><link rel="prefetch" href="/assets/js/40.7718ed64.js"><link rel="prefetch" href="/assets/js/41.9e578eb8.js"><link rel="prefetch" href="/assets/js/42.792ce11d.js"><link rel="prefetch" href="/assets/js/43.3152f468.js"><link rel="prefetch" href="/assets/js/44.557c9f8f.js"><link rel="prefetch" href="/assets/js/47.bb90c800.js"><link rel="prefetch" href="/assets/js/48.43d4db50.js"><link rel="prefetch" href="/assets/js/49.2851bd12.js"><link rel="prefetch" href="/assets/js/50.a1744bc8.js"><link rel="prefetch" href="/assets/js/51.306ab5ba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6cd8c973.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/" class="home-link router-link-active"><!----><span class="site-name">
      One Page Knowledge
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Analiza gier hazardowych</span><!----></p><ul class="sidebar-group-items"><li><a href="/gambling/#wstep" class="sidebar-link">Wstęp</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/gambling/#gra" class="sidebar-link">Gra</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gambling/#automated-betting" class="sidebar-link">Automated betting</a></li><li class="sidebar-sub-header"><a href="/gambling/#table-system" class="sidebar-link">Table System</a></li><li class="sidebar-sub-header"><a href="/gambling/#wyjscie" class="sidebar-link">Wyjście:</a></li><li class="sidebar-sub-header"><a href="/gambling/#labouchere" class="sidebar-link">Labouchere</a></li><li class="sidebar-sub-header"><a href="/gambling/#gra-2" class="sidebar-link">Gra</a></li></ul></li><li><a href="/gambling/#artykul" class="sidebar-link">Artykuł</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gambling/#definicja" class="sidebar-link">Definicja</a></li><li class="sidebar-sub-header"><a href="/gambling/#automat" class="sidebar-link">Automat</a></li><li class="sidebar-sub-header"><a href="/gambling/#strategia-dla-zysku" class="sidebar-link">Strategia dla zysku</a></li><li class="sidebar-sub-header"><a href="/gambling/#strategia-tablicowa" class="sidebar-link">Strategia tablicowa</a></li><li class="sidebar-sub-header"><a href="/gambling/#labouchere-2" class="sidebar-link">Labouchere</a></li></ul></li><li><a href="/gambling/#wnioski" class="sidebar-link">Wnioski</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/gambling/#zalaczniki" class="sidebar-link">Załączniki</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/gambling/#zrodla" class="sidebar-link">Źródła</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/gambling/#video" class="sidebar-link">Video</a></li><li class="sidebar-sub-header"><a href="/gambling/#ksiazki" class="sidebar-link">Książki</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="wstep"><a href="#wstep" aria-hidden="true" class="header-anchor">#</a> Wstęp</h2><p><strong>Ada Lovelace</strong>, znana córka pisarza lorda Byrona i uważana jako pierwsza programistka na świecie. W swoim okresie miała pieniądze i wykształcenie dzięki któremu mogła realizować swoje marzenia. Mało jednak kto wie jak skończyła. W wieku 36 lat zmarła na raka, i mimo bogactwa z olbrzymimi długami spowodowanych hazardem.</p><p>Ada wierzyła że w jakiś sposób dzięki matematyce będzie w stanie wygrywać na wyścigach konnych co niestety dla niej nie skończyło się dobrze. Hazard do dziś istnieje i aktualnie jest jeszcze łatwiej dostępny niż kilkadziesiąt lat temu. Teraz nie musimy wybierać się do Las Vegas by móc grać w kości czy ruletkę. Wystarczy tylko odwiedzenie odpowiedniej strony.</p><p>Aktualnie większość (jak nie każdy) który w pewnym stopniu interesuje się matematyką może pomyśleć czy nie dałoby się wykorzystać swojej wiedzy i stworzyć system który zapewniłby nam stały dopływ gotówki 😃 Może istnieje jakiś algorytm dzięki któremu możemy zapewnić sobie wygraną. W dodatku mamy przecież komputery i języki programowania typu Python. Czy nie lepiej najpierw zrobić sobie obliczenia na sucho i przeprowadzić testy na tysiącach symulacji zanim weżmiemy swoje oszczędności i pomnożymy je dzięki Matematyce.</p><p>W artykule będe opisywał tylko losowe gry hazardowe. Nie ma tu takich gier jak Poker ponieważ on mimo elementu losowości zależy także od umiejętności i nawet w przypadku słabych rozdań pozwala zdolnym graczom wygrywać.</p><p>Przykładem niech będzie gra w stylu rzutu monetą (kostką). Komputer losuje wartość od 0 do 100  i jeśli wytypowaliśmy że będzie np: większa niż  50 i tak jest to wygrywamy, jeśli nie to przegrywamy. Oczywiście przy typowaniu mniejszych zakresów stawka jest odpowiednio niższa. I analizując tak przedstawiają się niektóre stawki:</p><table><thead><tr><th>Zakładamy że wynik jest mniejszy od</th><th>Szansa wygranej</th><th>Wygrana od zakładu (bet)</th></tr></thead><tbody><tr><td>24.75</td><td>24.75%</td><td>4.00x</td></tr><tr><td>33.00</td><td>33.00%</td><td>3.00x</td></tr><tr><td>49.50</td><td>49.50%</td><td>2.00x</td></tr><tr><td>50.00</td><td>50.00%</td><td>1.98x</td></tr><tr><td>33.00</td><td>33.00%</td><td>3.00x</td></tr><tr><td>24.75</td><td>24.75%</td><td>4.00x</td></tr><tr><td>66.00</td><td>66.00%</td><td>1.50x</td></tr><tr><td>75.00</td><td>75.00%</td><td>1.32x</td></tr><tr><td>90.00</td><td>90.00%</td><td>1.10x</td></tr></tbody></table><p>Warto zauważyć że przy stawce 50% jest to tak naprawdę gra w rzut monetą. Powiedzmy że gramy z kolegą, stawiam 1 złotówkę i typuje reszkę. Jeśli wypadnie reszką kolega oddaje mi 0.98zł czyli razem mam 1.98zł. Natomiast jeśli on wygra zabiera moją złotówkę czyli dostaje łącznie 2 złote. Od razu widać że gra nie jest do końca uczciwa, w przypadku przegranej oddajemy więcej niż kasyno. Te zależności widać także przy innych zakładach i jest to tzw. marża kasyna. Jeśli zagramy wiele razy możemy przypuszczać że udział orłów i reszek będzie dążył do 50% (jeśli jest to idealnie symetrycznie moneta). Tak więc grając cały czas w przypadku równego podziału dostałbym za reszkę 50% wszystkich wpłaconych pieniędzy. Czyli tyle samo co wpłaciłem. Na końcu obaj wyszlibyśmy na 0. Natomiast w przypadku gdy dostajemy mniej co wyniknie z naszych symulacji w przypadku tak prostego algorytmu nasza kwota będzie się systematycznie pomniejszać.</p><p>Poniżej przedstawiam dwie części. Pierwszy z nich to Gra. Jest to napisana przeze mnie kopia systemu ze strony darmowego kasyna do testów w której możemy symulować nasze zachowania na podstawie 3 algorytmów.</p><ul><li>Pierwszy to automat który jest kopią automatu ze stron z zakładmi</li><li>Drugi jest moim własnym systemem tablicowych gdzie możesz samemu ustalić co robić po każdej wygranej/przegranej, o ile podnieść stawkę i z jakim prawdopodobieństwem zagrać.</li><li>Trzeci jest systemem Labouchere który jest popularnym systemem w grach hazardowych takich jak ruletka.</li></ul><p>Druga część pokazuje jak można takie algorytmy sobie zasymulować w Pythonie i może przed zobaczyć czy nasze cudowny algorytm rzeczywiście działa 😃</p><p>Na koniec wstępu mała dygresja:</p><div class="danger custom-block"><p class="custom-block-title">Polskie Prawo</p><p>Według polskiej ustawy wszelkie gry hazardowe online które nie pochodzą od podmiotu wyznaczonego przez państwo (Totalizator Sportowy) są zabronione. W artykule wykorzystałem darmowe strony do grania które służą tylko do grania i nie wymagają wkładu pieniężnego.</p></div><h2 id="gra"><a href="#gra" aria-hidden="true" class="header-anchor">#</a> Gra</h2><h3 id="automated-betting"><a href="#automated-betting" aria-hidden="true" class="header-anchor">#</a> Automated betting</h3><p>Polega on na automatycznym zwiększaniu wartości zakładu po przegranej albo wygranej.</p><p>Wejścia:</p><ul><li><strong>START CASH</strong>: kwota początkowa</li><li><strong>START BET AMOUNT</strong>: początkowa stawka</li><li><strong>NUMBER OF RUNS</strong>: liczba uruchomień</li><li><strong>GAME</strong>: Rodzaj gry i prawdopodobieństwo wygranej</li><li><strong>NUMBER OF ROLLS</strong>: liczba rzutów</li><li><strong>ON LOSS</strong>: co się dzieje po przegranej
<ul><li><strong>Reset to base</strong>: powrót to początkowej wartości</li><li><strong>Increasy by %</strong>: Zwiększenie wartości o podany %</li></ul></li><li><strong>ON WIN</strong>: co się dzieje po wygranej
<ul><li><strong>Reset to base</strong>: powrót to początkowej wartości</li><li><strong>Increasy by %</strong>: Zwiększenie wartości o podany %</li></ul></li></ul><h3 id="table-system"><a href="#table-system" aria-hidden="true" class="header-anchor">#</a> Table System</h3><p>W odróżnieniu od Automated Betting można także ustawić co robimy po przegranej pierwszej, drugiej, itp…</p><p>Wejścia:</p><ul><li><strong>START CASH</strong>: kwota początkowa</li><li><strong>START BET AMOUNT</strong>: początkowa stawka</li><li><strong>NUMBER OF RUNS</strong>: liczba uruchomień</li><li><strong>GAME</strong>: Rodzaj gry i prawdopodobieństwo wygranej</li><li><strong>NUMBER OF ROLLS</strong>: liczba rzutów</li><li><strong>ON LOSS</strong>: co się dzieje po przegranej
<ul><li>1 <span class="red" data-v-03878d0e>|</span>: Numer przegranej</li><li><span class="red" data-v-9e33b382>LOSS:</span> Ile przegraliśmy</li><li><strong>Reset to base</strong>: powrót to początkowej wartości</li><li><strong>Increasy by %</strong>: Zwiększenie wartości o podany %</li><li><strong>GAME</strong>: Jaką gre ustawić po przegranej</li><li><span class="red" data-v-9e33b382>BET:</span> Ile wynosi stawka</li><li><span class="red" data-v-03878d0e>TO WIN</span>: IIle można wygrać i jaki jest całkowity zysk po wygraniu</li></ul></li><li><strong>ON WIN</strong>: co się dzieje po wygranej
<ul><li>1 <span class="red" data-v-03878d0e>|</span>: Numer wygranej</li><li><span class="red" data-v-03878d0e>WIN:</span> Ile wygraliśmy</li><li><strong>Reset to base</strong>: powrót to początkowej wartości</li><li><strong>Increasy by %</strong>: Zwiększenie wartości o podany %</li><li><strong>GAME</strong>: Jaką gre ustawić po przegranej</li><li><span class="red" data-v-9e33b382>BET:</span> Ile wynosi stawka</li><li><span class="red" data-v-03878d0e>TO WIN</span>: IIle można wygrać</li></ul></li></ul><h3 id="wyjscie"><a href="#wyjscie" aria-hidden="true" class="header-anchor">#</a> Wyjście:</h3><ul><li><strong>Run</strong>: Który to rzut</li><li><strong>Avg Cash</strong>: Średnia ilość gotówki w danym rzucie</li><li><strong>Avg Profit from start:</strong>: Średni zysk od początku</li><li><strong>Avg win:</strong> Średnia wygrana i procent wygranych</li><li><strong>Avg loss:</strong> Średnia przegrana i procent przegranych</li><li><strong>Avg Single profit</strong>: Średni zysk w aktualnym rzucie</li><li><strong>Highest Bet</strong>: Najwyższa postawiona stawka i procent ile razy się trafiła</li><li><strong>Highest Losses Cnt</strong>: Najwyższa ilość, ile razy przegraliśmy pod rząd</li><li><strong>Bancrupt</strong>:  % udziału uruchomień które mają mniej pieniędzy niż wymagany zakład</li></ul><h3 id="labouchere"><a href="#labouchere" aria-hidden="true" class="header-anchor">#</a> Labouchere</h3><p>Wejścia:</p><ul><li><strong>START CASH</strong>: kwota początkowa</li><li><strong>NUMBER OF RUNS</strong>: liczba uruchomień</li><li><strong>SYSTEM NUMBERS</strong>: Liczby do systemu Labouchere</li></ul><p>Wyjście:</p><ul><li><span class="red" data-v-03878d0e>Win rolls:</span>: Ilość wygranych i udział w procentach</li><li><span class="red" data-v-9e33b382>Loss rolls:</span>: Ilość przegranych i udział w procentach</li><li><strong>Avg profit:</strong>: Średni zysk</li><li><strong>Rolls</strong>: Liczba rzutów po której została zakończona gra</li><li><strong>%</strong>: Procent i ilość udziału danej ilości rzutów</li><li><strong>Avg Profit</strong>: Średni zysk</li><li><strong>Avg Profit * % </strong>: Średni zysk pomnożony przez udział</li><li><strong>Highest Bet</strong>: Najwyższy zakład</li><li><strong>Highest list</strong>: Lista w przypadku przegranej dla najwyższego zakładu</li></ul><h3 id="gra-2"><a href="#gra-2" aria-hidden="true" class="header-anchor">#</a> Gra</h3><div id="game-vue"><!----><div data-v-af3c342e><div class="tabs" data-v-af3c342e><ul data-v-af3c342e></ul></div><div class="tabs-details" data-v-af3c342e><div id="auto" class="game-tab" style="display:none;" data-v-5bfe39f2><div class="game-tab" data-v-5bfe39f2><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Start Cash:</span><input type="text" value="100" data-v-5bfe39f2></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>START BET AMOUNT:</span><input type="text" value="1" data-v-5bfe39f2></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Number of runs:</span><input type="text" value="1000" data-v-5bfe39f2></div></div><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>GAME:</span><div class="select" data-v-5bfe39f2><select data-v-5bfe39f2><option value="[object Object]" data-v-5bfe39f2>multiply: 1.10x, win chance: 90.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 1.32x, win chance: 75.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 1.50x, win chance: 66.00%</option><option selected="selected" value="[object Object]" data-v-5bfe39f2>multiply: 1.98x, win chance: 50.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 2.00x, win chance: 49.50%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 3.00x, win chance: 33.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 4.00x, win chance: 24.75%</option></select></div></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Number of rolls:</span><input type="text" value="50" data-v-5bfe39f2></div></div></div><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>On loss:</span><div class="win-loss" data-v-5bfe39f2><span class="button" data-v-5bfe39f2>Reset to base</span><span class="button is-danger" data-v-5bfe39f2>Increase by %:</span><input type="text" value="100" data-v-5bfe39f2></div></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>On win:</span><div class="win-loss" data-v-5bfe39f2><span class="button is-success" data-v-5bfe39f2>Reset to base</span><span class="button" data-v-5bfe39f2>Increase by %:</span><input type="text" value="50" data-v-5bfe39f2></div></div></div><a class="button is-primary" data-v-5bfe39f2>RUN</a><table style="max-height:400px;" data-v-5bfe39f2><thead data-v-5bfe39f2><tr data-v-5bfe39f2><th style="width:1%;padding:0;" data-v-5bfe39f2>Run</th><th data-v-5bfe39f2>Avg Cash</th><th style="width:1%;" data-v-5bfe39f2>Avg Profit from start</th><th data-v-5bfe39f2>Avg win</th><th data-v-5bfe39f2>Avg loss</th><th style="width:1%;padding:0;" data-v-5bfe39f2>Avg Single Profit</th><th style="width:1%;padding:0;" data-v-5bfe39f2>Highest Bet</th><th style="width:1%;padding:0.5rem;" data-v-5bfe39f2>Highest Losses Cnt</th><th style="width:1%;padding:0.5rem;" data-v-5bfe39f2>Bancrupt %</th></tr></thead><tbody data-v-5bfe39f2><tr data-v-5bfe39f2><td colspan="1" style="text-align:right;" data-v-5bfe39f2>0</td><td colspan="8" data-v-5bfe39f2>100</td></tr></tbody></table><canvas id="auto_canvas" style="display:none;" data-v-5bfe39f2></canvas></div><div id="table" class="game-tab" style="display:none;" data-v-5bfe39f2><div class="game-tab" data-v-5bfe39f2><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Start Cash:</span><input type="text" value="100" data-v-5bfe39f2></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>START BET AMOUNT:</span><input type="text" value="1" data-v-5bfe39f2></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Number of runs:</span><input type="text" value="1000" data-v-5bfe39f2></div></div><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>GAME:</span><div class="select" data-v-5bfe39f2><select data-v-5bfe39f2><option value="[object Object]" data-v-5bfe39f2>multiply: 1.10x, win chance: 90.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 1.32x, win chance: 75.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 1.50x, win chance: 66.00%</option><option selected="selected" value="[object Object]" data-v-5bfe39f2>multiply: 1.98x, win chance: 50.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 2.00x, win chance: 49.50%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 3.00x, win chance: 33.00%</option><option value="[object Object]" data-v-5bfe39f2>multiply: 4.00x, win chance: 24.75%</option></select></div></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Number of rolls:</span><input type="text" value="50" data-v-5bfe39f2></div></div></div><div class="header-table" data-v-5bfe39f2><div class="table_line" data-v-5bfe39f2><div class="loss_line" style="visibility:visible;" data-v-5bfe39f2><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" style="margin-right:8rem;" data-v-5bfe39f2>On Loss #:</span></div></div><!----><div class="header" data-v-5bfe39f2><div class="number" data-v-5bfe39f2>
                1
              </div><span data-v-5bfe39f2><span class="red" data-v-9e33b382>LOSS: </span>1.00
              </span></div><div class="win-loss" data-v-5bfe39f2><span class="button is-danger" data-v-5bfe39f2>Reset to base</span><span class="button" data-v-5bfe39f2>Increase by %:</span><input type="text" value="0" data-v-5bfe39f2></div><!----></div><div class="win_line" style="visibility:visible;" data-v-5bfe39f2><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" style="margin-right:1rem;" data-v-5bfe39f2>On Win #:</span></div></div><!----><div class="header" data-v-5bfe39f2><div class="number" data-v-5bfe39f2>
                1
              </div><span data-v-5bfe39f2><span style="color:#00d1b2;" data-v-5bfe39f2>WIN: </span>0.98
              </span></div><div class="win-loss" data-v-5bfe39f2><span class="button is-success" data-v-5bfe39f2>Reset to base</span><span class="button" data-v-5bfe39f2>Increase by %:</span><input type="text" value="0" data-v-5bfe39f2></div><!----></div></div><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----><!----></div><a class="button is-primary" data-v-5bfe39f2>RUN</a><table style="max-height:400px;" data-v-5bfe39f2><thead data-v-5bfe39f2><tr data-v-5bfe39f2><th style="width:1%;padding:0;" data-v-5bfe39f2>Run</th><th data-v-5bfe39f2>Avg Cash</th><th style="width:1%;" data-v-5bfe39f2>Avg Profit from start</th><th data-v-5bfe39f2>Avg win</th><th data-v-5bfe39f2>Avg loss</th><th style="width:1%;padding:0;" data-v-5bfe39f2>Avg Single Profit</th><th style="width:1%;padding:0;" data-v-5bfe39f2>Highest Bet</th><th style="width:1%;padding:0.5rem;" data-v-5bfe39f2>Avg Highest Losses Cnt</th><th style="width:1%;padding:0.5rem;" data-v-5bfe39f2>Bancrupt %</th></tr></thead><tbody data-v-5bfe39f2><tr data-v-5bfe39f2><td colspan="1" style="text-align:right;" data-v-5bfe39f2>0</td><td colspan="8" data-v-5bfe39f2>100</td></tr></tbody></table><canvas id="table_canvas" style="display:none;" data-v-5bfe39f2></canvas></div><div class="game-tab" style="display:none;" data-v-5bfe39f2><div class="game-tab" data-v-5bfe39f2><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Start Cash:</span><input type="text" value="100" data-v-5bfe39f2></div><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>Number of runs:</span><input type="text" value="1000" data-v-5bfe39f2></div></div></div><div class="header" data-v-5bfe39f2><div class="info" data-v-5bfe39f2><span class="title" data-v-5bfe39f2>System numbers:</span></div></div><input type="text" value="1,2,3,4,5" style="width:100%;" data-v-5bfe39f2><a class="button is-primary" style="margin-top:1rem;" data-v-5bfe39f2>RUN</a><table style="max-height:400px;" data-v-5bfe39f2><thead data-v-5bfe39f2><tr data-v-5bfe39f2><th style="padding:0;" data-v-5bfe39f2>Rolls</th><th data-v-5bfe39f2>%</th><th data-v-5bfe39f2>Avg Profit</th><th data-v-5bfe39f2>Avg Profit * %</th><th data-v-5bfe39f2>Highest Bet</th><th data-v-5bfe39f2>Highest list</th></tr></thead><tbody data-v-5bfe39f2><tr data-v-5bfe39f2><td colspan="1" style="text-align:right;" data-v-5bfe39f2><strong style="color:#00d1b2;" data-v-5bfe39f2>Win rolls: </strong></td><td colspan="8" data-v-5bfe39f2>0 (NaN %)</td></tr><tr data-v-5bfe39f2><td colspan="1" style="text-align:right;" data-v-5bfe39f2><span class="red" data-v-9e33b382><strong data-v-9e33b382>Loss rolls: </strong></span></td><td colspan="8" data-v-5bfe39f2>0 (NaN %)</td></tr><tr data-v-5bfe39f2><td colspan="3" style="text-align:right;" data-v-5bfe39f2><strong data-v-5bfe39f2>Avg profit: </strong></td><td colspan="8" data-v-5bfe39f2>0.00</td></tr></tbody></table><canvas id="lab_canvas" style="display:none;" data-v-5bfe39f2></canvas></div></div></div></div><h2 id="artykul"><a href="#artykul" aria-hidden="true" class="header-anchor">#</a> Artykuł</h2><h3 id="definicja"><a href="#definicja" aria-hidden="true" class="header-anchor">#</a> Definicja</h3><p>Zacznijmy od definicji Gry. Najpierw należy stworzyć funkcję która nam zwróci kwotą którą wygraliśmy na plus (jeśli wygramy) lub na minus jeśli przegramy.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> random <span class="token keyword">as</span> r

games <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">&quot;1.10&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">1.10</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.90</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token string">&quot;1.32&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">1.32</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.75</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token string">&quot;1.50&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">1.50</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.66</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token string">&quot;1.98&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">1.98</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.50</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">2.00</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.495</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token string">&quot;3.00&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">3.00</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.33</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token string">&quot;4.00&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'count'</span><span class="token punctuation">:</span> <span class="token number">4.00</span><span class="token punctuation">,</span> <span class="token string">'chance'</span><span class="token punctuation">:</span> <span class="token number">0.2475</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>        
        <span class="token punctuation">}</span>


<span class="token keyword">def</span> <span class="token function">play</span><span class="token punctuation">(</span>bet<span class="token punctuation">,</span>game_count<span class="token punctuation">)</span><span class="token punctuation">:</span>
    result <span class="token operator">=</span> r<span class="token punctuation">.</span>random<span class="token punctuation">(</span><span class="token punctuation">)</span>
    game <span class="token operator">=</span> games<span class="token punctuation">[</span>game_count<span class="token punctuation">]</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&lt;=</span> game<span class="token punctuation">[</span><span class="token string">'chance'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> bet <span class="token operator">*</span> game<span class="token punctuation">[</span><span class="token string">'count'</span><span class="token punctuation">]</span> <span class="token operator">-</span> bet
    <span class="token keyword">return</span> <span class="token operator">-</span>bet

</code></pre></div><p>I dla przykładu:</p><div class="language-R extra-class"><pre class="language-r"><code>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.50&quot;</span><span class="token punctuation">)</span>
play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.50&quot;</span><span class="token punctuation">)</span>
play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.50&quot;</span><span class="token punctuation">)</span>

<span class="token operator">-</span><span class="token number">1</span>
<span class="token number">0.5</span>
<span class="token operator">-</span><span class="token number">1</span>

<span class="token punctuation">[</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.50&quot;</span><span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> range<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">]</span>
</code></pre></div><p>Problemem z takimi funkcjami jest to że nie są deterministyczne 😦 To znaczy nie możemy ich testować tak jak są ponieważ za każdym razem mogą zwrócić inny wynik. Więc w przypadku testów dla takiej funkcji warto przed każdym uruchomieniem ustawić ziarno dla funkcji random.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># -1 or 0.1 random</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;4.00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 3.0 or -1 random</span>


r<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#always 0.1000</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;4.00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#always 3.0</span>
    

r<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;1.10&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#always 0.1000</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>play<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;4.00&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#always 3.0</span>

</code></pre></div><p>Na początek zaaplikujemy algorytm automatyczny znany z wielu gier kasowych. Polega on na zwiększeniu bądż zmniejszeniu zakładu gdy przegramy albo wygramy. Wartość -1 oznacza że wracamy do puli początkowej.</p><ul><li><strong>start_bet</strong> - początkwy zakład</li><li><strong>bet</strong> - aktualny zakład</li><li><strong>result</strong> - ile wygraliśmy, wartość na minusie oznacza że przegraliśmy</li><li><strong>on_loss</strong> - O ile podnieść wartość po przegranej . Wartość -1 oznacza powrót do wartości początkowy</li><li><strong>on_win</strong> - O ile podnieść wartość po wygranej. Wartość -1 oznacza powrót do wartości początkowy</li></ul><p>Cały algorytm wygląda następująco</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># on_loss/on_win = -1 return to base</span>
<span class="token keyword">def</span> <span class="token function">auto_method</span><span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span> bet<span class="token punctuation">,</span> result<span class="token punctuation">,</span> on_loss<span class="token punctuation">,</span> on_win<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>result <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> start_bet <span class="token keyword">if</span> on_win <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> bet<span class="token operator">+</span>bet<span class="token operator">*</span>on_win
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> start_bet <span class="token keyword">if</span> on_loss <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> bet<span class="token operator">+</span>bet<span class="token operator">*</span>on_loss
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>print<span class="token punctuation">(</span>auto_method<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 1</span>
print<span class="token punctuation">(</span>auto_method<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">,</span>  <span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 20</span>

print<span class="token punctuation">(</span>auto_method<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span>
print<span class="token punctuation">(</span>auto_method<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span><span class="token number">0.5</span><span class="token punctuation">,</span>  <span class="token number">1</span><span class="token punctuation">,</span>  <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 30</span>
</code></pre></div><p>Warto teraz zrobić sobie automat który zasymuluje grę za każdym razem grając i wyrzucając wynik tak żeby póżniej można było sporządzić wyniki.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np

<span class="token comment"># on_loss/on_win = -1 return to base</span>
<span class="token keyword">def</span> <span class="token function">auto_run</span><span class="token punctuation">(</span>start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> rolls <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>
             on_loss <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> on_win <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> simulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#results = pd.DataFrame(columns=['roll','cash_before','bet','bancrupt', 'result','cash'],dtype=float)</span>
    bet <span class="token operator">=</span> start_bet
    
    result_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>rolls<span class="token punctuation">)</span><span class="token punctuation">:</span>
          cash_before <span class="token operator">=</span> cash
          <span class="token keyword">if</span><span class="token punctuation">(</span>cash_before <span class="token operator">&lt;</span> bet<span class="token punctuation">)</span><span class="token punctuation">:</span>
              result_list<span class="token punctuation">.</span>extend<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span>i<span class="token operator">+</span>ii<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> cash<span class="token punctuation">,</span> simulation<span class="token punctuation">]</span> <span class="token keyword">for</span> ii <span class="token keyword">in</span> <span class="token builtin">range</span> <span class="token punctuation">(</span>rolls<span class="token operator">-</span>i<span class="token punctuation">)</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
              <span class="token keyword">break</span>
    
          result <span class="token operator">=</span> play<span class="token punctuation">(</span>bet<span class="token punctuation">,</span> game_count<span class="token punctuation">)</span>
          cash <span class="token operator">+=</span> result

          result_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span> i<span class="token punctuation">,</span>cash_before<span class="token punctuation">,</span> bet<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> result<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> simulation <span class="token punctuation">]</span><span class="token punctuation">)</span>
          bet <span class="token operator">=</span> auto_method<span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span>bet<span class="token punctuation">,</span>result<span class="token punctuation">,</span>on_loss<span class="token punctuation">,</span>on_win<span class="token punctuation">)</span>
    <span class="token keyword">return</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>result_list<span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'roll'</span><span class="token punctuation">,</span><span class="token string">'cash_before'</span><span class="token punctuation">,</span><span class="token string">'bet'</span><span class="token punctuation">,</span><span class="token string">'bancrupt'</span><span class="token punctuation">,</span> <span class="token string">'result'</span><span class="token punctuation">,</span><span class="token string">'cash'</span><span class="token punctuation">,</span> <span class="token string">'simulation'</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>dtype<span class="token operator">=</span><span class="token builtin">float</span><span class="token punctuation">)</span>
</code></pre></div><p>Pojedyńcze uruchomienie zwraca pojedyńcze wydarzenie, i jak można się domyśleć czasami wygrywamy i czasami przegrywamy.  Popatrzmy na przykład na zwykłe podwajanie stawki <code>on_loss = 1</code> przy graniu na typowym zakładzie <code>game_count = &quot;2.0&quot;</code>, czyli zwraca nam dwukrotność, ale szansa wygrania wynosi <code>0.495</code>.</p><div class="language-python extra-class"><pre class="language-python"><code>auto_run<span class="token punctuation">(</span>game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span>cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> rolls <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>   roll  cash_before   bet  bancrupt  result   cash  simulation
<span class="token number">0</span>   <span class="token number">0.0</span>        <span class="token number">100.0</span>   <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">101.0</span>         <span class="token number">0.0</span>
<span class="token number">1</span>   <span class="token number">1.0</span>        <span class="token number">101.0</span>   <span class="token number">1.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">1.0</span>  <span class="token number">100.0</span>         <span class="token number">0.0</span>
<span class="token number">2</span>   <span class="token number">2.0</span>        <span class="token number">100.0</span>   <span class="token number">2.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">2.0</span>   <span class="token number">98.0</span>         <span class="token number">0.0</span>
<span class="token number">3</span>   <span class="token number">3.0</span>         <span class="token number">98.0</span>   <span class="token number">4.0</span>       <span class="token number">0.0</span>     <span class="token number">4.0</span>  <span class="token number">102.0</span>         <span class="token number">0.0</span>
<span class="token number">4</span>   <span class="token number">4.0</span>        <span class="token number">102.0</span>   <span class="token number">1.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">1.0</span>  <span class="token number">101.0</span>         <span class="token number">0.0</span>
<span class="token number">5</span>   <span class="token number">5.0</span>        <span class="token number">101.0</span>   <span class="token number">2.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">2.0</span>   <span class="token number">99.0</span>         <span class="token number">0.0</span>
<span class="token number">6</span>   <span class="token number">6.0</span>         <span class="token number">99.0</span>   <span class="token number">4.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">4.0</span>   <span class="token number">95.0</span>         <span class="token number">0.0</span>
<span class="token number">7</span>   <span class="token number">7.0</span>         <span class="token number">95.0</span>   <span class="token number">8.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">8.0</span>   <span class="token number">87.0</span>         <span class="token number">0.0</span>
<span class="token number">8</span>   <span class="token number">8.0</span>         <span class="token number">87.0</span>  <span class="token number">16.0</span>       <span class="token number">0.0</span>   <span class="token operator">-</span><span class="token number">16.0</span>   <span class="token number">71.0</span>         <span class="token number">0.0</span>
<span class="token number">9</span>   <span class="token number">9.0</span>         <span class="token number">71.0</span>  <span class="token number">32.0</span>       <span class="token number">0.0</span>   <span class="token operator">-</span><span class="token number">32.0</span>   <span class="token number">39.0</span>         <span class="token number">0.0</span>
</code></pre></div><p>Mieliśmy akurat pecha 😄, od 4 rzutu cały czas przegrywaliśmy i ostatecznie skończyliśmy z kwotą <code>39.0</code> ze <code>100</code> na początku. Gdybyśmy dalej stosowali tą strategie następnie musielibyśmy postawić kwotę <code>64.0</code>, ale takiej kwoty już nie posiadamy.</p><p>Innym razem:</p><div class="language-python extra-class"><pre class="language-python"><code>auto_run<span class="token punctuation">(</span>game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span>cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> rolls <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-r extra-class"><pre class="language-r"><code>   roll  cash_before  bet  bancrupt  result   cash  simulation
<span class="token number">0</span>   <span class="token number">0.0</span>        <span class="token number">100.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">101.0</span>         <span class="token number">0.0</span>
<span class="token number">1</span>   <span class="token number">1.0</span>        <span class="token number">101.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">102.0</span>         <span class="token number">0.0</span>
<span class="token number">2</span>   <span class="token number">2.0</span>        <span class="token number">102.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">103.0</span>         <span class="token number">0.0</span>
<span class="token number">3</span>   <span class="token number">3.0</span>        <span class="token number">103.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">104.0</span>         <span class="token number">0.0</span>
<span class="token number">4</span>   <span class="token number">4.0</span>        <span class="token number">104.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">105.0</span>         <span class="token number">0.0</span>
<span class="token number">5</span>   <span class="token number">5.0</span>        <span class="token number">105.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">1.0</span>  <span class="token number">104.0</span>         <span class="token number">0.0</span>
<span class="token number">6</span>   <span class="token number">6.0</span>        <span class="token number">104.0</span>  <span class="token number">2.0</span>       <span class="token number">0.0</span>     <span class="token number">2.0</span>  <span class="token number">106.0</span>         <span class="token number">0.0</span>
<span class="token number">7</span>   <span class="token number">7.0</span>        <span class="token number">106.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>     <span class="token number">1.0</span>  <span class="token number">107.0</span>         <span class="token number">0.0</span>
<span class="token number">8</span>   <span class="token number">8.0</span>        <span class="token number">107.0</span>  <span class="token number">1.0</span>       <span class="token number">0.0</span>    <span class="token operator">-</span><span class="token number">1.0</span>  <span class="token number">106.0</span>         <span class="token number">0.0</span>
<span class="token number">9</span>   <span class="token number">9.0</span>        <span class="token number">106.0</span>  <span class="token number">2.0</span>       <span class="token number">0.0</span>     <span class="token number">2.0</span>  <span class="token number">108.0</span>         <span class="token number">0.0</span>
</code></pre></div><p>Tym razem wyśliszmy na plusie o <code>8.0</code> po 10 zakładach. Na takim pojedyńczym sprawdzeniu nie można oprzeć symulacji, ale można się poprzeć <strong>Prawem Wielkich Liczb</strong>.</p><blockquote><p>„Z prawdopodobieństwem dowolnie bliskim 1 można się spodziewać, iż przy dostatecznie wielkiej liczbie prób danego zdarzenia lsowego będzie się dowolnie mało różniła od jego prawdopodobieństwa.”[<a href="https://pl.wikipedia.org/wiki/Prawo_wielkich_liczb#cite_note-1" target="_blank" rel="noopener noreferrer">1]<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Zwiększając liczbę doświadczeń opartych na zdarzeniach losowych, możemy oczekiwać rozkładu wyników coraz lepiej odpowiadającego rozkładowi prawdopodobieństw zdarzeń (na przykład, przeprowadzając wielką liczbę rzutów symetryczną monetą, możemy oczekiwać że stosunek liczby „wyrzuconych” orłów do liczby wszystkich rzutów będzie bliski 0,5 (wartości prawdopodobieństwa); tym większe są na to szanse im większa jest liczba rzutów)</p></blockquote><p>Zamiast opierać się na pojedyńczym zdarzeniu zwiększymy liczbę doświadczeń dzięki czemu będziemy mogli zobaczyć jak dana strategia ma się do rzeczywistości.</p><h3 id="automat"><a href="#automat" aria-hidden="true" class="header-anchor">#</a> Automat</h3><p>Automat wykonuje symulacje na zadaną liczbę uruchomień (runs) i zwraca uśrednione wartości dla każdego rzutu począwszy od <code>0</code> do <code>rolls</code>.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">auto_simulation</span><span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
                    start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> 
                    game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> rolls <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span>
                    on_loss <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> on_win <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;
    Simulate whole auto_run n-times (runs)
    
    Returns: Cash plot and statistics for each roll.
    
    &quot;&quot;&quot;</span>
    df <span class="token operator">=</span> pd<span class="token punctuation">.</span>concat<span class="token punctuation">(</span><span class="token punctuation">[</span>
            auto_run<span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span>cash<span class="token punctuation">,</span>game_count<span class="token punctuation">,</span>rolls<span class="token punctuation">,</span>on_loss<span class="token punctuation">,</span>on_win<span class="token punctuation">,</span>simulation <span class="token operator">=</span> i<span class="token punctuation">)</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>runs<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>ignore_index <span class="token operator">=</span> <span class="token boolean">True</span><span class="token punctuation">)</span>
    df <span class="token operator">=</span> df<span class="token punctuation">.</span>assign<span class="token punctuation">(</span>profit <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>cash <span class="token operator">-</span> x<span class="token punctuation">.</span>cash_before <span class="token punctuation">)</span>
    df <span class="token operator">=</span> df<span class="token punctuation">.</span>assign<span class="token punctuation">(</span>profitr <span class="token operator">=</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> x<span class="token punctuation">.</span>cash <span class="token operator">-</span> cash<span class="token punctuation">)</span>

    <span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
    statistics <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'roll'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span>
             <span class="token punctuation">{</span>
              <span class="token string">'bet'</span><span class="token punctuation">:</span>  <span class="token punctuation">{</span> <span class="token string">'max'</span><span class="token punctuation">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span> 
                        <span class="token string">'cnt'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span>  <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">==</span>np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token string">'bancrupt'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> np<span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token operator">/</span>runs<span class="token operator">*</span><span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token string">'profit'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>           
              <span class="token string">'profitr'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> 
              <span class="token string">'cash'</span><span class="token punctuation">:</span>  <span class="token punctuation">{</span> <span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span>
                        <span class="token string">'win.%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">&gt;</span>cash<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span>runs<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span>
                        <span class="token string">'win'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">&gt;</span>cash<span class="token punctuation">]</span><span class="token operator">-</span>cash<span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token string">'loss.%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">&lt;</span>cash<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">/</span>runs<span class="token operator">*</span><span class="token number">100</span><span class="token punctuation">,</span>
                        <span class="token string">'loss'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">&lt;</span>cash<span class="token punctuation">]</span><span class="token operator">-</span>cash<span class="token punctuation">)</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                        <span class="token punctuation">}</span><span class="token punctuation">,</span> 

              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">round</span><span class="token punctuation">(</span>decimals<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset_index<span class="token punctuation">(</span><span class="token punctuation">)</span>
    statistics<span class="token punctuation">.</span>columns <span class="token operator">=</span> statistics<span class="token punctuation">.</span>columns<span class="token punctuation">.</span><span class="token builtin">map</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">.</span>join<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">str</span><span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span>
    statistics<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'bet.maxr'</span><span class="token punctuation">,</span>statistics<span class="token punctuation">[</span><span class="token string">'bet.max'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cummax<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    statistics<span class="token punctuation">.</span>insert<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'bet.cntr'</span><span class="token punctuation">,</span> np<span class="token punctuation">.</span>nan<span class="token punctuation">)</span>

    <span class="token comment">#calculate running sum for statistics</span>
    <span class="token keyword">for</span> s <span class="token keyword">in</span> statistics<span class="token punctuation">.</span>index<span class="token punctuation">:</span>
        statistics<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>s<span class="token punctuation">,</span><span class="token string">'bet.cntr'</span><span class="token punctuation">]</span> <span class="token operator">=</span> statistics<span class="token punctuation">[</span> 
                <span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token string">'bet.max'</span><span class="token punctuation">]</span> <span class="token operator">==</span> statistics<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>s<span class="token punctuation">,</span><span class="token string">'bet.maxr'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> 
                <span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token string">'roll'</span><span class="token punctuation">]</span><span class="token operator">&lt;=</span>statistics<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>s<span class="token punctuation">,</span><span class="token string">'roll'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">'bet.cnt'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
        
    statistics<span class="token punctuation">[</span><span class="token string">'bet.cnt'</span><span class="token punctuation">]</span> <span class="token operator">=</span> statistics<span class="token punctuation">[</span><span class="token string">'bet.cnt'</span><span class="token punctuation">]</span><span class="token operator">/</span>runs<span class="token operator">*</span><span class="token number">100</span>
    statistics<span class="token punctuation">[</span><span class="token string">'bet.cntr'</span><span class="token punctuation">]</span> <span class="token operator">=</span> statistics<span class="token punctuation">[</span><span class="token string">'bet.cntr'</span><span class="token punctuation">]</span><span class="token operator">/</span>runs<span class="token operator">*</span><span class="token number">100</span>

    statistics <span class="token operator">=</span> statistics<span class="token punctuation">.</span>rename<span class="token punctuation">(</span>index<span class="token operator">=</span><span class="token builtin">str</span><span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token string">'bet.cnt'</span><span class="token punctuation">:</span> <span class="token string">'bet.%'</span><span class="token punctuation">,</span> <span class="token string">'bet.cntr'</span><span class="token punctuation">:</span> <span class="token string">'betr.%'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

    plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&quot;cash&quot;</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'cash'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> statistics
</code></pre></div><p>Uruchomienie jej dla <code>10, 100, 1000</code> nie zwraca nam tendencji w wyniku, ale już przy <code>10,000</code> można pokusić się o tendencje i powtarzalność która jest niestety opadająca 😞 . Poniżej symulacja którą przeprowadziłęm dla <code>100000</code> uruchomień.</p><div class="language-python extra-class"><pre class="language-python"><code>auto_simulation<span class="token punctuation">(</span>runs<span class="token operator">=</span><span class="token number">100000</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span>cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>  rolls <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/1533987621724.a21aa23e.png" alt="1533987621724"></p><div class="language-R extra-class"><pre class="language-r"><code>roll  betr            bet           bancrupt profit profitr          cash          cash
	  maxr     %       max       %      %                     cash   win%   win    loss%     loss    
<span class="token number">0.0</span>    <span class="token number">1.0</span>  <span class="token number">100.000</span>    <span class="token number">1.0</span>  <span class="token number">100.000</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.01</span>    <span class="token operator">-</span><span class="token number">0.01</span>   <span class="token number">99.99</span>  <span class="token number">49.57</span>  <span class="token number">1.00</span>   <span class="token number">50.43</span>    <span class="token operator">-</span><span class="token number">1.00</span> 
<span class="token number">1.0</span>    <span class="token number">2.0</span>   <span class="token number">50.434</span>    <span class="token number">2.0</span>   <span class="token number">50.434</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.01</span>    <span class="token operator">-</span><span class="token number">0.02</span>   <span class="token number">99.98</span>  <span class="token number">49.60</span>  <span class="token number">1.50</span>   <span class="token number">25.44</span>    <span class="token operator">-</span><span class="token number">3.00</span> 
<span class="token number">2.0</span>    <span class="token number">4.0</span>   <span class="token number">25.445</span>    <span class="token number">4.0</span>   <span class="token number">25.445</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.02</span>    <span class="token operator">-</span><span class="token number">0.04</span>   <span class="token number">99.96</span>  <span class="token number">62.03</span>  <span class="token number">1.79</span>   <span class="token number">25.37</span>    <span class="token operator">-</span><span class="token number">4.53</span> 
<span class="token number">3.0</span>    <span class="token number">8.0</span>   <span class="token number">12.826</span>    <span class="token number">8.0</span>   <span class="token number">12.826</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.02</span>    <span class="token operator">-</span><span class="token number">0.06</span>   <span class="token number">99.91</span>  <span class="token number">71.30</span>  <span class="token number">2.59</span>   <span class="token number">22.39</span>    <span class="token operator">-</span><span class="token number">8.64</span>
<span class="token number">4.0</span>   <span class="token number">16.0</span>    <span class="token number">6.530</span>   <span class="token number">16.0</span>    <span class="token number">6.530</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.03</span>    <span class="token operator">-</span><span class="token number">0.09</span>   <span class="token number">99.91</span>  <span class="token number">71.30</span>  <span class="token number">2.59</span>   <span class="token number">22.39</span>    <span class="token operator">-</span><span class="token number">8.64</span>  
<span class="token number">5.0</span>   <span class="token number">32.0</span>    <span class="token number">3.247</span>   <span class="token number">32.0</span>    <span class="token number">3.247</span>  <span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.04</span>    <span class="token operator">-</span><span class="token number">0.13</span>   <span class="token number">99.87</span>  <span class="token number">74.28</span>  <span class="token number">3.00</span>   <span class="token number">19.25</span>   <span class="token operator">-</span><span class="token number">12.26</span>
<span class="token ellipsis">...</span>
<span class="token number">41.0</span>  <span class="token number">64.0</span>    <span class="token number">0.001</span>   <span class="token number">32.0</span>    <span class="token number">1.278</span>  <span class="token number">27.22</span>   <span class="token operator">-</span><span class="token number">0.03</span>    <span class="token operator">-</span><span class="token number">0.97</span>   <span class="token number">99.03</span>  <span class="token number">70.79</span>  <span class="token number">20.10</span>  <span class="token number">29.14</span>   <span class="token operator">-</span><span class="token number">52.14</span>  
<span class="token number">42.0</span>  <span class="token number">64.0</span>    <span class="token number">0.003</span>   <span class="token number">64.0</span>    <span class="token number">0.002</span>  <span class="token number">27.85</span>   <span class="token operator">-</span><span class="token number">0.00</span>    <span class="token operator">-</span><span class="token number">0.97</span>   <span class="token number">99.03</span>  <span class="token number">70.27</span>  <span class="token number">20.60</span>  <span class="token number">29.68</span>   <span class="token operator">-</span><span class="token number">52.02</span> 
<span class="token number">43.0</span>  <span class="token number">64.0</span>    <span class="token number">0.003</span>   <span class="token number">32.0</span>    <span class="token number">1.211</span>  <span class="token number">28.44</span>   <span class="token operator">-</span><span class="token number">0.03</span>    <span class="token operator">-</span><span class="token number">1.00</span>   <span class="token number">99.00</span>  <span class="token number">69.66</span>  <span class="token number">21.11</span>  <span class="token number">30.31</span>   <span class="token operator">-</span><span class="token number">51.81</span>
<span class="token number">44.0</span>  <span class="token number">64.0</span>    <span class="token number">0.009</span>   <span class="token number">64.0</span>    <span class="token number">0.006</span>  <span class="token number">29.06</span>   <span class="token operator">-</span><span class="token number">0.05</span>    <span class="token operator">-</span><span class="token number">1.05</span>   <span class="token number">98.95</span>  <span class="token number">69.02</span>  <span class="token number">21.62</span>  <span class="token number">30.96</span>   <span class="token operator">-</span><span class="token number">51.60</span>
<span class="token number">45.0</span>  <span class="token number">64.0</span>    <span class="token number">0.018</span>   <span class="token number">64.0</span>    <span class="token number">0.009</span>  <span class="token number">29.71</span>   <span class="token operator">-</span><span class="token number">0.04</span>    <span class="token operator">-</span><span class="token number">1.09</span>   <span class="token number">98.91</span>  <span class="token number">68.42</span>  <span class="token number">22.14</span>  <span class="token number">31.57</span>   <span class="token operator">-</span><span class="token number">51.43</span>
<span class="token number">46.0</span>  <span class="token number">64.0</span>    <span class="token number">0.040</span>   <span class="token number">64.0</span>    <span class="token number">0.022</span>  <span class="token number">30.33</span>   <span class="token operator">-</span><span class="token number">0.01</span>    <span class="token operator">-</span><span class="token number">1.09</span>   <span class="token number">98.91</span>  <span class="token number">67.88</span>  <span class="token number">22.67</span>  <span class="token number">32.11</span>   <span class="token operator">-</span><span class="token number">51.32</span> 
<span class="token number">47.0</span>  <span class="token number">64.0</span>    <span class="token number">0.066</span>   <span class="token number">64.0</span>    <span class="token number">0.026</span>  <span class="token number">30.93</span>   <span class="token operator">-</span><span class="token number">0.02</span>    <span class="token operator">-</span><span class="token number">1.11</span>   <span class="token number">98.89</span>  <span class="token number">67.31</span>  <span class="token number">23.19</span>  <span class="token number">32.68</span>   <span class="token operator">-</span><span class="token number">51.16</span>
<span class="token number">48.0</span>  <span class="token number">64.0</span>    <span class="token number">0.107</span>   <span class="token number">64.0</span>    <span class="token number">0.041</span>  <span class="token number">31.49</span>   <span class="token operator">-</span><span class="token number">0.02</span>    <span class="token operator">-</span><span class="token number">1.13</span>   <span class="token number">98.87</span>  <span class="token number">66.79</span>  <span class="token number">23.68</span>  <span class="token number">33.20</span>   <span class="token operator">-</span><span class="token number">51.03</span>
<span class="token number">49.0</span>  <span class="token number">64.0</span>    <span class="token number">0.165</span>   <span class="token number">64.0</span>    <span class="token number">0.058</span>  <span class="token number">32.01</span>   <span class="token operator">-</span><span class="token number">0.03</span>    <span class="token operator">-</span><span class="token number">1.15</span>   <span class="token number">98.85</span>  <span class="token number">66.21</span>  <span class="token number">24.20</span>  <span class="token number">33.77</span>   <span class="token operator">-</span><span class="token number">50.86</span>
</code></pre></div><p>Kolumny:</p><ul><li><strong>roll</strong>: Numer losowania od początku</li><li><strong>betr</strong>: Maksymalna stawka od początku (<code>maxr</code>), i jak często się pojawiła (<code>%</code>)</li><li><strong>bet</strong> Maksymalna stawka na dane losowanie (<code>max</code>), i jak często się pojawiła w danym losowaniu(<code>%</code>)</li><li><strong>bancrupt</strong>: Procent losowań w których stawka jest wyższa niższa posiadana kwota</li><li><strong>profit</strong>: Średni wynik losowania.</li><li><strong>profitr</strong>: Średnia nadwyżka od początkowej kwoty (<code>start_cash</code>)</li><li><strong>cash&gt;</strong>:  Kwota posiadana na dane losowanie</li><li><strong>win</strong>: Średnia nadwyższka od kwot które są powyżej początkowej puli i ich udział. (  <code>%</code>)</li><li><strong>loss</strong>: Średnia strata od kwot które są poniżej początkowej puli i ich udział. (<code>%</code>)</li></ul><p>Wywnioskować można jedno, że zwykłe podwajanie kwoty nie pomaga i na każdą wygraną zdarzają się przegrane które umniejszają wynik. Dodatkowo średnio po 50 losowaniach <code>32%</code> wszystkich uruchomień zostają z pieniędzmy mniejszymi niż wymagany zakład a więc z niemożliwością grania danej.</p><p>Jest to oczywiście bardzo prosty algorytm który w założeniach wydaje się że powinien przynosic zysk. Przecież za każdym razem podwajamy kwotę. Może mamy za małą kwotę początkową. I tutaj niestety też wszystkich zmartwie. Symulacja przy kwocie początkowej: <code>cash = 100000</code> wygląda następująco:</p><div class="language-R extra-class"><pre class="language-r"><code>max_bet<span class="token operator">:</span> <span class="token number">32768.0</span>  <span class="token punctuation">(</span><span class="token number">0.062</span>%<span class="token punctuation">)</span>
profitr<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">5.96</span>
bancrupt<span class="token operator">:</span> <span class="token number">0.03</span>%
cash<span class="token operator">:</span> <span class="token number">99994.04</span>
cash win<span class="token operator">:</span> <span class="token number">23.25</span>    <span class="token punctuation">(</span><span class="token number">96.62</span>%<span class="token punctuation">)</span>
cash loss<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">850.61</span>  <span class="token punctuation">(</span><span class="token number">3.34</span>%<span class="token punctuation">)</span>
</code></pre></div><p><img src="/assets/img/1533989147509.85cd1d15.png" alt="1533989147509"></p><p>Tak więc przy kwocie przykładowo: <code>100,000$</code>, i stawianiu na początku <code>1$</code> średnio tracimy <code>5.96$</code> po <code>50</code> rzutach. Wprawdzie liczba bankrutów się zmniejszyła, ale i tak istnieją zakłady które przekraczają podaną kwotę. Wynik to z prawdopodbieństwa. Jeśli przegranie 15 razy pod rząd przy prawdopobieństwie <code>0.5</code> (tutaj jest jeszcze większe bo wygrana w wariancie <code>2.0</code> wynosi <code>0.475</code>) wynosi <code>2^15 = 32768</code> to na te 32768 przypadków taka systuacja powinna się pojawić co najmniej raz. Przegrana w takim wypadku przeważają nad możliwą wygraną i dlatego kasyna wygrywają.  W przypadku innych wariantów czy zwiększaniu liczby kwot wykresy wyglądają niestety bardzo podobnie. Z tak prostej strategii prędzej czy póżniej przegramy.</p><p>Możemy wymyśleć inną strategię np: gramy podwająjąc kwotę dopóki nie uzbieramy określonej kwoty np: <code>10$</code>.</p><h3 id="strategia-dla-zysku"><a href="#strategia-dla-zysku" aria-hidden="true" class="header-anchor">#</a> Strategia dla zysku</h3><p>W tym wypadku możemy zamiast ustawić stałą liczbę gry, ustawiamy <code>profit=10</code> czyli zysk jaki chcemy uzyskać. Jedyne co zwracamy to w którym kroku przerwaliśmy grę, jaka była maksymalna stawka, i czy zbankrutowaliśmy. W przypadku wygrania powinniśmy mieć <code>cash=cash + profit</code>, ale w przypadku przegranej będzie to kwota która nam pozostała.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">cont_run</span><span class="token punctuation">(</span>start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> on_win <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> simulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    bet <span class="token operator">=</span> start_bet    
    max_bet <span class="token operator">=</span> start_bet
    end_cash <span class="token operator">=</span> cash <span class="token operator">+</span> profit

    roll <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        roll <span class="token operator">+=</span> <span class="token number">1</span>
        cash_before <span class="token operator">=</span> cash
        <span class="token keyword">if</span><span class="token punctuation">(</span>cash_before <span class="token operator">&lt;</span> bet<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># roll, cash, max_bet, bancrupt</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span>
        result <span class="token operator">=</span> play<span class="token punctuation">(</span>bet<span class="token punctuation">,</span> game_count<span class="token punctuation">)</span>
        cash <span class="token operator">+=</span> result
       
        <span class="token keyword">if</span><span class="token punctuation">(</span>cash<span class="token operator">&gt;=</span>end_cash<span class="token punctuation">)</span><span class="token punctuation">:</span>
           <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span>
        
        bet <span class="token operator">=</span> auto_method<span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span>bet<span class="token punctuation">,</span>result<span class="token punctuation">,</span>on_loss<span class="token punctuation">,</span>on_win<span class="token punctuation">)</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>bet<span class="token operator">&gt;</span>max_bet<span class="token punctuation">)</span><span class="token punctuation">:</span>
            max_bet <span class="token operator">=</span> bet

<span class="token keyword">def</span> <span class="token function">cont_simulation</span><span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
                    start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> 
                    game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
                    on_loss <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> on_win <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span>
            cont_run<span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span>cash<span class="token punctuation">,</span>game_count<span class="token punctuation">,</span>profit<span class="token punctuation">,</span>on_loss<span class="token punctuation">,</span>on_win<span class="token punctuation">,</span>simulation <span class="token operator">=</span> i<span class="token punctuation">)</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>runs<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;max_bet&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bancrupt&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  dtype <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">)</span>
     <span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
     
     statistics <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{</span>
             <span class="token string">'max_bet'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                   
                     <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span>
                     <span class="token string">'max'</span><span class="token punctuation">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span>
                     <span class="token string">'%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">==</span>np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>runs <span class="token operator">*</span> <span class="token number">100</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'cash'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span> <span class="token string">'cnt'</span><span class="token punctuation">:</span> <span class="token string">'count'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'bancrupt'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Mean profit:'</span><span class="token punctuation">,</span> statistics<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cash<span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;% number of wins: {((1-statistics[('bancrupt','')].mean()) * 100):.2f}%&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&quot;cash&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;roll&quot;</span><span class="token punctuation">)</span>
     <span class="token keyword">return</span> statistics
</code></pre></div><p>Co pokazały symulacje. Że w przypadku <code>100$</code> i chęci zyskania <code>10$</code> średni zysk wacha się od <code>-8$</code> do <code>-10$</code></p><div class="language-python extra-class"><pre class="language-python"><code>cont_simulation<span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">10000000</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span>cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>Mean profit<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10.163005419483099</span>
<span class="token string">'%'</span> number of wins<span class="token operator">:</span> <span class="token number">70.23</span>%
</code></pre></div><p><img src="/assets/img/1533992356877.0772ceb5.png" alt="1533992356877"></p><p>Co ciekawe im mniejsza ilość rzutów tym większa przegrana ale wynika to z początkowych licznych przegranych które zwiększyły stawka do wartości powyżej początkowej kwoty. Zwiększanie początkowej kwoty niewiele daje i powoduje że nawet mając milion dolarów to średnio i tak tracimy.</p><div class="language-R extra-class"><pre class="language-r"><code>cont_simulation<span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">10000000</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span>cash <span class="token operator">=</span> <span class="token number">1000000</span><span class="token punctuation">,</span> start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> on_loss <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-R extra-class"><pre class="language-r"><code>Mean profit<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">402.102759478963</span>
<span class="token string">'%'</span> number of wins<span class="token operator">:</span> <span class="token number">99.92</span>%
</code></pre></div><p><img src="/assets/img/1533993326468.0c1c6524.png" alt="1533993326468"></p><p>Wprawdzie procent szansy na wygraną jest większy, wynosi aż <code>99.92%</code>, ale zdarzają się sytuacje w których przegrywasz i koniec końców kwota przegrana jest większa niż tyle ile wygrałeś do tej pory.</p><h3 id="strategia-tablicowa"><a href="#strategia-tablicowa" aria-hidden="true" class="header-anchor">#</a> Strategia tablicowa</h3><p>To była bardzo prosta strategia podwajania kwoty dopóki się nie wygra albo przegra z kretesem 😄. Może po każdym razie możemy zwiększać/zmniejszać kwotę w zależności od tego która to jest przegrana z kolei co pozwoli w pewnym sensie zminimalizować przegraną. Nazwałem to strategią tablicową. I jedyną zmianą w stosunki do strategii dla zysku jest lista <code>on_loss/on_win</code> która posiada dwie wartości, o ile zwiększyć/zmniejszyć wartość zakładu i jaką grę ustawić.</p><p>W tym wypadku wystarczy skopiować poprzednie funkcje i nieco je zmodyfikować tak żeby brały przykład z <code>on_loss</code> i <code>on_run</code> jako tablicę. Jeżeli nie wskażemy powrotu do wartości początkowej przez <code>-1</code> będzie on grał według ostatniego elementu.</p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">table_run</span><span class="token punctuation">(</span>start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> 
              profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> 
              on_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
              on_win <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;1.50&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> simulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    bet <span class="token operator">=</span> start_bet    
    max_bet <span class="token operator">=</span> start_bet
    end_cash <span class="token operator">=</span> cash <span class="token operator">+</span> profit
    
    loss_cnt <span class="token operator">=</span> <span class="token number">0</span>
    win_cnt  <span class="token operator">=</span> <span class="token number">0</span>
    game_current <span class="token operator">=</span> game_count
    element <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    roll <span class="token operator">=</span> <span class="token number">0</span> 
    
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        roll <span class="token operator">+=</span> <span class="token number">1</span>
        cash_before <span class="token operator">=</span> cash
        <span class="token keyword">if</span><span class="token punctuation">(</span>cash_before <span class="token operator">&lt;</span> bet<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># roll, cash, max_bet, bancrupt</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">]</span>
        

        result <span class="token operator">=</span> play<span class="token punctuation">(</span>bet<span class="token punctuation">,</span> game_current<span class="token punctuation">)</span>
        cash <span class="token operator">+=</span> result
       
        <span class="token keyword">if</span><span class="token punctuation">(</span>cash<span class="token operator">&gt;=</span>end_cash<span class="token punctuation">)</span><span class="token punctuation">:</span>
           <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span>
       

        <span class="token keyword">if</span> result <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">:</span>
            element <span class="token operator">=</span> on_loss<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>on_loss<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> loss_cnt <span class="token keyword">else</span> on_loss<span class="token punctuation">[</span>loss_cnt<span class="token punctuation">]</span>
            win_cnt <span class="token operator">=</span> <span class="token number">0</span>
            loss_cnt <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            element <span class="token operator">=</span> on_win<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>on_win<span class="token punctuation">)</span> <span class="token operator">&lt;=</span> win_cnt <span class="token keyword">else</span> on_win<span class="token punctuation">[</span>win_cnt<span class="token punctuation">]</span>
            loss_cnt <span class="token operator">=</span> <span class="token number">0</span>
            win_cnt <span class="token operator">+=</span> <span class="token number">1</span>
                    
        bet  <span class="token operator">=</span> start_bet <span class="token keyword">if</span> element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token keyword">else</span> bet <span class="token operator">+</span> bet <span class="token operator">*</span> element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        game_current <span class="token operator">=</span> element<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>         
        
        <span class="token keyword">if</span> element<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">&lt;</span><span class="token number">0</span><span class="token punctuation">:</span> <span class="token comment">#return to start</span>
            loss_cnt <span class="token operator">=</span> <span class="token number">0</span>
            win_cnt <span class="token operator">=</span> <span class="token number">0</span>
        
        <span class="token comment">#print(f&quot;{roll:5.0f}: {cash_before:&gt;8}$  |game: {game_current} bet: {bet:4.2f}| loss:{loss_cnt:2.0f} win: {win_cnt:2.0f}  result: {result:&gt;4}  {cash:&gt;8}$  e: {element}&quot;)</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>bet<span class="token operator">&gt;</span>max_bet<span class="token punctuation">)</span><span class="token punctuation">:</span>
            max_bet <span class="token operator">=</span> bet


<span class="token keyword">def</span> <span class="token function">table_simulation</span><span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
                    start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> 
                    game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
                    on_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
                    on_win <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span>
            table_run<span class="token punctuation">(</span>start_bet<span class="token punctuation">,</span>cash<span class="token punctuation">,</span>game_count<span class="token punctuation">,</span>profit<span class="token punctuation">,</span>on_loss<span class="token punctuation">,</span>on_win<span class="token punctuation">,</span>simulation <span class="token operator">=</span> i<span class="token punctuation">)</span>
            <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>runs<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;max_bet&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bancrupt&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  dtype <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">)</span>
     <span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
     
     statistics <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{</span>
             <span class="token string">'max_bet'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                   
                     <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span>
                     <span class="token string">'max'</span><span class="token punctuation">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span>
                     <span class="token string">'%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">==</span>np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>runs <span class="token operator">*</span> <span class="token number">100</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'cash'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span> <span class="token string">'cnt'</span><span class="token punctuation">:</span> <span class="token string">'count'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'bancrupt'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Mean profit:'</span><span class="token punctuation">,</span> statistics<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cash<span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;% number of wins: {((1-statistics[('bancrupt','')].mean()) * 100):.2f}%&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&quot;cash&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;roll&quot;</span><span class="token punctuation">)</span>
     <span class="token keyword">return</span> statistics
</code></pre></div><p>Wywołanie funkcji z takimi parametrami to taka naprawde poprzednia omawiana prosta strategia podwajania wartości za każdym razem gdy przegramy.</p><div class="language-python extra-class"><pre class="language-python"><code>table_run<span class="token punctuation">(</span>start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> 
              profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> 
              on_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
              on_win <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> simulation <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-python extra-class"><pre class="language-python"><code>  <span class="token number">100</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">101.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">101.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">102.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">102.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">103.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">103.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">2.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">1</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">1</span>     <span class="token number">102.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">102.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">2.0</span>     <span class="token number">104.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">104.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">2.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">1</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">1</span>     <span class="token number">103.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">103.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">2.0</span>     <span class="token number">105.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">105.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">106.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">106.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">107.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">107.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">1.0</span>     <span class="token number">108.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">108.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">2.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">1</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">1</span>     <span class="token number">107.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">107.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">4.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">2</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">2</span>     <span class="token number">105.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">105.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">1.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">0</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>  <span class="token number">4.0</span>     <span class="token number">109.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">109.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">2.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">1</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">1</span>     <span class="token number">108.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">108.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">4.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">2</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">2</span>     <span class="token number">106.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
<span class="token number">106.0</span>$  <span class="token operator">|</span>game<span class="token punctuation">:</span> <span class="token number">2.00</span> bet<span class="token punctuation">:</span> <span class="token number">8.00</span><span class="token operator">|</span> loss<span class="token punctuation">:</span> <span class="token number">3</span> win<span class="token punctuation">:</span>  <span class="token number">0</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">4</span>     <span class="token number">102.0</span>$  e<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'2.00'</span><span class="token punctuation">]</span>
                            
Out<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">110.0</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">]</span>
</code></pre></div><p>Sprawdżmy teraz kilka strategii, powiedzmy że zwiekszamy swoje prawdopodobieństwo za każdym razem gdy przegramy.</p><div class="language-python extra-class"><pre class="language-python"><code>
table_simulation<span class="token punctuation">(</span>runs<span class="token operator">=</span><span class="token number">10000</span><span class="token punctuation">,</span>
              start_bet <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> cash <span class="token operator">=</span> <span class="token number">10000</span><span class="token punctuation">,</span> game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">,</span> 
              profit <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span> 
              on_loss <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.03</span><span class="token punctuation">,</span> <span class="token string">&quot;1.98&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3.1</span><span class="token punctuation">,</span><span class="token string">&quot;1.50&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3.7</span><span class="token punctuation">,</span> <span class="token string">&quot;1.32&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">12.17</span><span class="token punctuation">,</span> <span class="token string">&quot;1.10&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">&quot;1.10&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">,</span> 
              on_win <span class="token operator">=</span>  <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;2.00&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>Warto wspomnieć że pod koniec wymagana jest kwota <code>2875.39</code> po <code>5</code>  przegranie.</p><table><thead><tr><th>przegrana</th><th>gra</th><th>szansa wygranek</th><th>mnożnik</th><th>stawka</th><th>do wygrania</th><th>łączna stawka</th><th>różnica</th></tr></thead><tbody><tr><td>0</td><td>2.00</td><td>49.50%</td><td></td><td>1.00</td><td>2.00</td><td>-1.00</td><td>1.00</td></tr><tr><td>1</td><td>1.98</td><td>50.00%</td><td>0.03</td><td>1.03</td><td>2.04</td><td>-2.03</td><td>0.01</td></tr><tr><td>2</td><td>1.50</td><td>66.00%</td><td>3.10</td><td>4.22</td><td>6.33</td><td>-6.25</td><td>0.08</td></tr><tr><td>4</td><td>1.32</td><td>75.00%</td><td>3.70</td><td>19.85</td><td>26.20</td><td>-26.10</td><td>0.10</td></tr><tr><td>5</td><td>1.10</td><td>90.00%</td><td>12.17</td><td>261.40</td><td>287.54</td><td>-287.50</td><td>0.04</td></tr><tr><td>6</td><td>1.10</td><td>90.00%</td><td>10.00</td><td>2875.39</td><td>3162.93</td><td>-3162.89</td><td>0.04</td></tr></tbody></table><p>Aby nie przegrać kwoty rosną bardzo szybko za każdym razem kiedy przegramy. Gdybyśmy od początku grali mając szanse <code>1/10</code> i zwiększając 10krotnie to przy szóstym podejściu potrzebowalibyśmy kwoty rzędu <code>10^6</code>, a to oznacza pewną przegraną.</p><p>Symulacja jednak pokazuje że niewiele to pomogło, a spowodowało tylko przedłużenie ilości rzutów do kilkudziesięciu tysięcy.</p><div class="language-R extra-class"><pre class="language-r"><code>Mean profit<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">3815.467734336913</span>
<span class="token string">'%'</span> number of wins<span class="token operator">:</span> <span class="token number">53.09</span>%
</code></pre></div><p><img src="/assets/img/1534006081762.b40394de.png" alt="1534006081762"></p><p>Oczywiście można sobie testować różne strategie, bo nie jestem w stanie wymyśleć i zasymulować wszystkich możliwości  😄 , ale może ktoś odkryje jakąś kombinacje przy której zysk jest większy od 0. Nie warto testować go na mniejszą ilość niż <code>100,000</code>. Dopiero od tych ilości wyniki zdają się dążyć do jednej wartości.</p><h3 id="labouchere-2"><a href="#labouchere-2" aria-hidden="true" class="header-anchor">#</a> Labouchere</h3><p>Na koniec system który  jest bardzo popularnym systemem w zakładach typu ruletka. Oprócz niego istnieje jeszcze pewnie kilkadziesiąt innych na których opis nie starczyłoby miesca. System ten wywodzi się od francuskiego filozofa i polega ona na zapisie naszej docelowej kwoty którą chcemy wygrać w postaci sumy liczb. Powiedżmy że chcemy wygrać <code>15$</code> , więc podzieliliśmy naszą wygrane na 5 liczb <code>1,2,3,4,5</code>, ustawienie liczb i kolejność dostosowujemy sobie sami.</p><ol><li>Na początku stawiamy sumę skrajnych do siebe cyfr (w tym przypadku <code>1+5=6</code>).</li><li>W przypadku wygranej kasujemy obydwie liczby z listy. (zostaje nam <code>2,3,4</code>)</li><li>W przypadku przegranej dodajemy do listy kwotę którą postawiliśmy na sam koniec listy (<code>1,2,3,4,5,6</code>)</li><li>Powtarzamy punkty od <code>1</code> do <code>3</code>aż nie wyczyścimy całej listy.</li></ol><p>Wydaje się proste, ale ma oczywiście haczyk jeśli będziemy ciągle przegrywać kwoty dopisywane do listy mogą się niebezpiecznie powiększyć.</p><p>W Python cały algorytm przedstawia się następująco:</p><p>W tym wypadku wystarczą tylko dwa parametry:</p><ul><li><strong>cash</strong> - kwota początkowa</li><li><strong>system</strong> - wybrany system</li></ul><p>A to co nam zwraca to tak jak poprzednio:</p><ul><li><strong>roll</strong>  - za którym razem udało się wygrać lub przegrać poniżej wartości wymaganej</li><li><strong>cash</strong> - końcowa kwota, jeśli wygrywamy powinna wynieść więcej o sumę poprzedniego zakładu</li><li><strong>max_bet</strong> - maksymalny postawiona stawka</li><li>system - lista końcowa.</li></ul><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">labouchere_run</span><span class="token punctuation">(</span>cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> system <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    game_count <span class="token operator">=</span> <span class="token string">&quot;2.00&quot;</span>
    
    roll <span class="token operator">=</span> <span class="token number">0</span>
    max_bet <span class="token operator">=</span> <span class="token number">0</span>
    system <span class="token operator">=</span> system<span class="token punctuation">.</span>copy<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">#print(f&quot;{roll:5.0f}: list: {system}&quot;)</span>
    
    <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        roll <span class="token operator">+=</span> <span class="token number">1</span>
        cash_before <span class="token operator">=</span> cash
        <span class="token comment"># only if there is only two elements in the list</span>
        bet <span class="token operator">=</span> system<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>system<span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span>  <span class="token keyword">else</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> bet <span class="token operator">&gt;</span> max_bet<span class="token punctuation">:</span>
            max_bet <span class="token operator">=</span> bet

        <span class="token keyword">if</span> bet<span class="token operator">&gt;</span>cash<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">1.0</span><span class="token punctuation">,</span> system<span class="token punctuation">]</span>
        

        
        result <span class="token operator">=</span> play<span class="token punctuation">(</span>bet<span class="token punctuation">,</span> game_count<span class="token punctuation">)</span>
        cash <span class="token operator">+=</span> result
        
        <span class="token keyword">if</span> result<span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                system<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
            system<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            system<span class="token punctuation">.</span>append<span class="token punctuation">(</span>bet<span class="token punctuation">)</span>
        
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>system<span class="token punctuation">)</span><span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>roll<span class="token punctuation">,</span> cash<span class="token punctuation">,</span> max_bet<span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
            
        <span class="token comment">#print(f&quot;{roll:5.0f}: {cash_before:&gt;8}$  |bet: {bet:4.2f}| result: {result:&gt;4}  {cash:&gt;8}$  list: {system}&quot;)</span>

</code></pre></div><p>No i w tym wypadku uruchomimy dla prostej sytuacji.</p><div class="language-python extra-class"><pre class="language-python"><code>labouchere_run<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span>system <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  
    
    <span class="token number">1</span><span class="token punctuation">:</span>      <span class="token number">100</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span>  <span class="token number">6.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>    <span class="token operator">-</span><span class="token number">6</span>         <span class="token number">94</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>
    <span class="token number">2</span><span class="token punctuation">:</span>       <span class="token number">94</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span>  <span class="token number">7.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>   <span class="token number">7.0</span>      <span class="token number">101.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token number">3</span><span class="token punctuation">:</span>    <span class="token number">101.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span>  <span class="token number">7.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>    <span class="token operator">-</span><span class="token number">7</span>       <span class="token number">94.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">]</span>
    <span class="token number">4</span><span class="token punctuation">:</span>     <span class="token number">94.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span>  <span class="token number">9.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>   <span class="token number">9.0</span>      <span class="token number">103.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token number">5</span><span class="token punctuation">:</span>    <span class="token number">103.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span>  <span class="token number">8.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>    <span class="token operator">-</span><span class="token number">8</span>       <span class="token number">95.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
    <span class="token number">6</span><span class="token punctuation">:</span>     <span class="token number">95.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span> <span class="token number">11.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">11</span>       <span class="token number">84.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">]</span>
    <span class="token number">7</span><span class="token punctuation">:</span>     <span class="token number">84.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span> <span class="token number">14.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>  <span class="token number">14.0</span>       <span class="token number">98.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>
    <span class="token number">8</span><span class="token punctuation">:</span>     <span class="token number">98.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span> <span class="token number">12.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>   <span class="token operator">-</span><span class="token number">12</span>       <span class="token number">86.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">]</span>
    <span class="token number">9</span><span class="token punctuation">:</span>     <span class="token number">86.0</span>$  <span class="token operator">|</span>bet<span class="token punctuation">:</span> <span class="token number">16.00</span><span class="token operator">|</span>  result<span class="token punctuation">:</span>  <span class="token number">16.0</span>      <span class="token number">102.0</span>$  <span class="token builtin">list</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span>

Out<span class="token punctuation">[</span><span class="token number">1210</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">115.0</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">0.0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre></div><p>Wow :happy:, wygraliśmy. Największy zakład jaki był to <code>16.0</code>, a wystarczyło do tego <code>10</code> rzutów. Czas przyjrzeć się dla większej ilości w postaci symulacji.</p><p><strong>Symulacja:</strong></p><div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">labouchere_simulation</span><span class="token punctuation">(</span>runs <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span>
                    cash <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> system <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     labouchere_result <span class="token operator">=</span> <span class="token punctuation">[</span>labouchere_run<span class="token punctuation">(</span>cash<span class="token punctuation">,</span>system<span class="token punctuation">)</span> <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">range</span><span class="token punctuation">(</span>runs<span class="token punctuation">)</span><span class="token punctuation">]</span>
     df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>labouchere_result<span class="token punctuation">,</span>
            columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cash&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;max_bet&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bancrupt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;list&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  dtype <span class="token operator">=</span> <span class="token builtin">float</span><span class="token punctuation">)</span>
     <span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt

     
     statistics <span class="token operator">=</span> df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>agg<span class="token punctuation">(</span><span class="token punctuation">{</span>
             <span class="token string">'max_bet'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
                   
                     <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span>
                     <span class="token string">'max'</span><span class="token punctuation">:</span> <span class="token string">'max'</span><span class="token punctuation">,</span>
                     <span class="token string">'%'</span><span class="token punctuation">:</span> <span class="token keyword">lambda</span> x<span class="token punctuation">:</span> <span class="token punctuation">(</span>x<span class="token punctuation">[</span>x<span class="token operator">==</span>np<span class="token punctuation">.</span><span class="token builtin">max</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span>runs <span class="token operator">*</span> <span class="token number">100</span>
             <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'cash'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token string">'mean'</span><span class="token punctuation">:</span> <span class="token string">'mean'</span><span class="token punctuation">,</span> <span class="token string">'cnt'</span><span class="token punctuation">:</span> <span class="token string">'count'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token string">'bancrupt'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">''</span><span class="token punctuation">:</span> <span class="token string">'mean'</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Mean profit:'</span><span class="token punctuation">,</span> statistics<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> cash<span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span>f<span class="token string">&quot;% number of wins: {((1-statistics[('bancrupt','')].mean()) * 100):.2f}%&quot;</span><span class="token punctuation">)</span>
     
     max_bet_index <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'max_bet'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>idxmax<span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'Max bet:'</span><span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>max_bet_index<span class="token punctuation">,</span><span class="token string">'max_bet'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">' with cash: '</span> <span class="token punctuation">,</span> df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>max_bet_index<span class="token punctuation">,</span><span class="token string">'cash'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>   <span class="token string">' from list: '</span><span class="token punctuation">,</span>  df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>max_bet_index<span class="token punctuation">,</span><span class="token string">'list'</span><span class="token punctuation">]</span> <span class="token punctuation">)</span>
      
     plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">&quot;rolls&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">&quot;cash&quot;</span><span class="token punctuation">)</span>
     plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>statistics<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'cash'</span><span class="token punctuation">,</span><span class="token string">'mean'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>label<span class="token operator">=</span><span class="token string">&quot;roll&quot;</span><span class="token punctuation">)</span>
     <span class="token keyword">return</span> statistics  
</code></pre></div><p>Z kwotą rzędu <code>100</code> uruchomienie kilka razy dla <code>100,000</code> uruchomień daje podobny wynik wynoszący:</p><div class="language-R extra-class"><pre class="language-r"><code>Mean profit<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">29.09197655642062</span>
<span class="token string">'%'</span> number of wins<span class="token operator">:</span> <span class="token number">52.72</span>%
Max bet<span class="token operator">:</span> <span class="token number">64.0</span>  with cash<span class="token operator">:</span>  <span class="token number">3.0</span>  from list<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="/assets/img/1534065381767.e6df80f7.png" alt="1534065381767"></p><p>Średnio z taką kwotą nie przechodzimy powyżej 40 rzutów, ponieważ wtedy sumy do postawienia przekraczają kwotę <code>100</code> którą mamy na początku. Warto sprawdzić czy dla większej kwoty, np: <code>100,000</code> mamy podobne wyniki.</p><p>Wyższa kwota pozwoliła nam zwiększyć szanse na wygraną do <code>70.30%</code>, ale w ostatecznym rozrachunku spowodowała też dużą ilość przegranych które na końcu pomniejszają twój zysk.</p><div class="language-R extra-class"><pre class="language-r"><code>Mean profit<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">25861.195673955735</span>
<span class="token string">'%'</span> number of wins<span class="token operator">:</span> <span class="token number">70.30</span>%
Max bet<span class="token operator">:</span> <span class="token number">55552.0</span>  with cash<span class="token operator">:</span>  <span class="token number">2799.0</span>  from list<span class="token operator">:</span>  <span class="token punctuation">[</span><span class="token number">13888</span><span class="token punctuation">,</span> <span class="token number">13888</span><span class="token punctuation">,</span> <span class="token number">27776</span><span class="token punctuation">,</span> <span class="token number">41664</span><span class="token punctuation">]</span>
</code></pre></div><p><img src="/assets/img/1534065656800.92ed51f2.png" alt="1534065656800"></p><p>Systemami można się pobawić, ale nie znalazłem takiego który dla większej ilości symulacji powodowałby wyrównanie średniego zysku.</p><h2 id="wnioski"><a href="#wnioski" aria-hidden="true" class="header-anchor">#</a> Wnioski</h2><p>Po tych wszystkich strategiach i symulacjach niestety nie udało mi się znaleść idealnego rozwiązania. Wprawdzie duża ilość gotówki (w stosunku 1 milion do 1) gwarantuje większe szanse na wygrane (nawet 99%), ale jeśli żle się trafi co w przypadku większej ilości symulacj się zdarza powoduje przegranie całej kwoty.</p><p>Może się wydawać że niemożliwością jest przy 50% szansie na wygraną przegrać 6 do 12 razy pod rząd. Należy pamiętać że losowanie nie pamięta poprzednich wartości i zgodnie z prawem wielkich liczb dopiero przy dużej liczbie losowań całość zbiega do jakieś statystycznej średniej. Dodatkowo można pomyśleć żę skoro raz już przegraliśmy 6 razy pod rząd to drugi raz taka szansa się nie zdarza i tutaj także okazuje się system inaczej wyruwnóje szanse. Jak widać z pierwszych symulacji na automacie 8 razy pod rząd przegrana zdarza się, a wykładnicze powielanie kwoty tak aby wygrać albo by nie móc przegrać powoduje zwiększenie wymaganych pieniędzy do sporych wartości.</p><p>Inne systemy jak Labouchere czy tablicowy który miał pomniejszyć trochę stawki za każdym razem gdy przegramy nie spowodowały niestety poprawy. Niektóre systemy w dużej perspektywie dają <code>70%</code> na wygraną co wydaje się żę jeśli więcej niż połowa to dobrze 😃, ale nie przewidują że może to oznaczać także duże przegraną jeśli akurat nie mieliśmy szczęścia.</p><p>W odpowiedzi na odwiecznie pytanie: Czy da się wygrywać na loterii?</p><p><img src="/assets/img/tenor.0873a39b.gif" alt="Znalezione obrazy dla zapytania computer says no gif"></p><h2 id="zalaczniki"><a href="#zalaczniki" aria-hidden="true" class="header-anchor">#</a> Załączniki</h2><p><a href="/gambling/gambling.py">gambling.py</a></p><h2 id="zrodla"><a href="#zrodla" aria-hidden="true" class="header-anchor">#</a> Źródła</h2><p>Labouchere: <a href="http://www.surebety.pl/artykul/labouchere" target="_blank" rel="noopener noreferrer">http://www.surebety.pl/artykul/labouchere<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Ada Loverence:</p><p><a href="https://en.wikipedia.org/wiki/Ada_Lovelace" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/Ada_Lovelace<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="https://www.famousscientists.org/ada-lovelace/" target="_blank" rel="noopener noreferrer">https://www.famousscientists.org/ada-lovelace/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><a href="https://gadzetomania.pl/58233,ada-lovelace-pierwsza-programistka" target="_blank" rel="noopener noreferrer">https://gadzetomania.pl/58233,ada-lovelace-pierwsza-programistka<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="video"><a href="#video" aria-hidden="true" class="header-anchor">#</a> Video</h3><p>Labouchere, by “Sentdex”: <a href="https://www.youtube.com/watch?v=bUFQNjjItok" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=bUFQNjjItok<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Gambling paradox,  by “Looking Glass Universe: <a href="https://www.youtube.com/watch?v=t8L9GCophac" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=t8L9GCophac<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p>Why the Martingale Betting System Doesn’t work, by “Looking Glass Universe”<a href="https://www.youtube.com/watch?v=Ry3B9hJbBfk&t=4s" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=Ry3B9hJbBfk&amp;t=4s<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><h3 id="ksiazki"><a href="#ksiazki" aria-hidden="true" class="header-anchor">#</a> Książki</h3><p>“Orzeł czy Reszka”- Hugo Steinhaus, ISBN 978-83-01-16284-9</p></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/assets/js/30.7d313f6b.js" defer></script><script src="/assets/js/46.59caeff0.js" defer></script><script src="/assets/js/45.c7013a6c.js" defer></script><script src="/assets/js/34.5336840b.js" defer></script><script src="/assets/js/35.a518df90.js" defer></script><script src="/assets/js/36.93c73ba4.js" defer></script><script src="/assets/js/app.bd92e1f5.js" defer></script>
  </body>
</html>
