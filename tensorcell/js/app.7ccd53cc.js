(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],f=0,_=[];f<o.length;f++)r=o[f],s[r]&&_.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(_.length)_.shift()();return a.push.apply(a,c||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==s[l]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},s={app:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;a.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"06de":function(t,e,i){},"075a":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__),C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3040"),C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_typeof__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6bde"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),Genetic=Genetic||function(){var Serialization={stringify:function(t){return JSON.stringify(t,function(t,e){return e instanceof Function||"function"==typeof e?"__func__:"+e.toString():e instanceof RegExp?"__regex__:"+e:e})},parse:function parse(str){return JSON.parse(str,function(key,value){return"string"!=typeof value?value:0===value.lastIndexOf("__func__:",0)?eval("("+value.slice(9)+")"):0===value.lastIndexOf("__regex__:",0)?eval("("+value.slice(10)+")"):value})}},Clone=function(t){return null==t||"object"!=Object(C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_typeof__WEBPACK_IMPORTED_MODULE_3__["a"])(t)?t:JSON.parse(JSON.stringify(t))},Optimize={Maximize:function(t,e){return t>=e},Minimize:function(t,e){return t<e}},Select1={Tournament2:function(t){var e=t.length,i=t[Math.floor(Math.random()*e)],n=t[Math.floor(Math.random()*e)];return this.optimize(i.fitness,n.fitness)?i.entity:n.entity},Tournament3:function(t){var e=t.length,i=t[Math.floor(Math.random()*e)],n=t[Math.floor(Math.random()*e)],s=t[Math.floor(Math.random()*e)],a=this.optimize(i.fitness,n.fitness)?i:n;return a=this.optimize(a.fitness,s.fitness)?a:s,a.entity},Fittest:function(t){return t[0].entity},Random:function(t){return t[Math.floor(Math.random()*t.length)].entity},RandomLinearRank:function(t){return this.internalGenState["rlr"]=this.internalGenState["rlr"]||0,t[Math.floor(Math.random()*Math.min(t.length,this.internalGenState["rlr"]++))].entity},Sequential:function(t){return this.internalGenState["seq"]=this.internalGenState["seq"]||0,t[this.internalGenState["seq"]++%t.length].entity}},Select2={Tournament2:function(t){return[Select1.Tournament2.call(this,t),Select1.Tournament2.call(this,t)]},Tournament3:function(t){return[Select1.Tournament3.call(this,t),Select1.Tournament3.call(this,t)]},Random:function(t){return[Select1.Random.call(this,t),Select1.Random.call(this,t)]},RandomLinearRank:function(t){return[Select1.RandomLinearRank.call(this,t),Select1.RandomLinearRank.call(this,t)]},Sequential:function(t){return[Select1.Sequential.call(this,t),Select1.Sequential.call(this,t)]},FittestRandom:function(t){return[Select1.Fittest.call(this,t),Select1.Random.call(this,t)]}};function Genetic(){this.fitness=null,this.seed=null,this.mutate=null,this.model=null,this.crossover=null,this.select1=null,this.select2=null,this.optimize=null,this.generation=null,this.notification=null,this.configuration={size:250,crossover:.9,mutation:.2,iterations:100,fittestAlwaysSurvives:!0,maxResults:100,webWorkers:!0,skip:0},this.userData={},this.internalGenState={},this.entities=[],this.usingWebWorker=!1,this.start=Object(C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark(function t(){var e,i,n,s,a,r,o,l,c,u,f,_;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(n=function(t){return Math.random()<=i.configuration.mutation&&i.mutate?i.mutate(Clone(t)):t},i=this,e=0;e<this.configuration.size;++e)this.entities.push(Clone(this.seed()));e=0;case 4:if(!(e<this.configuration.iterations)){t.next=25;break}if(this.internalGenState={},s=this.entities.map(function(t){return{fitness:i.fitness(t),entity:t}}).sort(function(t,e){return i.optimize(t.fitness,e.fitness)?-1:1}),void 0==i.notify){t.next=10;break}return t.next=10,i.notify(e,this.configuration.iterations,s[0]);case 10:if(a=s.reduce(function(t,e){return t+e.fitness},0)/s.length,r=Math.sqrt(s.map(function(t){return(t.fitness-a)*(t.fitness-a)}).reduce(function(t,e){return t+e},0)/s.length),o={maximum:s[0].fitness,minimum:s[s.length-1].fitness,mean:a,stdev:r},l=!this.generation||this.generation(s,e,o),c="undefined"!=typeof l&&!l||e==this.configuration.iterations-1,this.notification&&(c||0==this.configuration["skip"]||e%this.configuration["skip"]==0)&&this.sendNotification(s.slice(0,this.maxResults),e,o,c),!c){t.next=18;break}return t.abrupt("break",25);case 18:u=[],this.configuration.fittestAlwaysSurvives&&u.push(s[0].entity);while(u.length<i.configuration.size)this.crossover&&Math.random()<=this.configuration.crossover&&u.length+1<i.configuration.size?(f=this.select2(s),_=this.crossover(Clone(f[0]),Clone(f[1])).map(n),u.push(_[0],_[1])):u.push(n(i.select1(s)));this.entities=u;case 22:++e,t.next=4;break;case 25:case"end":return t.stop()}},t,this)})),this.sendNotification=function(t,e,i,n){var s={pop:t.map(Serialization.stringify),generation:e,stats:i,isFinished:n};this.notification(s.pop.map(Serialization.parse),s.generation,s.stats,s.isFinished)}}return Genetic.prototype.evolve=function(t,e){var i;for(i in t)this.configuration[i]=t[i];for(i in e)this.userData[i]=e[i];this.usingWebWorker=!1,this.start()},{create:function(){return new Genetic},Select1:Select1,Select2:Select2,Optimize:Optimize,Clone:Clone}}();__webpack_exports__["a"]=Genetic},"09db":function(t,e,i){},1:function(t,e){},"106f":function(t,e,i){},2:function(t,e){},"2e89":function(t,e,i){},3:function(t,e){},4:function(t,e){},4678:function(t,e,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=a(t);return i(e)}function a(t){var e=n[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}s.keys=function(){return Object.keys(n)},s.resolve=a,t.exports=s,s.id="4678"},5:function(t,e){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("mymap",{attrs:{id:"mapObject"}})],1)},a=[],r=(i("455d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-view",attrs:{id:"map"}},[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.pop_visible,expression:"pop_visible"}],staticClass:"popup-dialog",style:{left:t.pop_left+"px",top:t.pop_top+"px"}},[(t.pop_isGreen?t.pop_gtime1:t.pop_time>0)?i("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime1:t.pop_time1)+" s")]):t._e(),i("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime2:t.pop_time2)+" s")]),i("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime3:t.pop_time3)+" s ")]),(t.pop_isGreen?t.pop_gtime4:t.pop_gtime4>0)?i("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s((t.pop_isGreen,t.pop_gtime4))+" s ")]):t._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isSimulation_open,expression:"isSimulation_open"}],attrs:{id:"simulation"}},[i("div",{staticClass:"title"},[i("h2",[t._v(t._s(t.isSimulation_text))]),i("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-close",plain:"",circle:""},on:{click:t.simulation_close}})],1),i("div",{staticClass:"content"},[t.isSumulation_loading?i("div",{staticClass:"loader"}):t._e(),i("el-button",{attrs:{type:"danger",disabled:t.isSumulation_loading,plain:""},on:{click:t.simulation_download}},[t._v(" Download Simulation")]),!t.isSumulation_downloading&&t.isSumulation_loading?i("el-button",{attrs:{type:"warning",plain:""},on:{click:function(e){t.isSumulation_loading=!1}}},[i("i",{staticClass:"fas fa-stopwatch"}),t._v(" Cancel")]):t._e(),i("div",{staticClass:"block"},[t.isSimulation_play?i("el-button",{attrs:{type:"primary",disabled:!t.isSumulation_finish,round:""},on:{click:t.simulation_pause}},[i("i",{staticClass:"fas fa-pause"})]):i("el-button",{attrs:{type:"success",icon:"el-icon-caret-right",disabled:!t.isSumulation_finish,round:""},on:{click:t.simulation_play}}),i("el-slider",{attrs:{disabled:!t.isSumulation_finish,min:0,max:t.simulation.length,"show-input":""},on:{change:t.simulation_change},model:{value:t.simulation_time,callback:function(e){t.simulation_time=e},expression:"simulation_time"}})],1)],1)]),i("el-dialog",{staticClass:"loading-dialog",staticStyle:{"z-index":"100001","margin-top":"0"},attrs:{visible:t.isLoading_open,id:"loadingdialog","show-close":t.isLoading_finish,"close-on-click-modal":t.isLoading_finish,"close-on-press-escape":t.isLoading_finish,title:t.isLoading_text,width:"60%"},on:{open:t.loading_open,close:t.loading_close}},[t.isLoading_finish?t._e():i("div",{staticClass:"loader"}),i("strong",{staticClass:"score-header"},[i("strong",{staticClass:"score"},[t._v(t._s(t.isLoading_score))])]),i("canvas",{attrs:{id:"myChart",width:"600",height:"170"}})]),i("el-dialog",{staticClass:"traffic_dialog",attrs:{id:"traffic_info",title:"Info",visible:"info"==t.traffic_visible,width:"450px",center:""},on:{close:function(e){t.traffic_visible=""}}},[i("span",[i("h2",[t._v("Goal")]),i("hr"),i("p",[t._v("The goal of the project is to visualize our traffic signal control algorithms.")]),i("br"),i("h2",[t._v("Representation")]),i("hr"),i("p",[t._v("The\n        "),i("strong",[t._v("map")]),t._v(" presents traffic signal settings for 21 crossroads at\n        "),i("strong",[t._v("Stara Ochota district in Warsaw")]),t._v(".\n        "),i("br"),i("br"),t._v(" Each set is a traffic signal offset - number from the set {0,1,2,...,119} representing the number of seconds from the beginning of the simulation to the first switch from a\n        "),i("strong",[t._v("red")]),t._v(" signal phase to a\n        "),i("strong",[t._v("green")]),t._v(" signal phase for a given signal (for each crossroads, we visualize offsets only for 1 traffic signals being representatives of the whole crossroads).")]),i("br"),i("h2",[t._v("Current Settings")]),i("hr"),i("p",[t._v("In the current setting, we assume that durations of red signal phases are always 62 seconds, while durations of green signal phases are always 58 seconds. ")]),i("br"),i("p",[t._v("For each setting, we compute\n        "),i("strong",[t._v('"Traffic score"')]),t._v(": the total time of waiting on red signals during\n        "),i("strong",[t._v("10 minutes of traffic")]),t._v(" (we can simulate it, but we can also use machine learning algorithms, trained on data from simulations to speed up evaluations). ")]),i("p",[t._v("We can also run an optimization algorithm (based on a genetic algorithm) to find a good setting (we can run it using the\n        "),i("strong",[t._v('"Find best setting"')]),t._v(" button).")])])]),i("el-dialog",{staticClass:"traffic_dialog",attrs:{id:"traffic_dialog_id",title:"Update an offset for a traffic signal",visible:"traffic"==t.traffic_visible,width:"40%",center:""},on:{close:t.traffic_dialog_off}},[i("span",[t._v("The signal starts from time 0 and its state is calculated by the offset of the value: ")]),i("el-slider",{staticClass:"mt-2",attrs:{"show-input":"",placeholder:"Please input",min:0,max:120},model:{value:t.traffic_time,callback:function(e){t.traffic_time=e},expression:"traffic_time"}}),t._l(t.traffic_signs,function(e){return i("div",{key:e.id},[i("span",{staticClass:"quote"},[t._v("Traffic signal at position: "+t._s(e.position)+" ")]),i("div",{staticClass:"line"},[i("img",{staticClass:"first",attrs:{src:"signal.png",alt:""}}),i("div",{staticClass:"color123 ",style:{width:(e.isGreen?t.traffic_gtime1:t.traffic_time1)/60*100+"%","background-color":e.isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime1:t.traffic_time1))]),i("div",{staticClass:"color123",style:{width:(e.isGreen?t.traffic_gtime2:t.traffic_time2)/60*100+"%","background-color":e.isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime2:t.traffic_time2))]),i("div",{staticClass:"color123",style:{width:(e.isGreen?t.traffic_gtime3:t.traffic_time3)/60*100+"%","background-color":e.isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime3:t.traffic_time3)+" ")]),i("div",{staticClass:"color123 ",style:{width:(e.isGreen?t.traffic_gtime4:t.traffic_time4)/60*100+"%","background-color":e.isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime4:t.traffic_time4)+" ")]),i("div")]),i("div")])}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.traffic_dialog_off}},[t._v("Cancel")]),i("el-button",{attrs:{type:"primary"},on:{click:t.traffic_dialog_confirm}},[t._v("Update Offset")])],1)],2),t.isShowGenetic?i("MessageBox",{attrs:{title:"Parameters of a genetic algorithm",ok:"Run Genetic Algorithm"},on:{cancel:function(e){t.isShowGenetic=!1},run:function(e){t.genetic_calculate()}}},[i("el-form",{ref:"form",attrs:{model:t.genetic_config,"label-width":"170px"}},[i("el-form-item",{attrs:{label:"Number of iterations"}},[i("el-input",{model:{value:t.genetic_config.iterations,callback:function(e){t.$set(t.genetic_config,"iterations",e)},expression:"genetic_config.iterations"}})],1),i("el-form-item",{attrs:{label:"Population size"}},[i("el-input",{model:{value:t.genetic_config.size,callback:function(e){t.$set(t.genetic_config,"size",e)},expression:"genetic_config.size"}})],1),i("el-form-item",{attrs:{label:"Probability of crossover"}},[i("el-popover",{staticClass:"traffic-score",attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:"When two individuals are selected for mating."}},[i("el-input",{attrs:{slot:"reference"},slot:"reference",model:{value:t.genetic_config.crossover,callback:function(e){t.$set(t.genetic_config,"crossover",e)},expression:"genetic_config.crossover"}})],1)],1),i("el-form-item",{attrs:{label:"Probability of mutation"}},[i("el-popover",{staticClass:"traffic-score",attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:"Probability of change single single chromosome during mutation to prevent local minima."}},[i("el-input",{attrs:{slot:"reference"},slot:"reference",model:{value:t.genetic_config.mutation,callback:function(e){t.$set(t.genetic_config,"mutation",e)},expression:"genetic_config.mutation"}})],1)],1)],1)],1):t._e(),i("div",{attrs:{id:"mapid"}}),i("div",{staticClass:"panel-info"},[i("el-popover",{staticClass:"traffic-score",attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:"The total time of waiting on  a red signal for the current signal setting configuration"}},[i("el-button",{staticClass:"traffic-score",attrs:{slot:"reference",type:"primary",plain:""},on:{click:t.showCalculation},slot:"reference"},[i("i",{staticClass:"fas fa-trophy"}),t._v(" Traffic score: "+t._s(Math.round(t.time,2))+" s")])],1),i("el-button",{attrs:{type:"danger",plain:""},on:{click:t.simulation_open}},[i("i",{staticClass:"fas fa-car"}),t._v(" Simulation "),""!=t.simulation_score?i("span",[t._v(t._s(t.simulation_score)+" s")]):t._e()]),i("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.traffic_visible="info"}}},[i("i",{staticClass:"el-icon-question"}),t._v(" Info")])],1),i("div",{directives:[{name:"show",rawName:"v-show",value:"cal"==t.panelType,expression:"panelType=='cal'"}],staticClass:"panel-show"},[i("el-button",{staticClass:"calculation",attrs:{type:"warning",plain:""},on:{click:function(e){t.isShowGenetic=!0}}},[i("i",{staticClass:"fas fa-calculator"}),t._v(" Find best setting")]),i("span"),i("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:"Load best solution found so far"}},[i("el-button",{staticClass:"calculation",attrs:{slot:"reference",type:"success",plain:""},on:{click:function(e){t.traffic_load(t.best_solution)}},slot:"reference"},[i("i",{staticClass:"fas fa-upload"}),t._v(" Load Best Solution ("+t._s(Math.round(t.best_solution_result))+" s)")])],1),t._l(t.sign_groups,function(e){return i("div",{key:e.id,staticClass:"light",on:{click:function(i){t.traffic_dialog_update(e.sign_marker)},mouseover:function(i){t.calOnOver(e)},mouseout:function(i){t.calOffOver(e)}}},[i("span",{staticClass:"text",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.traffic_dialog_update(e.sign_marker)}}},[t._v("\n        "+t._s(e.id)+":\n      ")]),i("span",{staticClass:"time"},[t._v(t._s(e.time))]),i("span",{staticClass:"inside-icon"},[i("i",{staticClass:" fas fa-traffic-light",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.traffic_dialog_update(e.sign_marker)}}})])])})],2),i("div",{directives:[{name:"show",rawName:"v-show",value:"sim"==t.panelType,expression:"panelType=='sim'"}],staticClass:"panel-show"},[i("div"),i("el-button",{staticClass:"calculation",attrs:{type:"primary",plain:""},on:{click:t.simulation_load}},[t._v("Load Simulation")]),i("el-slider",{attrs:{min:0,max:600},model:{value:t.simulation_time,callback:function(e){t.simulation_time=e},expression:"simulation_time"}}),i("el-button",{attrs:{type:"success",round:"",icon:"el-icon-caret-right"},on:{click:t.simulation_play}},[t._v("Start Simulation")])],1)],1)}),o=[],l=(i("96cf"),i("3040")),c=(i("ac4d"),i("8a81"),i("ac6a"),i("a322")),u=(i("5b20"),i("30dc"),i("829d"),i("a481"),function(t){var e=t.replace(/'/g,'"'),i=JSON.parse(e),n=[],s=!0,a=!1,r=void 0;try{for(var o,l=i[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var c=o.value;n.push(JSON.parse(c))}}catch(t){a=!0,r=t}finally{try{s||null==l.return||l.return()}finally{if(a)throw r}}return n}),f=i("c665"),_=i("aa9a"),m=(i("6b54"),i("28a5"),i("e11e")),h=i.n(m),p=(i("a8b7"),function(t,e,i){t=t.replace(/^\s*#|\s*$/g,""),e=e.replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),3==e.length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(t.substr(0,2),16),s=parseInt(t.substr(2,2),16),a=parseInt(t.substr(4,2),16),r=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),l=parseInt(e.substr(4,2),16),c=r-n,u=o-s,f=l-a;return c=(c*i+n).toString(16).split(".")[0],u=(u*i+s).toString(16).split(".")[0],f=(f*i+a).toString(16).split(".")[0],1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),1==f.length&&(f="0"+f),"#"+c+u+f}),d=function(){function t(e,i,n,s){Object(f["a"])(this,t),this.id=e,this.speed=i,this.lat=n,this.lng=s,this.latlng=h.a.latLng([n,s])}return Object(_["a"])(t,[{key:"setStyle",value:function(){}},{key:"color",get:function(){return p("#FF0000","#00FF00",Math.min(this.speed/50,1))}}]),t}();h.a.interpolatePosition=function(t,e,i,n){var s=n/i;return s=s>0?s:0,s=s>1?1:s,h.a.latLng(t.lat+s*(e.lat-t.lat),t.lng+s*(e.lng-t.lng))},h.a.Marker.MovingMarker=h.a.Marker.extend({statics:{notStartedState:0,endedState:1,pausedState:2,runState:3},options:{autostart:!1,loop:!1},_add_car:function(t){t.marker=h.a.circleMarker(t.latlng,{color:"transparent",fillColor:t.color,fillOpacity:.8,radius:5}).addTo(this._map),t.id in this._allmarks||(this._allmarks[t.id]=t)},clear_cars:function(){for(var t in this._allmarks)this._map.removeLayer(this._allmarks[t].marker)},car_set:function(t){t>=this._latlngs.length&&(t=this._latlngs.length-1);var e=this._latlngs[t];for(var i in e){var n=e[i];if(n.id in this._allmarks){var s=this._allmarks[n.id];s.marker.setLatLng(n.latlng),s.marker.setStyle({fillColor:n.color})}else this._add_car(n)}},size:function(){return void 0!=this._latlngs?this._latlngs.length:0},add_values:function(t){var e={},i=!0,n=!1,s=void 0;try{for(var a,r=t[Symbol.iterator]();!(i=(a=r.next()).done);i=!0){var o=a.value;e[o[0]]=new d(o[0],o[1],o[2],o[3])}}catch(t){n=!0,s=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw s}}this._latlngs.push(e)},initialize:function(t,e){this._map=t,this._latlngs=[],this._allmarks={}},isRunning:function(){return this._state===h.a.Marker.MovingMarker.runState},isEnded:function(){return this._state===h.a.Marker.MovingMarker.endedState},isStarted:function(){return this._state!==h.a.Marker.MovingMarker.notStartedState},isPaused:function(){return this._state===h.a.Marker.MovingMarker.pausedState},start:function(){this.isRunning()||(this.isPaused()?this.resume():(this._loadLine(0),this._startAnimation(),this.fire("start")))},resume:function(){this.isPaused()&&(this._currentLine[0]=this.getLatLng(),this._currentDuration-=this._pauseStartTime-this._startTime,this._startAnimation())},pause:function(){this.isRunning()&&(this._pauseStartTime=Date.now(),this._state=h.a.Marker.MovingMarker.pausedState,this._stopAnimation(),this._updatePosition())},stop:function(t){this.isEnded()||(this._stopAnimation(),"undefined"===typeof t&&(t=0,this._updatePosition()),this._state=h.a.Marker.MovingMarker.endedState,this.fire("end",{elapsedTime:t}))},addLatLng:function(t,e){this._latlngs.push(h.a.latLng(t)),this._durations.push(e)},moveTo:function(t,e){this._stopAnimation(),this._latlngs=[this.getLatLng(),h.a.latLng(t)],this._durations=[e],this._state=h.a.Marker.MovingMarker.notStartedState,this.start(),this.options.loop=!1},addStation:function(t,e){t>this._latlngs.length-2||t<1||(this._stations[t]=e)},onAdd:function(t){h.a.Marker.prototype.onAdd.call(this,t),!this.options.autostart||this.isStarted()?this.isRunning()&&this._resumeAnimation():this.start()},onRemove:function(t){h.a.Marker.prototype.onRemove.call(this,t),this._stopAnimation()},_createDurations:function(t,e){for(var i=t.length-1,n=[],s=0,a=0,r=0;r<i;r++)a=t[r+1].distanceTo(t[r]),n.push(a),s+=a;var o=e/s,l=[];for(r=0;r<n.length;r++)l.push(n[r]*o);return l},_startAnimation:function(){this._state=h.a.Marker.MovingMarker.runState,this._animId=h.a.Util.requestAnimFrame(function(t){this._startTime=Date.now(),this._startTimeStamp=t,this._animate(t)},this,!0),this._animRequested=!0},_resumeAnimation:function(){this._animRequested||(this._animRequested=!0,this._animId=h.a.Util.requestAnimFrame(function(t){this._animate(t)},this,!0))},_stopAnimation:function(){this._animRequested&&(h.a.Util.cancelAnimFrame(this._animId),this._animRequested=!1)},_updatePosition:function(){var t=Date.now()-this._startTime;this._animate(this._startTimeStamp+t,!0)},_loadLine:function(t){this._currentIndex=t,this._currentDuration=this._durations[t],this._currentLine=this._latlngs.slice(t,t+2)},_updateLine:function(t){var e=t-this._startTimeStamp;if(e<=this._currentDuration)return e;var i,n=this._currentIndex,s=this._currentDuration;while(e>s){if(e-=s,i=this._stations[n+1],void 0!==i){if(e<i)return this.setLatLng(this._latlngs[n+1]),null;e-=i}if(n++,n>=this._latlngs.length-1){if(!this.options.loop)return this.setLatLng(this._latlngs[this._latlngs.length-1]),this.stop(e),null;n=0,this.fire("loop",{elapsedTime:e})}s=this._durations[n]}return this._loadLine(n),this._startTimeStamp=t-e,this._startTime=Date.now()-e,e},_animate:function(t,e){this._animRequested=!1;var i=this._updateLine(t);if(!this.isEnded()){if(null!=i){var n=h.a.interpolatePosition(this._currentLine[0],this._currentLine[1],this._currentDuration,i);this.setLatLng(n)}e||(this._animId=h.a.Util.requestAnimFrame(this._animate,this,!1),this._animRequested=!0)}}}),h.a.Marker.movingMarker=function(t,e){return new h.a.Marker.MovingMarker(t,e)};var g=h.a,b=(i("456d"),function t(e,i,n){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(f["a"])(this,t),this.group_id=e,this.position=i,this.isGreen=n,this.show=s}),v=function t(e,i,n,s,a){Object(f["a"])(this,t),this.id=e,this.group=i,this.time=n,this.signs=a,this.connection=s},w={28:new v(0,"28",93,["180","182"],[new b("28",[52.2107465,20.9807139],!1,!0),new b("28",[52.2105183,20.9803437],!1,!1),new b("28",[52.2105183,20.9803437],!1,!1)]),64:new v(1,"64",43,["135","180"],[new b("64",[52.2143666,20.979524],!1,!0),new b("64",[52.2144409,20.9792988],!1,!1)]),98:new v(2,"98",99,["132","135","99"],[new b("98",[52.218917,20.9830513],!1,!0),new b("98",[52.218917,20.9830513],!0,!1)]),99:new v(3,"99",47,["98","283"],[new b("99",[52.2194494,20.9851343],!0,!0),new b("99",[52.2194494,20.9851343],!1,!1)]),100:new v(4,"100",53,["103","137"],[new b("100",[52.2199519,20.9709217],!1,!0),new b("100",[52.2197153,20.9712994],!0,!1)]),101:new v(5,"101",46,["104","103","289"],[new b("101",[52.2159554,20.9626047],!1,!0)]),102:new v(6,"102",86,["103","104"],[new b("102",[52.2176205,20.9600354],!1,!0)]),103:new v(7,"103",26,["101","104","100"],[new b("103",[52.2168126,20.9614718],!0,!0)]),104:new v(8,"104",69,["101","103"],[new b("104",[52.2157853,20.9603045],!0,!0)]),131:new v(9,"131",84,["100","132"],[new b("131",[52.2251573,20.9893067],!0,!0),new b("131",[52.2250183,20.9886315],!1,!1),new b("131",[52.2246683,20.9895899],!1,!1),new b("131",[52.2245,20.9889462],!0,!1)]),132:new v(10,"132",80,["131","98"],[new b("132",[52.2211765,20.9854959],!0,!0),new b("132",[52.2211765,20.9854959],!1,!1),new b("132",[52.2212135,20.9851842],!1,!1),new b("132",[52.2212135,20.9851842],!0,!1)]),133:new v(11,"133",115,["134","135"],[new b("133",[52.2161535,20.9880646],!0,!0),new b("133",[52.2164161,20.9880658],!0,!1),new b("133",[52.2164161,20.9880658],!1,!1)]),134:new v(12,"134",76,["133","182"],[new b("134",[52.216484,20.990223],!1,!0),new b("134",[52.216484,20.990223],!0,!1),new b("134",[52.2161807,20.9902419],!0,!1),new b("134",[52.2161807,20.9902419],!1,!1)]),135:new v(13,"135",25,["136","64","98","133"],[new b("135",[52.2163183,20.9813502],!1,!0),new b("135",[52.2161868,20.9812472],!0,!1),new b("135",[52.2164287,20.981024],!0,!1),new b("135",[52.2163078,20.9809468],!1,!1)]),136:new v(14,"136",43,["137","135"],[new b("136",[52.2176855,20.9773419],!1,!0),new b("136",[52.2176855,20.9773419],!0,!1),new b("136",[52.2175646,20.9772389],!0,!1),new b("136",[52.2175646,20.9772389],!1,!1)]),137:new v(15,"137",69,["100","136"],[new b("137",[52.2189896,20.9734108],!1,!0),new b("137",[52.2189896,20.9734108],!0,!1),new b("137",[52.2188634,20.9732649],!0,!1),new b("137",[52.2188634,20.9732649],!1,!1)]),180:new v(16,"180",80,["64","288","28"],[new b("180",[52.2109278,20.9766552],!0,!0),new b("180",[52.2112644,20.9764578],!0,!1),new b("180",[52.2111539,20.9768355],!1,!1),new b("180",[52.2110751,20.9762604],!1,!1)]),182:new v(17,"182",65,["28","134"],[new b("182",[52.2101862,20.9880707],!0,!0),new b("182",[52.2105428,20.9878242],!0,!1),new b("182",[52.2102178,20.9877016],!1,!1)]),283:new v(18,"283",5,["99","134"],[new b("283",[52.2192124,20.9901071],!0,!0),new b("283",[52.2192124,20.9901071],!1,!1),new b("283",[52.2192513,20.9893353],!0,!1),new b("283",[52.2192513,20.9893353],!1,!1)]),288:new v(19,"288",35,["289","180"],[new b("288",[52.2125079,20.9727936],!1,!0),new b("288",[52.2125079,20.9727936],!0,!1),new b("288",[52.212337,20.9726596],!1,!1),new b("288",[52.212337,20.9726596],!0,!1)]),289:new v(20,"289",72,["101","288"],[new b("289",[52.2140019,20.9685449],!1,!0),new b("289",[52.2140019,20.9685449],!0,!1),new b("289",[52.2138224,20.9683579],!1,!1),new b("289",[52.2138224,20.9683579],!0,!1)])};i("6cc5");var y=i("075a"),k=i("0b53"),S=function(){function t(){Object(f["a"])(this,t),this.cars=[],this.x_scale=[.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336],this.y_scale=3251.8414074,this.y_mean=48924.98394408,this.on_load=null}return Object(_["a"])(t,[{key:"load",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"]("./model/model.json");case 2:this.model=t.sent,void 0!=this.on_load&&this.on_load(this);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"predict",value:function(t){for(var e=t.slice(0),i=0;i<e.length;i++)e[i]=t[i]*this.x_scale[i];var n=[];n[0]=e;var s=k["b"](n),a=this.model.predict(s);return a.dataSync()[0]*this.y_scale+this.y_mean}}]),t}(),j=new S;j.load(),window.Simulation=j;var x=j,M=y["a"].create();M.optimize=y["a"].Optimize.Minimize,M.select1=y["a"].Select1.Tournament2,M.select2=y["a"].Select2.Tournament2,M.get_val=function(){return Math.floor(120*Math.random())},M.model=x,M.seed=function(){var t=this;function e(e){for(var i=[],n=0;n<e;n++)i.push(t.get_val());return i}var i=e(21);return i},M.mutate=function(t){function e(t,e,i){var n=t.slice(0);return n[e]=i,n}var i=Math.floor(Math.random()*t.length);return e(t,i,this.get_val())},M.crossover=function(t,e){var i=t.length,n=Math.floor(Math.random()*i),s=Math.floor(Math.random()*i);if(n>s){var a=s;s=n,n=a}var r=e.slice(0,n).concat(t.slice(n,n+s-n)).concat(e.slice(s)),o=t.slice(0,n).concat(e.slice(n,n+s-n)).concat(t.slice(s));return[r,o]},M.fitness=function(t){return this.model.predict(t)},M.generation=function(t,e,i){return!0},M.run=function(t,e,i){M.notify=i,M.notification=function(e,i,n,s){t(s,e[0].entity,e[0].fitness,e,i,n)};var n={length:21,max_val:120};M.evolve(e,n)};var C=M,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"2001"},attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":"Tip"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$emit("run")}}},[i("div",{staticClass:"el-message-box",staticStyle:{"z-index":"3001"}},[i("div",{staticClass:"el-message-box__header"},[i("div",{staticClass:"el-message-box__title"},[i("span",[t._v(t._s(t.title))])]),i("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.$emit("cancel")}}},[i("i",{staticClass:"el-message-box__close el-icon-close"})])]),i("div",{staticClass:"el-message-box__content"},[t._t("default")],2),i("div",{staticClass:"el-message-box__btns"},[i("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(e){t.$emit("cancel")}}},[i("span",[t._v("\n          Cancel\n        ")])]),i("button",{staticClass:"el-button el-button--default el-button--small el-button--primary ",attrs:{type:"button"},on:{click:function(e){t.$emit("run")}}},[i("span",[t._v("\n          "+t._s(t.ok)+"\n        ")])])])]),i("div",{staticClass:"v-modal",staticStyle:{"z-index":"-2000"},attrs:{tabindex:"0"}})])},O=[],L={beforeMount:function(){window.addEventListener("keyup",this.onEscapeKeyUp)},beforeDestroy:function(){window.removeEventListener("keyup",this.onEscapeKeyUp)},props:{title:String,ok:{type:String,default:"OK"}},methods:{onEscapeKeyUp:function(t){27===t.which&&this.$emit("cancel")}}},R=L,E=(i("6121"),i("2877")),P=Object(E["a"])(R,T,O,!1,null,null,null);P.options.__file="MessageBox.vue";var z=P.exports,D=function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",e._g({staticClass:"number-input",class:(t={"number-input--inline":e.inline,"number-input--center":e.center,"number-input--controls":e.controls},t["number-input--"+e.size]=e.size,t)},e.listeners),[e.controls?n("button",{staticClass:"number-input__button number-input__button--minus",attrs:{type:"button",disabled:e.disabled||e.readonly||!e.decreasable},on:{click:e.decrease}}):e._e(),n("input",{ref:"input",staticClass:"number-input__input",attrs:{type:"number",name:e.name,min:e.min,max:e.max,step:e.step,readonly:e.readonly||!e.inputtable,disabled:e.disabled||!e.decreasable&&!e.increasable,placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.currentValue},on:{change:e.change,paste:e.paste}}),e.controls?n("button",{staticClass:"number-input__button number-input__button--plus",attrs:{type:"button",disabled:e.disabled||e.readonly||!e.increasable},on:{click:e.increase}}):e._e()])},G=[],A=i("c93e"),I=(i("c5f6"),i("ee1d"),Number.isNaN||window.isNaN),N=/^-?(?:\d+|\d+\.\d+|\.\d+)(?:[eE][-+]?\d+)?$/,q=function(t){return parseFloat(t.toFixed(10))},U={name:"number-input",data:function(){return{currentValue:NaN}},model:{event:"change"},props:{center:Boolean,controls:Boolean,disabled:Boolean,inputtable:{type:Boolean,default:!0},inline:Boolean,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},name:String,placeholder:String,readonly:Boolean,rounded:Boolean,size:String,step:{type:Number,default:1},value:Number},computed:{increasable:function(){var t=this.currentValue;return I(t)||t<this.max},decreasable:function(){var t=this.currentValue;return I(t)||t>this.min},listeners:function(){var t=Object(A["a"])({},this.$listeners);return delete t.change,t}},methods:{change:function(t){this.setValue(Math.min(this.max,Math.max(this.min,t.target.value)))},paste:function(t){N.test(t.clipboardData.getData("text"))||t.preventDefault()},decrease:function(){if(this.decreasable){var t=this.currentValue;I(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,q(t-this.step))))}},increase:function(){if(this.increasable){var t=this.currentValue;I(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,q(t+this.step))))}},setValue:function(t){var e=this,i=this.currentValue,n=this.rounded?Math.round(t):t;this.min<=this.max&&(n=Math.min(this.max,Math.max(this.min,n))),this.currentValue=n,this.$emit("change",n,i),this.$nextTick(function(){e.$el&&(e.$refs.input.value=n)})}},watch:{value:function(t){this.setValue(t)}},created:function(){this.setValue(this.value)}},B=U,F=(i("5741"),Object(E["a"])(B,D,G,!1,null,"6c7308e8",null));F.options.__file="number-input.vue";var W=F.exports,$=(i("24f8"),"http://13.81.247.156:25041/compute"),K="http://13.81.247.156:25041/results";g.Control.extend({options:{position:"topleft"}});function J(t){return 0==t?0:1==t?0:120==t?0:t<=60?t-2:0}function V(t){return 0==t?60:1==t?61:120==t?60:t<=60?62:t%60}function H(t){return 0==t?58:1==t?58:120==t?58:t<=60?60-t:58}function X(t){return 0==t?2:1==t?1:120==t?2:t<=60?0:122-t}function Z(t){return 0==t?0:120==t?0:1==t?1:t<=62?t:0}function Q(t){return 0==t?58:120==t?58:1==t?58:t<=62?58:t-62}function Y(t){return 0==t?62:120==t?62:1==t?61:t<=62?62-t:62}function tt(t){return 0==t?0:120==t?0:1==t?0:t<=62?0:120-t}var et=function(t){return new Promise(function(e){setTimeout(e,t)})},it=function(t,e){return new Promise(function(i){var n=new XMLHttpRequest;n.timeout=1e5,n.onreadystatechange=function(){4!=this.readyState||200!=this.status&&201!=this.status||i(this.response)},n.open("POST",t),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(e)})},nt={components:{MessageBox:z,"number-input":W},data:function(){return Object(c["a"])({myChart:"",genetic_config:{iterations:100,size:20,crossover:.4,mutation:.3},pop_isGreen:!1,pop_position:"",pop_visible:!1,pop_left:0,pop_top:0,pop_time:0,simulation:[],simulation_markers:void 0,simulation_time:0,simulation_score:"",isSimulation_open:!1,isSumulation_finish:!1,isSimulation_play:!1,isSimulation_text:"",isSumulation_downloading:!1,isSumulation_loading:!1,isSumulation_loading_time:0,isLoading:!1,isLoading_finish:!1,isLoading_open:!1,isLoading_text:"...",isLoading_score:"",isShowGenetic:!1,traffic_dialog:{visible:!0},traffic_visible:"",traffic_time:0,traffic_group:w["28"],traffic_signs:w["28"].signs[0],traffic_times:w["28"].times,panelType:"",icon:"",car_icon:"",map:"",zoom:15,mapMarkers:[],center:[52.2187,20.9864],car:[],car_position:[52.2211,20.9849],time:0,best_solution:[43,16,64,69,6,21,83,119,81,91,37,47,42,30,54,48,29,24,35,36,6],best_solution_result:38899,sign_times:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sign_groups:w},"simulation_time",0)},computed:{pop_time1:function(){return Z(this.pop_time)},pop_time2:function(){return Q(this.pop_time)},pop_time3:function(){return Y(this.pop_time)},pop_time4:function(){return tt(this.pop_time)},pop_gtime1:function(){return J(this.pop_time)},pop_gtime2:function(){return V(this.pop_time)},pop_gtime3:function(){return H(this.pop_time)},pop_gtime4:function(){return X(this.pop_time)},traffic_gtime1:function(){return J(this.traffic_time)},traffic_gtime2:function(){return V(this.traffic_time)},traffic_gtime3:function(){return H(this.traffic_time)},traffic_gtime4:function(){return X(this.traffic_time)},traffic_time1:function(){return Z(this.traffic_time)},traffic_time2:function(){return Q(this.traffic_time)},traffic_time3:function(){return Y(this.traffic_time)},traffic_time4:function(){return tt(this.traffic_time)}},mounted:function(){this.icon=g.icon({iconUrl:"https://image.flaticon.com/icons/png/128/803/803227.png",iconSize:[30,25],iconAnchor:[0,0],popupAnchor:[0,0]}),this.car_icon=g.icon({iconUrl:"http://icons.iconarchive.com/icons/icons-land/transporter/256/Car-Top-Red-icon.png",iconSize:[40,40],iconAnchor:[20,15],popupAnchor:[14,230]});var t=g.map("mapid").setView(this.center,this.zoom);this.map=t,g.tileLayer("http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.refreshMarks();var e=this;C.model.on_load=function(){e.traffic_set_time()}},methods:{refreshMarks:function(){for(var t=0;t<this.mapMarkers.length;t++)this.map.removeLayer(this.mapMarkers[t]);for(var e in this.sign_groups){var i=this.sign_groups[e],n=!0,s=!1,a=void 0;try{for(var r,o=i.signs[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;i.signs[l];this.addSign(l,i)}}catch(t){s=!0,a=t}finally{try{n||null==o.return||o.return()}finally{if(s)throw a}}}this.uploadCars()},addSign:function(t,e){t.group=e,t.show&&(e.sign_marker=t);var i=new g.marker(t.position,{icon:this.icon});t.show&&i.bindTooltip(String(e.time),{permanent:!0,className:"my-label",opacity:.8,offset:[15,5]}),i.addTo(this.map),this.mapMarkers.push(i),i.sign=t,t.marker=i;var n=this;i.on("click",function(t){n.traffic_dialog_update(t.target.sign)}),i.on("mouseover",function(e){n.pop_visible=!0,n.pop_left=e.containerPoint.x+25,n.pop_top=e.containerPoint.y-20,n.pop_isGreen=t.isGreen,n.pop_position=t.position,n.pop_time=t.group.time,i.openPopup()}),i.on("mouseout",function(t){n.pop_visible=!1})},calOnOver:function(t){t.sign_marker.marker.unbindTooltip(),t.sign_marker.marker.bindTooltip(String(t.time),{permanent:!0,className:"my-label-show",opacity:.9,offset:[15,5]})},calOffOver:function(t){t.sign_marker.marker.unbindTooltip(),t.sign_marker.marker.bindTooltip(String(t.time),{permanent:!0,className:"my-label",opacity:.8,offset:[15,5]})},traffic_show:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var e in this.sign_groups){var i=this.sign_groups[e],n=t[i.id],s=parseInt(n);i.time!=s?(i.changeTime=Date.now(),i.time=parseInt(n),i.sign_marker.marker.unbindTooltip(),i.sign_marker.marker.bindTooltip(String(n),{permanent:!0,className:"my-label-show",opacity:.9,offset:[15,5]})):void 0!=i.changeTime&&Date.now()-i.changeTime>2e3&&(i.changeTime=void 0,i.sign_marker.marker.unbindTooltip(),i.sign_marker.marker.bindTooltip(String(i.time),{permanent:!0,className:"my-label",opacity:.9,offset:[15,5]}))}},traffic_load:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var n in this.sign_groups){var s=this.sign_groups[n];this.traffic_set_group(s,t[s.id]),this.calOffOver(s)}e&&this.traffic_set_time(i)},traffic_set_group:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.time=parseInt(e),this.sign_times[t.id]=t.time,t.sign_marker.marker.setTooltipContent(String(e)),i&&this.traffic_set_time()},traffic_set_time:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var e in this.sign_groups){var i=this.sign_groups[e];this.sign_times[i.id]=i.time}this.time=C.model.predict(this.sign_times),t&&this.$message({showClose:!0,type:"warning",message:"New Traffic result: "+Math.round(this.time)})},traffic_dialog_confirm:function(){this.traffic_set_group(this.traffic_group,this.traffic_time,!0),this.traffic_dialog_off()},traffic_dialog_off:function(){this.calOffOver(this.traffic_group),this.traffic_visible=""},traffic_dialog_update:function(t){var e=this.map.getBounds();e=Math.abs(e.getWest()-e.getEast()),this.map.panTo([t.position[0],t.position[1]+.4*e]),this.calOnOver(t.group),this.traffic_signs=t.group.signs,this.traffic_group=t.group,this.traffic_visible="traffic",this.traffic_time=t.group.time},uploadCars:function(){},showCalculation:function(){this.panelType="cal"==this.panelType?"":"cal"},chart_add:function(t,e){this.myChart.data.labels.push(t),this.myChart.data.datasets[0].data.push(e),this.myChart.update()},init_chart:function(){var t=document.getElementById("myChart");this.myChart=new Chart(t,{labels:["Traffic score"],borderWidth:1,type:"line",data:{datasets:[{backgroundColor:"rgba(255,99,132,1)",borderColor:"rgba(255,99,132,1)",label:"Traffic score",labels:[],data:[]}]},options:{legend:{display:!1,labels:{fontColor:"#000080"}},scales:{xAxes:[{display:!1,scaleLabel:{display:!1,labelString:"Iteration"},ticks:{stepSize:10}}],yAxes:[{display:!0,beginAtZero:!0,scaleLabel:{display:!1,labelString:"Traffic Score"}}]}}})},loading_open:function(){},simulation_open:function(){this.isSimulation_open=!0,this.isSimulation_finish=!0,this.isSimulation_text="Click download to get all simulations"},simulation_loop_status:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isSumulation_downloading){t.next=6;break}return this.isSimulation_text="Waiting for calculations: "+Math.round((Date.now()-this.isSumulation_loading_time)/1e3)+"s",t.next=4,et(500);case 4:t.next=0;break;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),simulation_init:function(){this.simulation=[],void 0!=this.simulation_markers&&this.simulation_markers.clear_cars(),this.simulation_markers=g.Marker.movingMarker(this.map,this.simulation)},simulation_download_times:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,e.simulation=[],e.isSimulation_text="Download simulations: ",e.simulation_time=0,e.simulation_init(),i=0;case 6:if(!(i<600)){t.next=26;break}return this.isSimulation_text="Download simulations: "+(i+1)+"/600",n='{"time":"'+String(i)+'"}',t.t0=JSON,t.next=12,it(K,n);case 12:if(t.t1=t.sent,s=t.t0.parse.call(t.t0,t.t1),s=u(s.cars),e.simulation_markers.add_values(s),e.simulation.push(s),e.simulation_time=i,e.simulation_markers.car_set(i),e.isSumulation_loading){t.next=21;break}return t.abrupt("break",26);case 21:return t.next=23,et(100);case 23:i++,t.next=6;break;case 26:e.isSimulation_text="Simulation downloaded",e.isSumulation_finish=!0,e.isSumulation_loading=!1,e.simulation_time=0,e.simulation_markers.car_set(0);case 31:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_download:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSumulation_loading=!0,e=JSON.stringify({settings:JSON.stringify(this.sign_times)}),this.simulation_time=0,this.isSumulation_loading=!0,this.isSumulation_downloading=!0,this.isSumulation_loading_time=Date.now(),this.isSumulation_finish=!1,i=this,n=new XMLHttpRequest,n.timeout=1e5,n.onreadystatechange=function(){if(4==this.readyState&&(200==this.status||201==this.status)){var t=JSON.parse(this.response);i.isSumulation_downloading=!1,i.simulation_score=t.score,i.simulation_download_times()}},n.open("POST",$),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(e),this.simulation_loop_status(n),t.next=17,et(500);case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_close:function(){this.isSimulation_open=!1},loading_close:function(){this.isLoading_open=!1},genetic_calculate:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSimulation_open=!1,this.isLoading_finish=!1,this.isLoading_text="Running",this.isLoading=!0,this.isLoading_open=!0,this.isShowGenetic=!1,this.panelType="",this.map.panTo([52.2176205,20.9740354]),t.next=10,et(500);case 10:return this.init_chart(),e=this,[],t.prev=13,t.next=16,C.run(function(t,i,n,s,a,r){t&&(e.isLoading_finish=!0,e.isLoading_text="Finished calculation",e.traffic_load(i,!0,!1))},e.genetic_config,function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(i,n,s){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.chart_add(i,s.fitness),e.traffic_show(s.entity,i%6==0),e.isLoading_text="Running: "+i+"/"+n,e.isLoading_score=String(Math.round(s.fitness))+" s",t.next=6,et(1);case 6:case"end":return t.stop()}},t,this)}));return function(e,i,n){return t.apply(this,arguments)}}());case 16:t.next=21;break;case 18:t.prev=18,t.t0=t["catch"](13),console.log(t.t0);case 21:case"end":return t.stop()}},t,this,[[13,18]])}));return function(){return t.apply(this,arguments)}}(),showSimulation:function(){this.panelType="sim"==this.panelType?"":"sim"},simulation_load:function(){this.simulation_time=0},simulation_change:function(t){void 0!=this.simulation_markers&&this.simulation_markers.car_set(t)},simulation_play:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isSimulation_play=!0,e=function(t){return new Promise(function(e){return setTimeout(e,t)})},void 0==this.simulation_markers){t.next=14;break}i=this.simulation_time;case 4:if(!(i<this.simulation_markers.size())){t.next=14;break}if(this.isSimulation_play){t.next=7;break}return t.abrupt("return");case 7:return this.simulation_time=i,this.simulation_markers.car_set(i),t.next=11,e(200);case 11:i++,t.next=4;break;case 14:return this.isSimulation_play=!1,t.abrupt("return");case 16:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_pause:function(){this.isSimulation_play=!1},playCars:function(){this.map.removeLayer(this.car);var t=g.Marker.movingMarker([[52.221,20.9853],[52.2163,20.9811]],[5e3],{icon:this.car_icon,rotationAngle:-58}).addTo(this.map),e=this;t.addEventListener("end",function(i){e.map.removeLayer(t),e.uploadCars()}),t.start()}}},st=nt,at=(i("bb97"),Object(E["a"])(st,r,o,!1,null,null,null));at.options.__file="mymap.vue";var rt=at.exports;"http:"!=window.location.protocol&&(window.location.protocol="http:");var ot={data:function(){return{map:null}},name:"app",components:{mymap:rt}},lt=ot,ct=(i("5c0b"),i("b0a0"),Object(E["a"])(lt,s,a,!1,null,null,null));ct.options.__file="App.vue";var ut=ct.exports,ft=i("5c96"),_t=i.n(ft),mt=(i("0fae"),i("b2d6")),ht=i.n(mt);n["default"].use(_t.a,{locale:ht.a}),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(ut)}}).$mount("#app")},5741:function(t,e,i){"use strict";var n=i("06de"),s=i.n(n);s.a},"5c0b":function(t,e,i){"use strict";var n=i("106f"),s=i.n(n);s.a},6121:function(t,e,i){"use strict";var n=i("bb87"),s=i.n(n);s.a},b0a0:function(t,e,i){"use strict";var n=i("2e89"),s=i.n(n);s.a},bb87:function(t,e,i){},bb97:function(t,e,i){"use strict";var n=i("09db"),s=i.n(n);s.a}});
//# sourceMappingURL=app.7ccd53cc.js.map