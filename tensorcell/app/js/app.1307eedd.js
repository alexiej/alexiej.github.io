(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],_=0,f=[];_<o.length;_++)r=o[_],a[r]&&f.push(a[r][0]),a[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],n=!0,o=1;o<i.length;o++){var l=i[o];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},a={app:0},s=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"0019":function(t,e,i){t.exports=i.p+"img/info05.ad584bc6.png"},"06de":function(t,e,i){},"075a":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("55dd"),core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_array_sort__WEBPACK_IMPORTED_MODULE_0__),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("96cf"),regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(regenerator_runtime_runtime__WEBPACK_IMPORTED_MODULE_1__),C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("3040"),C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_typeof__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("6bde"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("3b2b"),core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es6_regexp_constructor__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("6b54"),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("cadf"),core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_es6_array_iterator__WEBPACK_IMPORTED_MODULE_6__),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("551c"),core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(core_js_modules_es6_promise__WEBPACK_IMPORTED_MODULE_7__),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("097d"),core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(core_js_modules_es7_promise_finally__WEBPACK_IMPORTED_MODULE_8__),Genetic=Genetic||function(){var Serialization={stringify:function(t){return JSON.stringify(t,function(t,e){return e instanceof Function||"function"==typeof e?"__func__:"+e.toString():e instanceof RegExp?"__regex__:"+e:e})},parse:function parse(str){return JSON.parse(str,function(key,value){return"string"!=typeof value?value:0===value.lastIndexOf("__func__:",0)?eval("("+value.slice(9)+")"):0===value.lastIndexOf("__regex__:",0)?eval("("+value.slice(10)+")"):value})}},Clone=function(t){return null==t||"object"!=Object(C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_typeof__WEBPACK_IMPORTED_MODULE_3__["a"])(t)?t:JSON.parse(JSON.stringify(t))},Optimize={Maximize:function(t,e){return t>=e},Minimize:function(t,e){return t<e}},Select1={Tournament2:function(t){var e=t.length,i=t[Math.floor(Math.random()*e)],n=t[Math.floor(Math.random()*e)];return this.optimize(i.fitness,n.fitness)?i.entity:n.entity},Tournament3:function(t){var e=t.length,i=t[Math.floor(Math.random()*e)],n=t[Math.floor(Math.random()*e)],a=t[Math.floor(Math.random()*e)],s=this.optimize(i.fitness,n.fitness)?i:n;return s=this.optimize(s.fitness,a.fitness)?s:a,s.entity},Fittest:function(t){return t[0].entity},Random:function(t){return t[Math.floor(Math.random()*t.length)].entity},RandomLinearRank:function(t){return this.internalGenState["rlr"]=this.internalGenState["rlr"]||0,t[Math.floor(Math.random()*Math.min(t.length,this.internalGenState["rlr"]++))].entity},Sequential:function(t){return this.internalGenState["seq"]=this.internalGenState["seq"]||0,t[this.internalGenState["seq"]++%t.length].entity}},Select2={Tournament2:function(t){return[Select1.Tournament2.call(this,t),Select1.Tournament2.call(this,t)]},Tournament3:function(t){return[Select1.Tournament3.call(this,t),Select1.Tournament3.call(this,t)]},Random:function(t){return[Select1.Random.call(this,t),Select1.Random.call(this,t)]},RandomLinearRank:function(t){return[Select1.RandomLinearRank.call(this,t),Select1.RandomLinearRank.call(this,t)]},Sequential:function(t){return[Select1.Sequential.call(this,t),Select1.Sequential.call(this,t)]},FittestRandom:function(t){return[Select1.Fittest.call(this,t),Select1.Random.call(this,t)]}};function Genetic(){this.fitness=null,this.seed=null,this.mutate=null,this.model=null,this.crossover=null,this.select1=null,this.select2=null,this.optimize=null,this.generation=null,this.notification=null,this.configuration={size:250,crossover:.9,mutation:.2,iterations:100,fittestAlwaysSurvives:!0,maxResults:100,webWorkers:!0,skip:0},this.userData={},this.internalGenState={},this.entities=[],this.usingWebWorker=!1,this.start=Object(C_PUBLIC_PROJECTS_FINAL_TensorTraffic_tensortrafficonline_node_modules_babel_runtime_helpers_builtin_es6_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a,s,r,o,l,c,u,_,f;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(n=function(t){return Math.random()<=i.configuration.mutation&&i.mutate?i.mutate(Clone(t)):t},i=this,e=0;e<this.configuration.size;++e)this.entities.push(Clone(this.seed()));e=0;case 4:if(!(e<this.configuration.iterations)){t.next=25;break}if(this.internalGenState={},a=this.entities.map(function(t){return{fitness:i.fitness(t),entity:t}}).sort(function(t,e){return i.optimize(t.fitness,e.fitness)?-1:1}),void 0==i.notify){t.next=10;break}return t.next=10,i.notify(e,this.configuration.iterations,a[0]);case 10:if(s=a.reduce(function(t,e){return t+e.fitness},0)/a.length,r=Math.sqrt(a.map(function(t){return(t.fitness-s)*(t.fitness-s)}).reduce(function(t,e){return t+e},0)/a.length),o={maximum:a[0].fitness,minimum:a[a.length-1].fitness,mean:s,stdev:r},l=!this.generation||this.generation(a,e,o),c="undefined"!=typeof l&&!l||e==this.configuration.iterations-1,this.notification&&(c||0==this.configuration["skip"]||e%this.configuration["skip"]==0)&&this.sendNotification(a.slice(0,this.maxResults),e,o,c),!c){t.next=18;break}return t.abrupt("break",25);case 18:u=[],this.configuration.fittestAlwaysSurvives&&u.push(a[0].entity);while(u.length<i.configuration.size)this.crossover&&Math.random()<=this.configuration.crossover&&u.length+1<i.configuration.size?(_=this.select2(a),f=this.crossover(Clone(_[0]),Clone(_[1])).map(n),u.push(f[0],f[1])):u.push(n(i.select1(a)));this.entities=u;case 22:++e,t.next=4;break;case 25:case"end":return t.stop()}},t,this)})),this.sendNotification=function(t,e,i,n){var a={pop:t.map(Serialization.stringify),generation:e,stats:i,isFinished:n};this.notification(a.pop.map(Serialization.parse),a.generation,a.stats,a.isFinished)}}return Genetic.prototype.evolve=function(t,e){var i;for(i in t)this.configuration[i]=t[i];for(i in e)this.userData[i]=e[i];this.usingWebWorker=!1,this.start()},{create:function(){return new Genetic},Select1:Select1,Select2:Select2,Optimize:Optimize,Clone:Clone}}();__webpack_exports__["a"]=Genetic},"09db":function(t,e,i){},"0add":function(t,e,i){t.exports=i.p+"img/info04.b3d19af9.png"},1:function(t,e){},"106f":function(t,e,i){},"1dba":function(t,e,i){t.exports=i.p+"img/info03.ff367c36.png"},2:function(t,e){},"2e89":function(t,e,i){},3:function(t,e){},4:function(t,e){},4678:function(t,e,i){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function a(t){var e=s(t);return i(e)}function s(t){var e=n[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}a.keys=function(){return Object.keys(n)},a.resolve=s,t.exports=a,a.id="4678"},5:function(t,e){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var n=i("2b0e"),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("mymap",{attrs:{id:"mapObject"}})],1)},s=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-view",attrs:{id:"map"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading_screen,expression:"isLoading_screen"}],staticClass:"loading-screen2"},[n("h1",[t._v(t._s(t.isLoading_screenText))]),t._m(0)]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.speed_visible,expression:"speed_visible"}],staticClass:"popup-dialog",style:{left:t.speed_left+"px",top:t.speed_top+"px"}},[n("div",{staticClass:"speed"},[t._v(t._s(t.speed_text))])])]),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.pop_visible,expression:"pop_visible"}],staticClass:"popup-dialog",style:{left:t.pop_left+"px",top:t.pop_top+"px"}},[(t.pop_isGreen?t.pop_gtime1:t.pop_time1)>0?n("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime1:t.pop_time1)+" s")]):t._e(),n("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime2:t.pop_time2)+" s")]),n("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(t.pop_isGreen?t.pop_gtime3:t.pop_time3)+" s ")]),(t.pop_isGreen?t.pop_gtime4:t.pop_gtime4>0)?n("div",{staticClass:"light",style:{"background-color":t.pop_isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s((t.pop_isGreen,t.pop_gtime4))+" s ")]):t._e()])]),n("el-dialog",{attrs:{visible:t.isSimulation_statistics_open,width:"90%",title:"Traffic Statistics (² - second simulation to compare)"},on:{open:t.simulation_statistics_open,close:function(e){t.isSimulation_statistics_open=!1}}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:Object.values(t.sign_groups),border:"",align:"center","header-align":"center"}},[n("el-table-column",{attrs:{prop:"name",label:"Name"}}),n("el-table-column",{attrs:{prop:"position",label:"Position"}}),n("el-table-column",{attrs:{prop:"offset",label:"Offset set of the traffic",width:"100"}}),n("el-table-column",{attrs:{prop:"avg_cars",label:"Average number of nearest cars",width:"200"}}),n("el-table-column",{attrs:{prop:"avg_waiting",label:"Average number of cars waiting on a red signal",width:"200"}}),n("el-table-column",{attrs:{prop:"avg_speed",label:"Average Speed",width:"200"}})],1)],1),n("el-dialog",{staticClass:"loading-dialog",staticStyle:{"z-index":"100001"},attrs:{visible:t.isSimulation_open,id:"simulation","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!t.isSumulation_loading,modal:!1,"modal-append-to-body":!1,"append-to-body":!1,title:t.isSimulation_text},on:{open:t.loading_open,close:t.simulation_close}},[n("div",{staticClass:"content"},[t.isSumulation_loading?n("div",{staticClass:"loader"}):t._e(),n("el-button",{staticStyle:{"margin-right":"15px"},attrs:{type:"danger",disabled:t.isSumulation_loading,plain:"",icon:"el-icon-caret-right"},on:{click:t.simulation_download}},[t._v(" Run Simulation")]),n("el-tooltip",{attrs:{content:"Export Simulation",placement:"top",effect:"light"}},[n("span",[n("el-button",{attrs:{type:"primary",disabled:!t.isSumulation_finish,plain:"",icon:"el-icon-upload2"},on:{click:t.simulation_export}})],1)]),n("el-tooltip",{attrs:{content:"Import Simulation",placement:"top",effect:"light"}},[n("span",[n("el-button",{attrs:{type:"primary",disabled:t.isSumulation_loading,plain:"",icon:"el-icon-download"},on:{click:t.simulation_import}})],1)]),n("el-tooltip",{attrs:{content:" Import To Compare",placement:"top",effect:"light"}},[n("span",[n("el-button",{attrs:{type:"warning",disabled:!t.isSumulation_finish,plain:"",icon:"el-icon-sort"},on:{click:t.simulation_import_compare}})],1)]),n("el-tooltip",{attrs:{content:"Traffic Statistics",placement:"top",effect:"light"}},[n("span",[n("el-button",{attrs:{type:"warning",disabled:!t.isSumulation_finish,plain:""},on:{click:function(e){t.isSimulation_statistics_open=!0}}},[n("i",{staticClass:"far fa-chart-bar"})])],1)]),n("el-tooltip",{staticStyle:{"margin-left":"15px"},attrs:{content:"Cancel",placement:"top",effect:"light"}},[n("span",[!t.isSumulation_downloading&&t.isSumulation_loading?n("el-button",{attrs:{type:"danger",plain:""},on:{click:function(e){t.stop_download("Cancelled",t.simulation_time,"warning")}}},[n("i",{staticClass:"fas fa-stopwatch"})]):t._e()],1)]),n("div",{staticStyle:{height:"180px"}},[n("canvas",{attrs:{id:"myChart_sim",width:"600",height:"140"}})])],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",{staticClass:"block",attrs:{id:"simulation_block"}},[t.isSimulation_play?n("el-button",{attrs:{type:"primary",disabled:!t.isSumulation_finish,round:""},on:{click:t.simulation_pause}},[n("i",{staticClass:"fas fa-pause"})]):n("el-button",{attrs:{type:"success",icon:"el-icon-caret-right",disabled:!t.isSumulation_finish,round:""},on:{click:t.simulation_play}}),n("el-slider",{attrs:{disabled:!t.isSumulation_finish,min:0,max:t.simulation.length,"show-input":""},on:{change:t.simulation_change},model:{value:t.simulation_time,callback:function(e){t.simulation_time=e},expression:"simulation_time"}})],1)])]),n("el-dialog",{staticClass:"loading-dialog",staticStyle:{"z-index":"100001","margin-top":"0"},attrs:{visible:t.isLoading_open,id:"loadingdialog","show-close":t.isLoading_finish,"close-on-click-modal":t.isLoading_finish,"close-on-press-escape":t.isLoading_finish,title:t.isLoading_text,width:"60%"},on:{open:t.loading_open,close:t.loading_close}},[t.isLoading_finish?t._e():n("div",{staticClass:"loader"}),n("strong",{staticClass:"score-header"},[n("strong",{staticClass:"score"},[t._v(t._s(t.isLoading_score))])]),n("canvas",{attrs:{id:"myChart",width:"600",height:"170"}})]),n("el-dialog",{staticClass:"traffic_dialog",attrs:{id:"traffic_info",title:"Info (v 1.0.1)",visible:"info"==t.traffic_visible,width:"650px",center:""},on:{close:function(e){t.traffic_visible=""}}},[n("span",[n("h2",[t._v("Goal")]),n("hr"),n("p",[t._v("The goal of the project is to visualize our traffic signal control algorithms.")]),n("br"),n("h2",[t._v("Representation")]),n("hr"),n("p",[t._v("The\n          "),n("strong",[t._v("map")]),t._v(" presents traffic signal settings for 21 crossroads at\n          "),n("strong",[t._v("Stara Ochota district in Warsaw")]),t._v(".\n          "),n("br"),n("br"),t._v(" Each number next to a traffic signal is an offset - number from the set {0,1,2,...,119} representing the number of seconds from the beginning of the simulation to the first switch from a\n          "),n("strong",[t._v("red")]),t._v(" signal phase to a\n          "),n("strong",[t._v("green")]),t._v(" signal phase for a given signal. For each crossroad, we visualize offsets only for 1 traffic signal being a representative of the whole crossroad (the rest is synchronized to ensure traffic safety), to see the complete configuration of red and green signal states, one should click on a given traffic signal - then, it is possible to modify offsets.")]),n("br"),n("h2",[t._v("Current Settings")]),n("hr"),n("p",[t._v("In the current setting, we assume that durations of red signal phases are always 62 seconds, while durations of green signal phases are always 58 seconds. ")]),n("br"),n("p",[t._v("For each setting, we compute\n          "),n("strong",[t._v('"Traffic score"')]),t._v(": the total time of waiting on red signals during\n          "),n("strong",[t._v("10 minutes of traffic")]),t._v(" (we can simulate it, but we can also use machine learning algorithms, trained on data from simulations to speed up evaluations). ")]),n("p",[t._v("We can also run an optimization algorithm (based on a genetic algorithm) to find a good setting (we can run it using the\n          "),n("strong",[t._v('"Find best setting"')]),t._v(" button).")]),n("br"),n("h2",[t._v("Change Values")]),n("hr"),n("p",[t._v("Possibility to change a value of the offset for the traffic signal at crossroad “2” (highlighted on the left side of the map).")]),n("br"),n("img",{attrs:{src:i("6d8c"),alt:""}}),n("br"),n("p",[t._v("\nIt is also possible to click “Find best setting” which opens a windows allowing to set values of parameters of a simple version of our genetic algorithm, configured to find (sub)optimal settings of traffic signal offsets.\n\n")]),n("br"),n("img",{attrs:{src:i("7256"),alt:""}}),n("br"),n("p",[t._v("\n  When values are properly set and we click “Run Genetic Algorithm”, we can observe a run of the genetic algorithm instance and see on a chart how it finds better and better settings of traffic signals, which reduces values of the fitness function (the total time of waiting on a red signal) over time (Figure 7). It is possible to see the best value found so far in the top-right corner of the chart. The the best value found by a given run of the genetic algorithm is compared with the best value found so far (in all previous runs of a user) and the best value (and best signal offset settings) can be replaced.\n\n")]),n("br"),n("strong",[n("img",{attrs:{src:i("1dba"),alt:""}}),t._v("\nFigure 7:\n")]),n("i",[t._v("Chart presenting evolution of the genetic algorithm and values of the fitness function (the total time of waiting on a red signal) for best settings founds in successive iterations.")]),n("br"),n("br"),n("p",[t._v("\n  Even if the genetic algorithm run doesn’t find better setting, it is always possible to “Load Best Solution” found so far by clicking the corresponding button in the “Traffic score” panel.\n"),n("br"),t._v("\nWhen we want to investigate the given traffic signal setting with more details, we can click the “Simulation” button in the top-right corner of the map,which opens additional window giving opportunity to run a traffic simulation (Figure 8).\n")]),n("br"),n("strong",[n("img",{attrs:{src:i("0add"),alt:""}}),t._v("\nFigure 8:\n")]),n("i",[t._v("Window with options to run new traffic simulation (or import the simulation generated previously).")]),n("br"),n("br"),n("p",[t._v('\n  When we click "Run Simulation” the app sends a new request to the microservice with a traffic simulation, which computes positions and speeds of cars in every seconds, for a given setting of traffic signals. Then, after receiving response from microservice, the app starts visualizing simulation (Figure 9) and shows a chart presenting the average speed (Figure 10).\n')]),n("br"),n("strong",[n("img",{attrs:{src:i("0019"),alt:""}}),t._v("\nFigure 9:\n")]),t._v("\nWindow with options to run new traffic simulation (or import the simulation generated previously).\n"),n("br"),n("br"),n("strong",[n("img",{attrs:{src:i("769a"),alt:""}}),t._v("\nFigure 10:\n")]),n("i",[t._v(" The average speed of all cars during the simulation.")]),n("br"),n("br"),n("p",[t._v("\nAfter the end of the simulation (600 steps = 600 seconds of traffic), we can export the simulation the an external file, in order to import in later, or see Traffic Statistics (Figure 10). Among statistics computed during the simulation, we have the average number of cars in a proximity of a given traffic signal (per second), average speed of that cars and the average number of cars waiting on a red signal at the end of a given road segment. The information is displayed for all 21 crossroads (the “Name” is just a name of the street leading to the traffic signal being a representative of a given crossroad, “Position” contains its geographical coordinates (in WGS84).\n")]),n("br"),n("strong",[n("img",{attrs:{src:i("769a"),alt:""}}),t._v("\nFigure 11:\n")]),n("i",[t._v("Table presenting statistics of the simulation.")]),n("br"),n("br"),n("p",[t._v("\n  When we click “Run simulation” the app sends a new request to the microservice with a traffic simulation, which computes positions and speeds of cars in every seconds, for a given setting of traffic signals. Then, after receiving response from microservice, the app starts visualizing simulation (Figure 9) and shows a chart presenting the average speed (Figure 10).\n")])])]),n("el-dialog",{staticClass:"traffic_dialog",attrs:{id:"traffic_dialog_id",title:"Update an offset for a traffic signal",visible:"traffic"==t.traffic_visible,width:"40%",center:""},on:{close:t.traffic_dialog_off}},[n("span",[n("strong",[t._v(t._s(t.traffic_group.name))]),t._v(":  The signal starts from time 0 and its state is calculated by the offset of the value: ")]),n("el-slider",{staticClass:"mt-2",attrs:{"show-input":"",placeholder:"Please input",min:0,max:120},model:{value:t.traffic_time,callback:function(e){t.traffic_time=e},expression:"traffic_time"}}),t._l(t.traffic_signs,function(e){return n("div",{key:e.id},[n("span",{staticClass:"quote"},[t._v("Traffic signal at position: "+t._s(e.position)+" ")]),n("div",{staticClass:"line"},[n("img",{staticClass:"first",attrs:{src:"signal.png",alt:""}}),n("div",{staticClass:"color123 ",style:{width:(e.isGreen?t.traffic_gtime1:t.traffic_time1)/60*100+"%","background-color":e.isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime1:t.traffic_time1))]),n("div",{staticClass:"color123",style:{width:(e.isGreen?t.traffic_gtime2:t.traffic_time2)/60*100+"%","background-color":e.isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime2:t.traffic_time2))]),n("div",{staticClass:"color123",style:{width:(e.isGreen?t.traffic_gtime3:t.traffic_time3)/60*100+"%","background-color":e.isGreen?"#67c23a":"#f56c6c"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime3:t.traffic_time3)+" ")]),n("div",{staticClass:"color123 ",style:{width:(e.isGreen?t.traffic_gtime4:t.traffic_time4)/60*100+"%","background-color":e.isGreen?"#f56c6c":"#67c23a"}},[t._v(" "+t._s(e.isGreen?t.traffic_gtime4:t.traffic_time4)+" ")]),n("div")]),n("div")])}),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.traffic_dialog_off}},[t._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:t.traffic_dialog_confirm}},[t._v("Update Offset")])],1)],2),t.isShowGenetic?n("MessageBox",{attrs:{title:"Parameters of a genetic algorithm",ok:"Run Genetic Algorithm"},on:{cancel:function(e){t.isShowGenetic=!1},run:function(e){t.genetic_calculate()}}},[n("el-form",{ref:"form",attrs:{model:t.genetic_config,"label-width":"170px"}},[n("el-form-item",{attrs:{label:"Number of iterations"}},[n("el-input",{model:{value:t.genetic_config.iterations,callback:function(e){t.$set(t.genetic_config,"iterations",e)},expression:"genetic_config.iterations"}})],1),n("el-form-item",{attrs:{label:"Population size"}},[n("el-input",{model:{value:t.genetic_config.size,callback:function(e){t.$set(t.genetic_config,"size",e)},expression:"genetic_config.size"}})],1),n("el-form-item",{attrs:{label:"Probability of crossover"}},[n("el-popover",{staticClass:"traffic-score",attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:"When two individuals are selected for mating."}},[n("el-input",{attrs:{slot:"reference"},slot:"reference",model:{value:t.genetic_config.crossover,callback:function(e){t.$set(t.genetic_config,"crossover",e)},expression:"genetic_config.crossover"}})],1)],1),n("el-form-item",{attrs:{label:"Probability of mutation"}},[n("el-popover",{staticClass:"traffic-score",attrs:{placement:"right",title:"",width:"200",trigger:"hover",content:"Probability of change single single chromosome during mutation to prevent local minima."}},[n("el-input",{attrs:{slot:"reference"},slot:"reference",model:{value:t.genetic_config.mutation,callback:function(e){t.$set(t.genetic_config,"mutation",e)},expression:"genetic_config.mutation"}})],1)],1)],1)],1):t._e(),n("div",{attrs:{id:"mapid"}}),n("div",{staticClass:"panel-info"},[n("el-popover",{staticClass:"traffic-score",attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:"The total time of waiting on  a red signal for the current signal setting configuration"}},[n("el-button",{staticClass:"traffic-score",attrs:{slot:"reference",type:"primary",plain:""},on:{click:t.showCalculation},slot:"reference"},[n("i",{staticClass:"fas fa-trophy"}),t._v(" Traffic score: "+t._s(Math.round(t.time,2))+" s")])],1),n("el-button",{attrs:{type:"danger",plain:""},on:{click:t.simulation_open}},[n("i",{staticClass:"fas fa-car"}),t._v(" Simulation "),""!=t.simulation_score?n("span",[t._v(t._s(t.simulation_score)+" s")]):t._e()]),n("el-button",{attrs:{type:"primary",id:"info-button",plain:""},on:{click:function(e){t.traffic_visible="info"}}},[n("i",{staticClass:"el-icon-question"}),t._v(" Info")]),n("el-button",{attrs:{type:"primary",id:"home-button",circle:""},on:{click:t.router_home}},[n("i",{staticClass:"fas fa-home"})])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:"cal"==t.panelType,expression:"panelType=='cal'"}],staticClass:"panel-show"},[n("el-button",{staticClass:"calculation",attrs:{type:"warning",plain:""},on:{click:function(e){t.isShowGenetic=!0}}},[n("i",{staticClass:"fas fa-calculator"}),t._v(" Find best setting")]),n("span"),n("el-popover",{attrs:{placement:"top-start",title:"",width:"200",trigger:"hover",content:"Load best solution found so far"}},[n("el-button",{staticClass:"calculation",attrs:{slot:"reference",type:"success",plain:""},on:{click:function(e){t.traffic_load(t.best_solution)}},slot:"reference"},[n("i",{staticClass:"fas fa-upload"}),t._v(" Load Best Solution ("+t._s(Math.round(t.best_solution_result))+" s)")])],1),t._l(t.sign_groups,function(e){return n("div",{key:e.id,staticClass:"light",on:{click:function(i){t.traffic_dialog_update(e.sign_marker)},mouseover:function(i){t.calOnOver(e)},mouseout:function(i){t.calOffOver(e)}}},[n("span",{staticClass:"text",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.traffic_dialog_update(e.sign_marker)}}},[t._v("\n          "+t._s(e.id)+":\n        ")]),n("span",{staticClass:"time"},[t._v(t._s(e.time))]),n("span",{staticClass:"inside-icon"},[n("i",{staticClass:" fas fa-traffic-light",on:{click:function(i){if(i.target!==i.currentTarget)return null;t.traffic_dialog_update(e.sign_marker)}}})])])})],2),n("div",{directives:[{name:"show",rawName:"v-show",value:"sim"==t.panelType,expression:"panelType=='sim'"}],staticClass:"panel-show"},[n("div"),n("el-button",{staticClass:"calculation",attrs:{type:"primary",plain:""},on:{click:t.simulation_load}},[t._v("Load Simulation")]),n("el-slider",{attrs:{min:0,max:600},model:{value:t.simulation_time,callback:function(e){t.simulation_time=e},expression:"simulation_time"}}),n("el-button",{attrs:{type:"success",round:"",icon:"el-icon-caret-right"},on:{click:t.simulation_play}},[t._v("Start Simulation")])],1)],1)},o=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"loader2"},[i("div",{staticClass:"loader2__bar"}),i("div",{staticClass:"loader2__bar"}),i("div",{staticClass:"loader2__bar"}),i("div",{staticClass:"loader2__bar"}),i("div",{staticClass:"loader2__bar"}),i("div",{staticClass:"loader2__ball"})])}],l=(i("7f7f"),i("4917"),i("96cf"),i("3040")),c=(i("ac4d"),i("8a81"),i("ac6a"),i("a322")),u=(i("5b20"),i("30dc"),i("829d"),i("a481"),function(t){var e=t.replace(/'/g,'"'),i=JSON.parse(e),n=[],a=!0,s=!1,r=void 0;try{for(var o,l=i[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;n.push(JSON.parse(c))}}catch(t){s=!0,r=t}finally{try{a||null==l.return||l.return()}finally{if(s)throw r}}return n}),_=i("c665"),f=i("aa9a"),m=(i("6b54"),i("28a5"),i("e11e")),h=i.n(m),p=(i("a8b7"),i("baab"),function(t,e,i){t=t.replace(/^\s*#|\s*$/g,""),e=e.replace(/^\s*#|\s*$/g,""),3==t.length&&(t=t.replace(/(.)/g,"$1$1")),3==e.length&&(e=e.replace(/(.)/g,"$1$1"));var n=parseInt(t.substr(0,2),16),a=parseInt(t.substr(2,2),16),s=parseInt(t.substr(4,2),16),r=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),l=parseInt(e.substr(4,2),16),c=r-n,u=o-a,_=l-s;return c=(c*i+n).toString(16).split(".")[0],u=(u*i+a).toString(16).split(".")[0],_=(_*i+s).toString(16).split(".")[0],1==c.length&&(c="0"+c),1==u.length&&(u="0"+u),1==_.length&&(_="0"+_),"#"+c+u+_}),d=function(){function t(e,i,n,a){Object(_["a"])(this,t),this.id=e,this.speed=i,this.lat=n,this.lng=a,this.latlng=h.a.latLng([n,a])}return Object(f["a"])(t,[{key:"toJSON",value:function(){return[this.id,this.speed,this.lat,this.lng]}},{key:"setStyle",value:function(){}},{key:"color",get:function(){return p("#FF0000","#00FF00",Math.min(this.speed/50,1))}}]),t}();h.a.interpolatePosition=function(t,e,i,n){var a=n/i;return a=a>0?a:0,a=a>1?1:a,h.a.latLng(t.lat+a*(e.lat-t.lat),t.lng+a*(e.lng-t.lng))},h.a.Marker.MovingMarker=h.a.Marker.extend({statics:{notStartedState:0,endedState:1,pausedState:2,runState:3},options:{autostart:!1,loop:!1},_add_car:function(t){t.marker=h.a.circleMarker(t.latlng,{color:"transparent",fillColor:t.color,fillOpacity:.8,radius:5}).addTo(this._map),t.id in this._allmarks||(this._allmarks[t.id]=t)},clear_cars:function(){for(var t in this._allmarks)this._map.removeLayer(this._allmarks[t].marker)},car_set:function(t){t>=this._latlngs.length&&(t=this._latlngs.length-1);var e=this._latlngs[t];for(var i in this._allmarks)i in e||this._map.removeLayer(this._allmarks[i].marker);for(var n in e){var a=e[n];if(a.id in this._allmarks){var s=this._allmarks[a.id];s.marker.setLatLng(a.latlng),s.marker.setStyle({fillColor:a.color})}else this._add_car(a)}},size:function(){return void 0!=this._latlngs?this._latlngs.length:0},add_values:function(t){var e={},i=!0,n=!1,a=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value;e[o[0]]=new d(o[0],o[1],o[2],o[3])}}catch(t){n=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}this._latlngs.push(e)},initialize:function(t,e,i,n){this._map=t,this._latlngs=[],this._allmarks={},this.car_on=i,this.car_off=n},isRunning:function(){return this._state===h.a.Marker.MovingMarker.runState},isEnded:function(){return this._state===h.a.Marker.MovingMarker.endedState},isStarted:function(){return this._state!==h.a.Marker.MovingMarker.notStartedState},isPaused:function(){return this._state===h.a.Marker.MovingMarker.pausedState},start:function(){this.isRunning()||(this.isPaused()?this.resume():(this._loadLine(0),this._startAnimation(),this.fire("start")))},resume:function(){this.isPaused()&&(this._currentLine[0]=this.getLatLng(),this._currentDuration-=this._pauseStartTime-this._startTime,this._startAnimation())},pause:function(){this.isRunning()&&(this._pauseStartTime=Date.now(),this._state=h.a.Marker.MovingMarker.pausedState,this._stopAnimation(),this._updatePosition())},stop:function(t){this.isEnded()||(this._stopAnimation(),"undefined"===typeof t&&(t=0,this._updatePosition()),this._state=h.a.Marker.MovingMarker.endedState,this.fire("end",{elapsedTime:t}))},addLatLng:function(t,e){this._latlngs.push(h.a.latLng(t)),this._durations.push(e)},moveTo:function(t,e){this._stopAnimation(),this._latlngs=[this.getLatLng(),h.a.latLng(t)],this._durations=[e],this._state=h.a.Marker.MovingMarker.notStartedState,this.start(),this.options.loop=!1},addStation:function(t,e){t>this._latlngs.length-2||t<1||(this._stations[t]=e)},onAdd:function(t){h.a.Marker.prototype.onAdd.call(this,t),!this.options.autostart||this.isStarted()?this.isRunning()&&this._resumeAnimation():this.start()},onRemove:function(t){h.a.Marker.prototype.onRemove.call(this,t),this._stopAnimation()},_createDurations:function(t,e){for(var i=t.length-1,n=[],a=0,s=0,r=0;r<i;r++)s=t[r+1].distanceTo(t[r]),n.push(s),a+=s;var o=e/a,l=[];for(r=0;r<n.length;r++)l.push(n[r]*o);return l},_startAnimation:function(){this._state=h.a.Marker.MovingMarker.runState,this._animId=h.a.Util.requestAnimFrame(function(t){this._startTime=Date.now(),this._startTimeStamp=t,this._animate(t)},this,!0),this._animRequested=!0},_resumeAnimation:function(){this._animRequested||(this._animRequested=!0,this._animId=h.a.Util.requestAnimFrame(function(t){this._animate(t)},this,!0))},_stopAnimation:function(){this._animRequested&&(h.a.Util.cancelAnimFrame(this._animId),this._animRequested=!1)},_updatePosition:function(){var t=Date.now()-this._startTime;this._animate(this._startTimeStamp+t,!0)},_loadLine:function(t){this._currentIndex=t,this._currentDuration=this._durations[t],this._currentLine=this._latlngs.slice(t,t+2)},_updateLine:function(t){var e=t-this._startTimeStamp;if(e<=this._currentDuration)return e;var i,n=this._currentIndex,a=this._currentDuration;while(e>a){if(e-=a,i=this._stations[n+1],void 0!==i){if(e<i)return this.setLatLng(this._latlngs[n+1]),null;e-=i}if(n++,n>=this._latlngs.length-1){if(!this.options.loop)return this.setLatLng(this._latlngs[this._latlngs.length-1]),this.stop(e),null;n=0,this.fire("loop",{elapsedTime:e})}a=this._durations[n]}return this._loadLine(n),this._startTimeStamp=t-e,this._startTime=Date.now()-e,e},_animate:function(t,e){this._animRequested=!1;var i=this._updateLine(t);if(!this.isEnded()){if(null!=i){var n=h.a.interpolatePosition(this._currentLine[0],this._currentLine[1],this._currentDuration,i);this.setLatLng(n)}e||(this._animId=h.a.Util.requestAnimFrame(this._animate,this,!1),this._animRequested=!0)}}}),h.a.Marker.movingMarker=function(t,e,i,n){return new h.a.Marker.MovingMarker(t,e,i,n)};var g=h.a,v=(i("456d"),function t(e,i,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Object(_["a"])(this,t),this.group_id=e,this.position=i,this.isGreen=n,this.show=a,this.name=s}),b=function(){function t(e,i,n,a,s){Object(_["a"])(this,t),this.id=e,this.group=i,this.time=n,this.signs=s,this.connection=a,this.sign_marker=void 0,this.time2=0}return Object(f["a"])(t,[{key:"name",get:function(){return this.sign_marker?this.sign_marker.name:""}},{key:"position",get:function(){return this.sign_marker?" ["+this.sign_marker.position+"]":""}},{key:"offset",get:function(){return this.time2>0?this.time+" ("+this.time2+"²)":""+this.time}},{key:"avg_cars",get:function(){var t=Math.round(this.cars/600*100)/100,e=Math.round(this.cars2/600*100)/100;return this.time2>0?t+" ("+e+"²)":""+t}},{key:"avg_waiting",get:function(){var t=Math.round(this.waiting_cars/600*100)/100,e=Math.round(this.waiting_cars2/600*100)/100;return this.time2>0?t+" ("+e+"²)":""+t}},{key:"avg_speed",get:function(){var t=Math.round(100*(this.cars>0?this.total_speed/this.cars:0))/100,e=Math.round(100*(this.cars2>0?this.total_speed2/this.cars2:0))/100;return this.time2>0?t+" ("+e+"²)":""+t}}]),t}(),w={28:new b(0,"28",93,["180","182"],[new v("28",[52.2107465,20.9807139],!1,!0,"Stefana Banacha"),new v("28",[52.2105183,20.9803437],!1,!1,"Stefana Banacha"),new v("28",[52.21042710659533,20.98009261723566],!0,!1,"Adolfa Pawińskiego")]),64:new b(1,"64",43,["135","180"],[new v("64",[52.2143666,20.979524],!1,!0,"Grójecka"),new v("64",[52.2144409,20.9792988],!1,!1,"Grójecka")]),98:new b(2,"98",99,["132","135","99"],[new v("98",[52.218917,20.9830513],!1,!0,"Plac Gabriela Narutowicza"),new v("98",[52.21885120357429,20.98281774159479],!0,!1,"Barska")]),99:new b(3,"99",47,["98","283"],[new v("99",[52.2194494,20.9851343],!0,!0,"Filtrowa"),new v("99",[52.21919957115364,20.98484549161005],!1,!1,"Plac Gabriela Narutowicza")]),100:new b(4,"100",53,["103","137"],[new v("100",[52.2199519,20.9709217],!1,!0,"Aleje Jerozolimskie"),new v("100",[52.2197153,20.9712994],!0,!1,"Aleje Jerozolimskie")]),101:new b(5,"101",46,["104","103","289"],[new v("101",[52.2159554,20.9626047],!1,!0,"Bitwy Warszawskiej 1920 roku")]),102:new b(6,"102",86,["103","104"],[new v("102",[52.2176205,20.9600354],!1,!0,"Aleja Prymasa Tysiąclecia")]),103:new b(7,"103",26,["101","104","100"],[new v("103",[52.2168126,20.9614718],!0,!0,"Rondo Zesłańców Syberyjskich")]),104:new b(8,"104",69,["101","103"],[new v("104",[52.215987,20.960864],!0,!0,"Aleje Jerozolimskie")]),131:new b(9,"131",84,["100","132"],[new v("131",[52.2251573,20.9893067],!0,!0,"Aleje Jerozolimskie"),new v("131",[52.2250183,20.9886315],!1,!1,"Aleje Jerozolimskie"),new v("131",[52.2246683,20.9895899],!1,!1,"Aleje Jerozolimskie"),new v("131",[52.2245,20.9889462],!0,!1,"Grójecka")]),132:new b(10,"132",80,["131","98"],[new v("132",[52.22102352660693,20.98529073830652],!0,!0,"Grójecka"),new v("132",[52.22115497996183,20.984866949282168],!1,!1,"Juliana Ursyna Niemcewicza"),new v("132",[52.22111883032801,20.985221000872134],!1,!1,"Juliana Ursyna Niemcewicza"),new v("132",[52.2212135,20.9851842],!0,!1,"Grójecka")]),133:new b(11,"133",115,["134","135"],[new v("133",[52.2161535,20.9880646],!0,!0," Żwirki i Wigury"),new v("133",[52.21660318103435,20.987989040575503],!0,!1,"Raszyńska"),new v("133",[52.21655388101946,20.988235803804873],!1,!1,"Wawelska")]),134:new b(12,"134",76,["133","182"],[new v("134",[52.216527587655825,20.990408393106936],!1,!0,"Wawelska"),new v("134",[52.21643227408212,20.990166994295596],!0,!1,"Andrzeja Krzyckiego"),new v("134",[52.2161807,20.9902419],!0,!1,"Andrzeja Krzyckiego"),new v("134",[52.216327100246204,20.989952417574404],!1,!1,"Wawelska")]),135:new b(13,"135",25,["136","64","98","133"],[new v("135",[52.2163183,20.9813502],!1,!0,"Wawelska"),new v("135",[52.2161868,20.9812472],!0,!1,"Wawelska"),new v("135",[52.2164287,20.981024],!0,!1,"Kopińska"),new v("135",[52.2163078,20.9809468],!1,!1,"Kopińska")]),136:new b(14,"136",43,["137","135"],[new v("136",[52.2176855,20.9773419],!1,!0,"Kopińska"),new v("136",[52.217796224709275,20.977217289171694],!0,!1,"Białobrzeska"),new v("136",[52.217543157516715,20.97704026337671],!0,!1,"Białobrzeska"),new v("136",[52.21767133458667,20.976975890360354],!1,!1,'ppłk. Mieczysława Sokołowskiego "Grzymały"')]),137:new b(15,"137",69,["100","136"],[new v("137",[52.2189896,20.9734108],!1,!0,'ppłk. Mieczysława Sokołowskiego "Grzymały"'),new v("137",[52.21912069571461,20.97330126400995],!0,!1,"Szczęśliwicka"),new v("137",[52.218834771073794,20.97304913636255],!0,!1,"Szczęśliwicka"),new v("137",[52.218949798449465,20.9730223142724],!1,!1,'ppłk. Mieczysława Sokołowskiego "Grzymały"')]),180:new b(16,"180",80,["64","288","28"],[new v("180",[52.2109278,20.9766552],!0,!0,"Bitwy Warszawskiej 1920 roku"),new v("180",[52.2112644,20.9764578],!0,!1,"Stefana Banacha"),new v("180",[52.2111539,20.9768355],!1,!1,"Grójecka"),new v("180",[52.2110751,20.9762604],!1,!1,"Grójecka")]),182:new b(17,"182",65,["28","134"],[new v("182",[52.2101862,20.9880707],!0,!0,"Stefana Banacha"),new v("182",[52.2105428,20.9878242],!0,!1,"Franciszka Żwirki i Stanisława Wigury"),new v("182",[52.2102178,20.9877016],!1,!1,"Franciszka Żwirki i Stanisława Wigury")]),283:new b(18,"283",5,["99","134"],[new v("283",[52.21906811201077,20.989984604082583],!1,!0,"Andrzeja Krzyckiego"),new v("283",[52.21915356049789,20.990118714533324],!0,!1,"Filtrowa"),new v("283",[52.21932445697899,20.989201399050234],!1,!1,"Raszyńska"),new v("283",[52.2191404145875,20.98932478066492],!0,!1,"Filtrowa")]),288:new b(19,"288",35,["289","180"],[new v("288",[52.212497945707526,20.972464414797304],!1,!0,"Bitwy Warszawskiej 1920 roku"),new v("288",[52.21248151085648,20.972780915461062],!1,!1,"Bitwy Warszawskiej 1920 roku"),new v("288",[52.212606415571834,20.972652169428347],!0,!1,"Białorzeska"),new v("288",[52.21240591046344,20.972512694559573],!0,!1,"Białorzeska")]),289:new b(20,"289",72,["101","288"],[new v("289",[52.213955,20.968214],!1,!0,"Bitwy Warszawskiej 1920 roku"),new v("289",[52.213926,20.968563],!1,!1,"Bitwy Warszawskiej 1920 roku"),new v("289",[52.213827,20.968306],!0,!1,"Szczęśliwicka"),new v("289",[52.214093,20.968568],!0,!1,"Szczęśliwicka")])};i("6cc5");var y=i("075a"),k=i("0b53"),S=function(){function t(){Object(_["a"])(this,t),this.cars=[],this.x_scale=[.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336,.00840336],this.y_scale=3251.8414074,this.y_mean=48924.98394408,this.on_load=null}return Object(f["a"])(t,[{key:"load",value:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,k["a"]("./model/model.json");case 2:this.model=t.sent,void 0!=this.on_load&&this.on_load(this);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"predict",value:function(t){for(var e=t.slice(0),i=0;i<e.length;i++)e[i]=t[i]*this.x_scale[i];var n=[];n[0]=e;var a=k["b"](n),s=this.model.predict(a);return s.dataSync()[0]*this.y_scale+this.y_mean}}]),t}(),x=new S;x.load(),window.Simulation=x;var j=x,C=y["a"].create();C.optimize=y["a"].Optimize.Minimize,C.select1=y["a"].Select1.Tournament2,C.select2=y["a"].Select2.Tournament2,C.get_val=function(){return Math.floor(120*Math.random())},C.model=j,C.seed=function(){var t=this;function e(e){for(var i=[],n=0;n<e;n++)i.push(t.get_val());return i}var i=e(21);return i},C.mutate=function(t){function e(t,e,i){var n=t.slice(0);return n[e]=i,n}var i=Math.floor(Math.random()*t.length);return e(t,i,this.get_val())},C.crossover=function(t,e){var i=t.length,n=Math.floor(Math.random()*i),a=Math.floor(Math.random()*i);if(n>a){var s=a;a=n,n=s}var r=e.slice(0,n).concat(t.slice(n,n+a-n)).concat(e.slice(a)),o=t.slice(0,n).concat(e.slice(n,n+a-n)).concat(t.slice(a));return[r,o]},C.fitness=function(t){return this.model.predict(t)},C.generation=function(t,e,i){return!0},C.run=function(t,e,i){C.notify=i,C.notification=function(e,i,n,a){t(a,e[0].entity,e[0].fitness,e,i,n)};var n={length:21,max_val:120};C.evolve(e,n)};var M=C,T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"el-message-box__wrapper",staticStyle:{"z-index":"2001"},attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":"Tip"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$emit("run")}}},[i("div",{staticClass:"el-message-box",staticStyle:{"z-index":"3001"}},[i("div",{staticClass:"el-message-box__header"},[i("div",{staticClass:"el-message-box__title"},[i("span",[t._v(t._s(t.title))])]),i("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.$emit("cancel")}}},[i("i",{staticClass:"el-message-box__close el-icon-close"})])]),i("div",{staticClass:"el-message-box__content"},[t._t("default")],2),i("div",{staticClass:"el-message-box__btns"},[i("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(e){t.$emit("cancel")}}},[i("span",[t._v("\n          Cancel\n        ")])]),i("button",{staticClass:"el-button el-button--default el-button--small el-button--primary ",attrs:{type:"button"},on:{click:function(e){t.$emit("run")}}},[i("span",[t._v("\n          "+t._s(t.ok)+"\n        ")])])])]),i("div",{staticClass:"v-modal",staticStyle:{"z-index":"-2000"},attrs:{tabindex:"0"}})])},O=[],L={beforeMount:function(){window.addEventListener("keyup",this.onEscapeKeyUp)},beforeDestroy:function(){window.removeEventListener("keyup",this.onEscapeKeyUp)},props:{title:String,ok:{type:String,default:"OK"}},methods:{onEscapeKeyUp:function(t){27===t.which&&this.$emit("cancel")}}},E=L,z=(i("6121"),i("2877")),R=Object(z["a"])(E,T,O,!1,null,null,null);R.options.__file="MessageBox.vue";var P=R.exports,A=function(){var t,e=this,i=e.$createElement,n=e._self._c||i;return n("div",e._g({staticClass:"number-input",class:(t={"number-input--inline":e.inline,"number-input--center":e.center,"number-input--controls":e.controls},t["number-input--"+e.size]=e.size,t)},e.listeners),[e.controls?n("button",{staticClass:"number-input__button number-input__button--minus",attrs:{type:"button",disabled:e.disabled||e.readonly||!e.decreasable},on:{click:e.decrease}}):e._e(),n("input",{ref:"input",staticClass:"number-input__input",attrs:{type:"number",name:e.name,min:e.min,max:e.max,step:e.step,readonly:e.readonly||!e.inputtable,disabled:e.disabled||!e.decreasable&&!e.increasable,placeholder:e.placeholder,autocomplete:"off"},domProps:{value:e.currentValue},on:{change:e.change,paste:e.paste}}),e.controls?n("button",{staticClass:"number-input__button number-input__button--plus",attrs:{type:"button",disabled:e.disabled||e.readonly||!e.increasable},on:{click:e.increase}}):e._e()])},D=[],G=i("c93e"),I=(i("c5f6"),i("ee1d"),Number.isNaN||window.isNaN),B=/^-?(?:\d+|\d+\.\d+|\.\d+)(?:[eE][-+]?\d+)?$/,W=function(t){return parseFloat(t.toFixed(10))},N={name:"number-input",data:function(){return{currentValue:NaN}},model:{event:"change"},props:{center:Boolean,controls:Boolean,disabled:Boolean,inputtable:{type:Boolean,default:!0},inline:Boolean,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},name:String,placeholder:String,readonly:Boolean,rounded:Boolean,size:String,step:{type:Number,default:1},value:Number},computed:{increasable:function(){var t=this.currentValue;return I(t)||t<this.max},decreasable:function(){var t=this.currentValue;return I(t)||t>this.min},listeners:function(){var t=Object(G["a"])({},this.$listeners);return delete t.change,t}},methods:{change:function(t){this.setValue(Math.min(this.max,Math.max(this.min,t.target.value)))},paste:function(t){B.test(t.clipboardData.getData("text"))||t.preventDefault()},decrease:function(){if(this.decreasable){var t=this.currentValue;I(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,W(t-this.step))))}},increase:function(){if(this.increasable){var t=this.currentValue;I(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,W(t+this.step))))}},setValue:function(t){var e=this,i=this.currentValue,n=this.rounded?Math.round(t):t;this.min<=this.max&&(n=Math.min(this.max,Math.max(this.min,n))),this.currentValue=n,this.$emit("change",n,i),this.$nextTick(function(){e.$el&&(e.$refs.input.value=n)})}},watch:{value:function(t){this.setValue(t)}},created:function(){this.setValue(this.value)}},F=N,U=(i("5741"),Object(z["a"])(F,A,D,!1,null,"6c7308e8",null));U.options.__file="number-input.vue";var q=U.exports;function $(t){var e=0,i=0,n=0,a=0,s=void 0;if(document.getElementById(t)){s=document.getElementById(t);var r=s.getElementsByClassName("el-dialog__header")[0];r.onmousedown=o}function o(t){t=t||window.event,t.preventDefault(),n=t.clientX,a=t.clientY,document.onmouseup=c,document.onmousemove=l}function l(t){t=t||window.event,t.preventDefault(),e=n-t.clientX,i=a-t.clientY,n=t.clientX,a=t.clientY,s.style.top=s.offsetTop-i+"px",s.style.left=s.offsetLeft-e+"px"}function c(){document.onmouseup=null,document.onmousemove=null}}i("24f8");var K="http://13.81.247.156:25041/compute",J="http://13.81.247.156:25041/results";g.Control.extend({options:{position:"topleft"}});function V(t){return t*(Math.PI/180)}function H(t,e,i,n){var a=6371,s=V(i-t),r=V(n-e),o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(V(t))*Math.cos(V(i))*Math.sin(r/2)*Math.sin(r/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)),c=a*l;return c}function X(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds();return e}i("bc3a");function Y(t){return 0==t?0:1==t?0:120==t?0:t<=60?t-2:0}function Z(t){return 0==t?60:1==t?61:120==t?60:t<=60?62:t%60}function Q(t){return 0==t?58:1==t?58:120==t?58:t<=60?60-t:58}function tt(t){return 0==t?2:1==t?1:120==t?2:t<=60?0:122-t}function et(t){return 0==t?0:120==t?0:1==t?1:t<=62?t:0}function it(t){return 0==t?58:120==t?58:1==t?58:t<=62?58:t-62}function nt(t){return 0==t?62:120==t?62:1==t?61:t<=62?62-t:62}function at(t){return 0==t?0:120==t?0:1==t?0:t<=62?0:120-t}var st=function(t){return new Promise(function(e){setTimeout(e,t)})},rt=function(t,e){return new Promise(function(i){var n=new XMLHttpRequest;n.timeout=1e5,n.onreadystatechange=function(){4==this.readyState&&(200==this.status||201==this.status?i(this.response):i(JSON.stringify({isError:!0,status:this.status,statusText:this.statusText})))},n.open("POST",t),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.send(e)})},ot=function(t){var e=document.createElement("textarea");e.value=t,document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)},lt={components:{MessageBox:P,"number-input":q},data:function(){return Object(c["a"])({myChart:"",myChart_sim:"",genetic_config:{iterations:100,size:20,crossover:.4,mutation:.3},pop_isGreen:!1,pop_position:"",pop_visible:!1,pop_left:0,pop_top:0,pop_time:0,speed_visible:!1,speed_left:0,speed_top:0,speed_text:"",simulation:[],simulation_markers:void 0,simulation_time:0,simulation_score:"",simulation2:[],simulation2_score:"",simulation2_signals:[],isLoading_screen:!1,isLoading_screenText:"Loading",isSimulation_open:!1,isSumulation_finish:!1,isSimulation_play:!1,isSimulation_text:"",isSumulation_downloading:!1,isSumulation_loading:!1,isSumulation_loading_time:0,isSimulation_statistics_open:!1,simulation_statistics_table:[],isLoading:!1,isLoading_finish:!1,isLoading_open:!1,isLoading_text:"...",isLoading_score:"",isShowGenetic:!1,traffic_dialog:{visible:!0},traffic_visible:"",traffic_time:0,traffic_group:w["28"],traffic_signs:w["28"].signs[0],traffic_times:w["28"].times,panelType:"",icon:"",car_icon:"",map:"",zoom:15,mapMarkers:[],center:[52.2187,20.9864],car:[],car_position:[52.2211,20.9849],time:0,best_solution:[43,16,64,69,6,21,83,119,81,91,37,47,42,30,54,48,29,24,35,36,6],best_solution_result:38899,sign_times:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],sign_groups:w},"simulation_time",0)},computed:{pop_time1:function(){return et(this.pop_time)},pop_time2:function(){return it(this.pop_time)},pop_time3:function(){return nt(this.pop_time)},pop_time4:function(){return at(this.pop_time)},pop_gtime1:function(){return Y(this.pop_time)},pop_gtime2:function(){return Z(this.pop_time)},pop_gtime3:function(){return Q(this.pop_time)},pop_gtime4:function(){return tt(this.pop_time)},traffic_gtime1:function(){return Y(this.traffic_time)},traffic_gtime2:function(){return Z(this.traffic_time)},traffic_gtime3:function(){return Q(this.traffic_time)},traffic_gtime4:function(){return tt(this.traffic_time)},traffic_time1:function(){return et(this.traffic_time)},traffic_time2:function(){return it(this.traffic_time)},traffic_time3:function(){return nt(this.traffic_time)},traffic_time4:function(){return at(this.traffic_time)}},mounted:function(){this.icon=g.icon({iconUrl:"https://image.flaticon.com/icons/png/128/803/803227.png",iconSize:[30,25],iconAnchor:[0,0],popupAnchor:[0,0]}),this.car_icon=g.icon({iconUrl:"http://icons.iconarchive.com/icons/icons-land/transporter/256/Car-Top-Red-icon.png",iconSize:[40,40],iconAnchor:[20,15],popupAnchor:[14,230]});var t=g.map("mapid").setView(this.center,this.zoom);t.on("click",function(t){var e=t.latlng.lat+6245208e-11+","+(t.latlng.lng-130204e-9);ot(e)}),this.map=t,g.tileLayer("http://{s}.tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),this.refreshMarks();var e=this;M.model.on_load=function(){e.traffic_set_time()},$("simulation")},methods:{router_home:function(){window.location.href="http://tensortraffic.com"},refreshMarks:function(){for(var t=0;t<this.mapMarkers.length;t++)this.map.removeLayer(this.mapMarkers[t]);for(var e in this.sign_groups){var i=this.sign_groups[e],n=!0,a=!1,s=void 0;try{for(var r,o=i.signs[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;i.signs[l];this.addSign(l,i)}}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}}this.uploadCars()},addSign:function(t,e){t.group=e,t.show&&(e.sign_marker=t);var i=new g.marker(t.position,{icon:this.icon});t.show&&i.bindTooltip(String(e.time),{permanent:!0,className:"my-label",opacity:.8,offset:[15,5]}),i.addTo(this.map),this.mapMarkers.push(i),i.sign=t,t.marker=i;var n=this;i.on("click",function(t){n.traffic_dialog_update(t.target.sign)}),i.on("mouseover",function(e){n.pop_visible=!0,n.pop_left=e.containerPoint.x+25,n.pop_top=e.containerPoint.y-20,n.pop_isGreen=t.isGreen,n.pop_position=t.position,n.pop_time=t.group.time,i.openPopup()}),i.on("mouseout",function(t){n.pop_visible=!1})},car_on:function(t,e){var i=this;i.speed_visible=!0,i.speed_left=e.containerPoint.x+25,i.speed_top=e.containerPoint.y-20,i.speed_text="Speed: "+t.speed.toFixed(2)+" km/h"},car_off:function(t,e){var i=this;i.speed_visible=!1},calOnOver:function(t){t.sign_marker.marker.unbindTooltip(),t.sign_marker.marker.bindTooltip(String(t.time),{permanent:!0,className:"my-label-show",opacity:.9,offset:[15,5]})},calOffOver:function(t){t.sign_marker.marker.unbindTooltip(),t.sign_marker.marker.bindTooltip(String(t.time),{permanent:!0,className:"my-label",opacity:.8,offset:[15,5]})},traffic_show:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var e in this.sign_groups){var i=this.sign_groups[e],n=t[i.id],a=parseInt(n);i.time!=a?(i.changeTime=Date.now(),i.time=parseInt(n),i.sign_marker.marker.unbindTooltip(),i.sign_marker.marker.bindTooltip(String(n),{permanent:!0,className:"my-label-show",opacity:.9,offset:[15,5]})):void 0!=i.changeTime&&Date.now()-i.changeTime>2e3&&(i.changeTime=void 0,i.sign_marker.marker.unbindTooltip(),i.sign_marker.marker.bindTooltip(String(i.time),{permanent:!0,className:"my-label",opacity:.9,offset:[15,5]}))}},traffic_get_population:function(){var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(var e in this.sign_groups){var i=this.sign_groups[e];t[i.id]=i.time}return t},traffic_load:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];for(var n in this.sign_groups){var a=this.sign_groups[n];this.traffic_set_group(a,t[a.id]),this.calOffOver(a)}e&&this.traffic_set_time(i)},traffic_set_group:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.time=parseInt(e),this.sign_times[t.id]=t.time,t.sign_marker.marker.setTooltipContent(String(e)),i&&this.traffic_set_time()},traffic_set_time:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];for(var e in this.sign_groups){var i=this.sign_groups[e];this.sign_times[i.id]=i.time}this.time=M.model.predict(this.sign_times),t&&this.$message({showClose:!0,type:"warning",message:"New Traffic result: "+Math.round(this.time)})},traffic_dialog_confirm:function(){this.traffic_set_group(this.traffic_group,this.traffic_time,!0),this.traffic_dialog_off()},traffic_dialog_off:function(){this.calOffOver(this.traffic_group),this.traffic_visible="",this.isSimulation_open&&this.traffic_set(this.simulation_time)},traffic_dialog_update:function(t){var e=this.map.getBounds();e=Math.abs(e.getWest()-e.getEast()),this.map.panTo([t.position[0],t.position[1]+.4*e]),this.calOnOver(t.group),this.traffic_signs=t.group.signs,this.traffic_group=t.group,this.traffic_visible="traffic",this.traffic_time=t.group.time},uploadCars:function(){},showCalculation:function(){this.panelType="cal"==this.panelType?"":"cal"},chartsim_set:function(t){this.myChart_sim.data.datasets[0].label="Avg Speed 1st ("+t+"s)",this.myChart_sim.update()},chartsim_set2:function(t){this.myChart_sim.data.datasets[1].label="Avg Speed 2nd ("+t+"s)",this.myChart_sim.update()},chartsim_add2:function(t,e){this.myChart_sim.data.datasets[1].data.push(e),this.myChart_sim.update()},chartsim_add:function(t,e){this.myChart_sim.data.labels.push(t),this.myChart_sim.data.datasets[0].data.push(e),this.myChart_sim.update()},init_chartsim:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(""==this.myChart_sim||0!=t){this.myChart_sim&&this.myChart_sim.destroy();var e=document.getElementById("myChart_sim");this.myChart_sim=new Chart(e,{labels:["Avg Speed"],borderWidth:1,type:"line",data:{datasets:[{backgroundColor:"rgba(0,209,178,0.3)",borderColor:"rgba(0,0,0,0)",label:"Avg Speed 1st",labels:[],data:[]},{backgroundColor:"rgba(209,0,178,0.15)",borderColor:"rgba(0,0,0,0)",label:"Avg Speed 2nd",labels:[],data:[]}]},options:{maintainAspectRatio:!1,tooltips:{callbacks:{label:function(t,e){return t.yLabel+" km/h"}}},legend:{display:!0,labels:{fontColor:"#000080"},position:"bottom"},scales:{xAxes:[{display:!1,scaleLabel:{display:!1,labelString:"Time"},ticks:{stepSize:10}}],yAxes:[{display:!0,beginAtZero:!0,min:0,scaleLabel:{min:0,display:!0,labelString:"Average Speed (km/h)"},ticks:{min:0,beginAtZero:!0}}]}}})}},chart_add:function(t,e){this.myChart.data.labels.push(t),this.myChart.data.datasets[0].data.push(e),this.myChart.update()},init_chart:function(){var t=document.getElementById("myChart");this.myChart=new Chart(t,{labels:["Traffic score"],borderWidth:1,type:"line",data:{datasets:[{backgroundColor:"rgba(255,99,132,1)",borderColor:"rgba(255,99,132,1)",label:"Traffic score",labels:[],data:[]},{backgroundColor:"rgba(255,99,132,1)",borderColor:"rgba(255,99,132,1)",label:"Traffic score 2nd score",labels:[],data:[]}]},options:{legend:{display:!1,labels:{fontColor:"#000080"}},scales:{xAxes:[{display:!1,scaleLabel:{display:!1,labelString:"Iteration"},ticks:{stepSize:10}}],yAxes:[{display:!0,beginAtZero:!0,scaleLabel:{display:!1,labelString:"Traffic Score"}}]}}})},loading_open:function(){},traffic_clear_signs:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.mapMarkers[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value;s.unbindTooltip()}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}for(var r in this.sign_groups){var o=this.sign_groups[r];o.sign_marker.marker.bindTooltip(String(o.time),{permanent:!0,className:"my-label",opacity:.9,offset:[15,5]})}},traffic_show_signs:function(){for(var t in this.sign_groups){var e=this.sign_groups[t];e.sign_marker.marker.unbindTooltip(),e.sign_marker.marker.bindTooltip(String(e.time),{permanent:!0,className:"my-label",opacity:.9,offset:[5,5]})}},traffic_get_time:function(t,e){return t%=120,t<e.time1?[e.time1-t,e.isGreen]:t<e.time2?[e.time2-t,!e.isGreen]:t<e.time3?[e.time3-t,e.isGreen]:[e.time4-t,!e.isGreen]},traffic_set_init:function(){var t=!0,e=!1,i=void 0;try{for(var n,a=this.mapMarkers[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value,r=s.sign.group.time;s.sign.isGreen?(s.sign.time1=Y(r),s.sign.time2=Z(r)+s.sign.time1,s.sign.time3=Q(r)+s.sign.time2,s.sign.time3>=120&&s.sign.time1>0&&(s.sign.time3+=s.sign.time1),s.sign.time4=58+s.sign.time3):(s.sign.time1=et(r),s.sign.time2=it(r)+s.sign.time1,s.sign.time3=nt(r)+s.sign.time2,s.sign.time3>=120&&s.sign.time1>0&&(s.sign.time3+=s.sign.time1),s.sign.time4=62+s.sign.time3)}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}},traffic_set:function(t){if(t<0)this.traffic_clear_signs();else{var e=!0,i=!1,n=void 0;try{for(var a,s=this.mapMarkers[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var r=a.value,o=this.traffic_get_time(t,r.sign);r.unbindTooltip(),r.bindTooltip(String(o[0]),{permanent:!0,className:o[1]?"my-green":"my-red",opacity:.9,offset:[10,5]})}}catch(t){i=!0,n=t}finally{try{e||null==s.return||s.return()}finally{if(i)throw n}}}},simulation_statistics_open:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a,s,r,o,l,c,u,_,f,m,h,p,d,g,v,b,w,y,k,S,x;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.simulation_statistics_table=[],this.isLoading_screenText="Please Wait. Calculating Statistics...",this.isLoading_screen=!0,t.next=5,st(200);case 5:for(e in t.prev=5,this.sign_groups)i=this.sign_groups[e],i.cars=0,i.waiting_cars=0,i.total_speed=0,i.cars2=0,i.waiting_cars2=0,i.total_speed2=0,i.time2=0,this.simulation2_score>0&&(i.time2=this.simulation2_signals[i.id]);[],n=0;case 9:if(!(n<600)){t.next=32;break}for(a=!0,s=!1,r=void 0,t.prev=13,o=this.simulation[n][Symbol.iterator]();!(a=(l=o.next()).done);a=!0){for(e in c=l.value,u=1e9,_=void 0,this.sign_groups)f=this.sign_groups[e],m=H(f.sign_marker.position[0],f.sign_marker.position[1],c[2],c[3]),m<u&&(_=f,u=m);_.cars+=1,_.total_speed+=c[1],c[1]<=0&&(_.waiting_cars+=1)}t.next=21;break;case 17:t.prev=17,t.t0=t["catch"](13),s=!0,r=t.t0;case 21:t.prev=21,t.prev=22,a||null==o.return||o.return();case 24:if(t.prev=24,!s){t.next=27;break}throw r;case 27:return t.finish(24);case 28:return t.finish(21);case 29:n++,t.next=9;break;case 32:if(!(this.simulation2_score>0)){t.next=57;break}h=0;case 34:if(!(h<600)){t.next=57;break}for(p=!0,d=!1,g=void 0,t.prev=38,v=this.simulation2[h][Symbol.iterator]();!(p=(b=v.next()).done);p=!0){for(e in w=b.value,y=1e9,k=void 0,this.sign_groups)S=this.sign_groups[e],x=H(S.sign_marker.position[0],S.sign_marker.position[1],w[2],w[3]),x<y&&(k=S,y=x);k.cars2+=1,k.total_speed2+=w[1],w[1]<=0&&(k.waiting_cars2+=1)}t.next=46;break;case 42:t.prev=42,t.t1=t["catch"](38),d=!0,g=t.t1;case 46:t.prev=46,t.prev=47,p||null==v.return||v.return();case 49:if(t.prev=49,!d){t.next=52;break}throw g;case 52:return t.finish(49);case 53:return t.finish(46);case 54:h++,t.next=34;break;case 57:return t.prev=57,this.isLoading_screen=!1,t.finish(57);case 60:case"end":return t.stop()}},t,this,[[5,,57,60],[13,17,21,29],[22,,24,28],[38,42,46,54],[47,,49,53]])}));return function(){return t.apply(this,arguments)}}(),simulation_open:function(){this.isSimulation_open=!0,this.isSimulation_finish=!0,this.isSimulation_text="Click run to get all simulations",this.traffic_set_init();var t=this;n["default"].nextTick(function(){t.init_chartsim(),t.traffic_set(0)})},simulation_loop_status:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.isSumulation_downloading){t.next=8;break}if(!this.isSumulation_finish){t.next=3;break}return t.abrupt("return");case 3:return this.isSimulation_text="Waiting for calculations: "+Math.round((Date.now()-this.isSumulation_loading_time)/1e3)+"s",t.next=6,st(500);case 6:t.next=0;break;case 8:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),simulation_init:function(){this.simulation=[],void 0!=this.simulation_markers&&this.simulation_markers.clear_cars(),this.simulation_markers=g.Marker.movingMarker(this.map,this.simulation,this.car_on,this.car_off)},get_avg_speed:function(t){var e=0,i=t.length,n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done);n=!0){var l=r.value;e+=l[1]}}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return Math.round(e/i*100)/100},simulation_download_times:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a,s,r,o,l,c,_,f,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:for(e=this,e.simulation=[],e.isSimulation_text="Download simulations: ",e.simulation_time=0,e.simulation_init(),e.chartsim_set(this.simulation_score),this.$notify({title:"Success",message:"Simulation calculated, start downloading",type:"success"}),i="output",n=!0,a=!1,s=void 0,t.prev=11,r=this.sign_times[Symbol.iterator]();!(n=(o=r.next()).done);n=!0)l=o.value,i+="_"+String(l);t.next=19;break;case 15:t.prev=15,t.t0=t["catch"](11),a=!0,s=t.t0;case 19:t.prev=19,t.prev=20,n||null==r.return||r.return();case 22:if(t.prev=22,!a){t.next=25;break}throw s;case 25:return t.finish(22);case 26:return t.finish(19);case 27:c=0;case 28:if(!(c<600)){t.next=65;break}return t.prev=29,this.isSimulation_text="Download simulations: "+(c+1)+"/600",_='{"time":"'+String(c)+'","outdir": "'+i+'"  }',t.t1=JSON,t.next=35,rt(J,_);case 35:if(t.t2=t.sent,f=t.t1.parse.call(t.t1,t.t2),void 0==f.isError){t.next=45;break}if(e.isSumulation_loading){t.next=40;break}return t.abrupt("return");case 40:return e.$notify({title:'Error while downloading / Software will try repeat after 5 seconds. Please click "cancel" to stop.',message:f.statusText,type:"error"}),t.next=43,st(5e3);case 43:return c-=1,t.abrupt("continue",62);case 45:if(f=u(f.cars),e.simulation_markers.add_values(f),m=this.get_avg_speed(f),this.chartsim_add(c,m),e.simulation.push(f),e.simulation_time=c,e.simulation_markers.car_set(c),this.traffic_set(c),e.isSumulation_loading){t.next=55;break}return t.abrupt("return");case 55:return t.next=57,st(100);case 57:t.next=62;break;case 59:t.prev=59,t.t3=t["catch"](29),this.$notify({title:"Errors during download",message:t.t3,type:"danger"});case 62:c++,t.next=28;break;case 65:e.stop_download("Simulation run",0);case 66:case"end":return t.stop()}},t,this,[[11,15,19,27],[20,,22,26],[29,59]])}));return function(){return t.apply(this,arguments)}}(),stop_download:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"success";this.isSimulation_text=t,this.isSumulation_finish=!0,this.isSumulation_loading=!1,this.simulation_time=e,void 0!=this.simulation_markers&&this.simulation_markers.car_set(e),this.traffic_set(e),this.$notify({title:i,message:t,type:i})},simulation_export:function(){var t=JSON.stringify({simulation_score:this.simulation_score,sign_times:this.traffic_get_population(),simulation_times:this.simulation}),e=new Blob([t],{type:"text/json"}),i=X()+"-"+String(this.simulation_score)+"-simulation.json";if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,i);else{var n=window.document.createElement("a");n.href=window.URL.createObjectURL(e),n.download=i,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},simulation_import_compare:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,i=document.createElement("div"),i.innerHTML='<input type="file" accept=".json">',n=i.firstChild,n.addEventListener("change",function(){var t=n.files[0];if(t.name.match(/\.(xml|txt|json)$/)){var i=new FileReader;i.onload=Object(l["a"])(regeneratorRuntime.mark(function t(){var n,a,s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=JSON.parse(i.result),e.simulation2=[],e.simulation2_score=n.simulation_score,e.simulation2_signals=n.sign_times,e.isLoading_screenText="Please Wait. Importing 2nd simulation",e.isLoading_screen=!0,e.chartsim_set2(e.simulation2_score),t.next=9,st(200);case 9:for(e.myChart_sim.data.datasets[1].data.length=0,a=0;a<600;a++)s=n.simulation_times[a],r=e.get_avg_speed(s),e.chartsim_add2(a,r),e.simulation2.push(s);e.isLoading_screen=!1,e.stop_download("2nd Simulation Imported",0);case 13:case"end":return t.stop()}},t,this)})),i.readAsText(t)}else alert("File not supported, .txt or .json files only")}),n.click();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_import:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e=this,i=document.createElement("div"),i.innerHTML='<input type="file" accept=".json">',n=i.firstChild,n.addEventListener("change",function(){var t=n.files[0];if(t.name.match(/\.(xml|txt|json)$/)){var i=new FileReader;i.onload=Object(l["a"])(regeneratorRuntime.mark(function t(){var n,a,s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.simulation_time=0,this.isSumulation_loading=!0,this.isSumulation_downloading=!0,this.isSumulation_loading_time=Date.now(),this.isSumulation_finish=!1,n=JSON.parse(i.result),e.simulation_score=n.simulation_score,e.traffic_load(n.sign_times,!0,!0),e.simulation_open(),e.init_chartsim(!0),e.traffic_set(0),e.simulation_init(),e.chartsim_set(n.simulation_score),e.isLoading_screenText="Please Wait. Importing simulation",e.isLoading_screen=!0,t.next=17,st(200);case 17:for(a=0;a<600;a++)s=n.simulation_times[a],e.simulation_markers.add_values(s),r=e.get_avg_speed(s),e.chartsim_add(a,r),e.simulation.push(s);e.isLoading_screen=!1,e.stop_download("Simulation Imported",0);case 20:case"end":return t.stop()}},t,this)})),i.readAsText(t)}else alert("File not supported, .txt or .json files only")}),n.click();case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_download:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i,n,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSumulation_loading=!0,e=JSON.stringify({settings:JSON.stringify(this.sign_times)}),this.simulation_time=0,this.isSumulation_loading=!0,this.isSumulation_downloading=!0,this.isSumulation_loading_time=Date.now(),this.isSumulation_finish=!1,this.init_chartsim(!0),i=this,t.prev=9,n=this,a=new XMLHttpRequest,a.timeout=1e5,a.onreadystatechange=function(){if(4==this.readyState){if(200!=this.status&&201!=this.status)return n.$notify({title:"Errors during calculation",message:this.status+":"+this.statusText,type:"danger"}),void n.stop_download("Error during calculation",0,"error");var t=JSON.parse(this.response);n.isSumulation_downloading=!1,n.simulation_score=t.score,n.simulation_download_times()}},a.open("POST",K),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(e),this.simulation_loop_status(a),t.next=20,st(500);case 20:t.next=27;break;case 22:return t.prev=22,t.t0=t["catch"](9),this.$notify({title:"Errors during calculation",message:t.t0,type:"danger"}),i.stop_download("Error during calculation",0,"error"),t.abrupt("return");case 27:case"end":return t.stop()}},t,this,[[9,22]])}));return function(){return t.apply(this,arguments)}}(),simulation_close:function(){this.traffic_set(-1),this.isSimulation_open=!1},loading_close:function(){this.isLoading_open=!1},genetic_calculate:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isSimulation_open=!1,this.isLoading_finish=!1,this.isLoading_text="Running",this.isLoading=!0,this.isLoading_open=!0,this.isShowGenetic=!1,this.panelType="",this.map.panTo([52.2176205,20.9740354]),t.next=10,st(500);case 10:return this.init_chart(),e=this,[],t.prev=13,t.next=16,M.run(function(t,i,n,a,s,r){if(t){e.isLoading_finish=!0,e.isLoading_text="Finished calculation",e.traffic_load(i,!0,!1);var o=M.model.predict(i);o<e.best_solution_result&&(e.best_solution_result=o,e.best_solution=i)}},e.genetic_config,function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(i,n,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.chart_add(i,a.fitness),e.traffic_show(a.entity,i%6==0),e.isLoading_text="Running: "+i+"/"+n,e.isLoading_score=String(Math.round(a.fitness))+" s",t.next=6,st(1);case 6:case"end":return t.stop()}},t,this)}));return function(e,i,n){return t.apply(this,arguments)}}());case 16:t.next=20;break;case 18:t.prev=18,t.t0=t["catch"](13);case 20:case"end":return t.stop()}},t,this,[[13,18]])}));return function(){return t.apply(this,arguments)}}(),showSimulation:function(){this.panelType="sim"==this.panelType?"":"sim"},simulation_load:function(){this.simulation_time=0},simulation_change:function(t){void 0!=this.simulation_markers&&(this.simulation_markers.car_set(t),this.traffic_set(t))},simulation_play:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.isSimulation_play=!0,e=function(t){return new Promise(function(e){return setTimeout(e,t)})},void 0==this.simulation_markers){t.next=15;break}i=this.simulation_time;case 4:if(!(i<this.simulation_markers.size())){t.next=15;break}if(this.isSimulation_play){t.next=7;break}return t.abrupt("return");case 7:return this.simulation_time=i,this.simulation_markers.car_set(i),this.traffic_set(i),t.next=12,e(200);case 12:i++,t.next=4;break;case 15:return this.isSimulation_play=!1,t.abrupt("return");case 17:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),simulation_pause:function(){this.isSimulation_play=!1},playCars:function(){this.map.removeLayer(this.car);var t=g.Marker.movingMarker([[52.221,20.9853],[52.2163,20.9811]],[5e3],{icon:this.car_icon,rotationAngle:-58}).addTo(this.map),e=this;t.addEventListener("end",function(i){e.map.removeLayer(t),e.uploadCars()}),t.start()}}},ct=lt,ut=(i("bb97"),Object(z["a"])(ct,r,o,!1,null,null,null));ut.options.__file="mymap.vue";var _t=ut.exports,ft=(i("455d"),{data:function(){return{map:null}},name:"app",components:{mymap:_t}}),mt=ft,ht=(i("5c0b"),i("b0a0"),Object(z["a"])(mt,a,s,!1,null,null,null));ht.options.__file="App.vue";var pt=ht.exports,dt=i("5c96"),gt=i.n(dt),vt=(i("0fae"),i("b2d6")),bt=i.n(vt);n["default"].use(gt.a,{locale:bt.a}),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(pt)}}).$mount("#app")},5741:function(t,e,i){"use strict";var n=i("06de"),a=i.n(n);a.a},"5c0b":function(t,e,i){"use strict";var n=i("106f"),a=i.n(n);a.a},6121:function(t,e,i){"use strict";var n=i("bb87"),a=i.n(n);a.a},"6d8c":function(t,e,i){t.exports=i.p+"img/info01.7203c3b2.png"},7256:function(t,e,i){t.exports=i.p+"img/info02.a2fab2d5.png"},"769a":function(t,e,i){t.exports=i.p+"img/info06.7db862f5.png"},b0a0:function(t,e,i){"use strict";var n=i("2e89"),a=i.n(n);a.a},bb87:function(t,e,i){},bb97:function(t,e,i){"use strict";var n=i("09db"),a=i.n(n);a.a}});
//# sourceMappingURL=app.1307eedd.js.map